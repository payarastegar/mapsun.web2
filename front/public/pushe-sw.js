/*! For license information please see pusheweb-sw.js.LICENSE.txt */
var Pushe;(()=>{var t={440:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PusheContext:()=>$,default:()=>R});var i=n(334),o=n(342),r=n(242),s=n(600);class a extends s.A{}class l extends s.A{constructor(t,e,n){super(n||`API error occured: ${t} ${e}`),this.status=t,this.statusReason=e}}class c extends l{}var d=n(106);const u=new d.Y3({endpoint:(0,d.ZZ)("endpoint"),expirationTime:(0,d.ZZ)("expiration_time"),keys:(0,d.ZZ)("keys")}),p=new d.Y3({deviceId:(0,d.ZZ)("device_id"),collectData:(0,d.ZZ)("collect_data"),collectDelayTime:(0,d.ZZ)("collect_delay_time"),permissionState:(0,d.ZZ)("permission_state"),isSubscribed:(0,d.ZZ)("is_subscribed"),subscription:(0,d.MJ)("subscription",u),sessionInterval:(0,d.ZZ)("session_interval"),pusheSubdomain:(0,d.ZZ)("pushe_subdomain"),publicKey:(0,d.ZZ)("public_key")}),h=new d.Y3({deviceId:(0,d.ZZ)("device_id"),notificationId:(0,d.ZZ)("notification_id"),wrapperId:(0,d.ZZ)("wrapper_id")}),f=new d.Y3({deviceId:(0,d.ZZ)("device_id"),notificationId:(0,d.ZZ)("notification_id"),wrapperId:(0,d.ZZ)("wrapper_id"),action:(0,d.ZZ)("action"),actionData:(0,d.ZZ)("action_data")}),v=new d.Y3({permissionState:(0,d.ZZ)("permission_state"),subscription:(0,d.MJ)("subscription",u),isSubscribed:(0,d.ZZ)("is_subscribed"),new_subscription:(0,d.ZZ)("new_subscription")});var b=n(266);class g extends l{constructor(t,e,n){super(e,n,`Invalid request to ${t}: ${e} ${n}`)}}var m=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{baseURL:y,staticBaseURL:w,optionUrlPath:S}=n(119);class x{constructor(t){this.context=t,this.webpushApi=new I({baseUrl:y,includeCredentials:!0}),this.staticApi=new I({baseUrl:w,includeCredentials:!1,ignoreRequestFailure:!0})}addCredentials(t){const e=this.context.getUserCredentials();return Object.assign(Object.assign({app_id:e.appId,sdk_version:"1.11.0"},this.context.deviceId?{device_id:this.context.deviceId}:{}),t)}getInitializationState(){return m(this,void 0,void 0,(function*(){const t=yield this.webpushApi.get("/status",this.addCredentials({}));return p.fromJson(yield t.json(),{sessionInterval:300})}))}updatePushSubscription(t){return m(this,void 0,void 0,(function*(){yield this.webpushApi.post("/push/subscription",this.addCredentials(v.toJson(t)))}))}hasServerSyncedSubscription(){return m(this,void 0,void 0,(function*(){const{app_id:t="",device_id:e=""}=this.addCredentials({});return(yield this.webpushApi.get("/subscription-ack",{app_id:t,device_id:e})).json()}))}getPushSubscription(){return m(this,void 0,void 0,(function*(){const t=yield this.webpushApi.get("/push/subscription",this.addCredentials({}));return u.fromJson(t.json())}))}isSubscribed(){return m(this,void 0,void 0,(function*(){return(yield this.webpushApi.get("/push/subscribed",this.addCredentials({}))).json()}))}getSDKElementsOptions(t){return m(this,void 0,void 0,(function*(){const e=btoa(Math.random().toString()),n=yield this.context.getConfigs("option_url");let i=t;if(n){const t=n.split("/");i=t[t.length-1]}const o=i===t&&n?n:`${S}/${t}`;return(yield this.staticApi.getWithoutRetry(o,e)).json()}))}pushDelivered(t){return m(this,void 0,void 0,(function*(){yield this.webpushApi.post("/push/delivery",this.addCredentials(h.toJson(t)))}))}notificationInteracted(t){return m(this,void 0,void 0,(function*(){yield this.webpushApi.post("/push/interaction",this.addCredentials(f.toJson(t)))}))}sendMessageUpstream(t){return m(this,void 0,void 0,(function*(){yield this.webpushApi.post("/analytics/messages",this.addCredentials(t))}))}sendSessionEndToServerOnHttp(t){return m(this,void 0,void 0,(function*(){const e=this.addCredentials(t);try{const t=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(`${y}/analytics/messages`,t)}catch(t){i.A.error("Unable to send session-end analytics to server.")}}))}}class I{constructor(t){var e;this.absoluteUrl="",this.baseUrl=(null==t?void 0:t.baseUrl)||y,this.includeCredentials=null===(e=null==t?void 0:t.includeCredentials)||void 0===e||e}request(t,e,n,o){return m(this,void 0,void 0,(function*(){const r=r=>m(this,void 0,void 0,(function*(){if(o>10)throw r;const s=this.nextBackoff(o||0);return i.A.warn(`API request to ${e} failed, retrying in ${s} seconds.`),yield(0,b.yy)(1e3*s),this.request(t,e,n,(o||0)+1)}));try{let i=`${this.baseUrl}${e}`;/^https?:\/\//.test(e)&&(i=e);const o={Accept:"application/json","Content-Type":"application/json"};navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")&&delete o["Content-Type"];const s=yield fetch(i,{body:n?JSON.stringify(n):void 0,headers:o,method:t,credentials:this.includeCredentials?"include":"omit"});if(s.status>=500&&s.status<600)return r(new c(s.status,s.statusText));if(s.status>=400&&s.status<500)throw new g(e,s.status,s.statusText);return s}catch(t){if(t instanceof TypeError)return r(new a);throw t}}))}post(t,e){return m(this,void 0,void 0,(function*(){return this.request("POST",t,e)}))}get(t,e){return m(this,void 0,void 0,(function*(){const n=this.processQueryParams(e);return this.request("GET",`${t}?${n}`)}))}getWithoutRetry(t,e){return m(this,void 0,void 0,(function*(){const n=this.processQueryParams(e);return this.request("GET",`${t}?${n}`,void 0,11)}))}processQueryParams(t){const e=encodeURIComponent;let n="";return n=t&&"object"==typeof t?Object.keys(t).map((n=>e(n)+"="+e(t[n]))).join("&"):String(t),n}nextBackoff(t){return Math.pow(2,t)}}var O=n(283),k=n(213),P=n(921),E=n(560),_=n(530),A=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{serviceWorkerPath:C,httpBaseDomain:T,serviceWorkerScope:D}=n(119);class ${constructor(){this.db=_.A.Instance,this.api=new x(this),this.serviceWorker=new o.A,this.services={},this.workerMessenger=new E.A(this),(0,O.u)()===r.default.SDK&&this.isSubdomainWindow()&&this.db.lockInitState()}setDeviceId(){return A(this,arguments,void 0,(function*(t=null){if((0,O.u)()===r.default.ServiceWorker)this.deviceId=t;else{const e=yield this.db.getDeviceId();t&&t!==e?(yield this.db.setDeviceId(t),this.deviceId=t):this.deviceId=e}}))}getInitializationState(){return A(this,void 0,void 0,(function*(){const t=yield this.db.getDeviceId();t&&(this.deviceId=t);const e=!this.isSubdomainWindow()&&(yield this.db.getInitState());return(null==e?void 0:e.publicKey)&&(null==e?void 0:e.permissionState)?(yield this.setDeviceId(null==e?void 0:e.deviceId),this.initializationState=e):this.initializationState?this.initializationState:(this.initializationStatePromise||(this.initializationStatePromise=new Promise(((e,n)=>A(this,void 0,void 0,(function*(){let i;try{i=yield this.api.getInitializationState(),(this.isHttpSite()||this.isSubdomainWindow())&&this.db.lockInitState(),t||(yield this.setDeviceId(null==i?void 0:i.deviceId))}catch(t){return this.initializationStatePromise=null,n(t instanceof g?new k.A:t)}return yield this.db.setInitState(i),this.initializationState=i,e(i)}))))),this.initializationStatePromise)}))}refreshInitState(){return A(this,void 0,void 0,(function*(){try{const t=yield this.api.getInitializationState();return(this.isHttpSite()||this.isSubdomainWindow())&&this.db.lockInitState(),yield this.db.setInitState(t),this.initializationState=t}catch(t){return i.A.error(`Unable to refresh initState: ${t}`),this.initializationState}}))}retrieveSDKElementsOptions(){return A(this,void 0,void 0,(function*(){var t;try{this.elementsOptions=yield this.api.getSDKElementsOptions(this.appId)}catch(t){this.elementsOptions={}}this.db.setConfigs(null===(t=this.elementsOptions)||void 0===t?void 0:t.config)}))}startService(t){return A(this,void 0,void 0,(function*(){i.A.debug(`Starting ${t.serviceType} service`);const e=new t,n=yield e.initialize(this);return n?this.services[t.serviceType]=e:i.A.debug(`Initializing service ${t.serviceType} failed`),n}))}getService(t){return t.serviceType in this.services?this.services[t.serviceType]:null}isServiceRunning(t){return t.serviceType in this.services}getAppId(){return this.appId}setAppId(t){this.appId=t}getPublicKey(){return this.publicKey}setPublicKey(t){this.publicKey=t}getEnvironment(){return(0,O.u)()}isEnvironment(t){return this.getEnvironment()===t}getUserCredentials(){return{appId:this.appId}}getPusheVersion(){return"1.11.0"}getConfigs(t){return A(this,void 0,void 0,(function*(){return this.db.getConfigs(t)}))}getMisc(t){return A(this,void 0,void 0,(function*(){return this.db.getMisc(t)}))}setEnabledServices(t){t.forEach((t=>{this.services[t]=this.services[t]||null}))}getEnabledServices(){return Object.keys(this.services)}isHttpsWebsite(){var t;return(0,O.u)()===r.default.ServiceWorker||"https:"===(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.protocol)}isLocalhost(){var t,e;return"localhost"===(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.hostname)||"127.0.0.1"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.hostname)}isHttpSite(){return(0,O.u)()!==r.default.ServiceWorker&&(!this.isHttpsWebsite()&&!this.isLocalhost()||!1)}isSubdomainWindow(){var t,e;return(null===(e=null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.hostname)||void 0===e?void 0:e.indexOf(T))>-1||!1}isMobileAgent(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}detectBrowser(){let t=P.P.UNKNOWN;return-1!==navigator.userAgent.indexOf("Opera")||-1!==navigator.userAgent.indexOf("OPR")?t=P.P.OPERA:-1!==navigator.userAgent.indexOf("Chrome")?t=P.P.CHROME:-1!==navigator.userAgent.indexOf("Safari")?t=P.P.SAFARI:-1!==navigator.userAgent.indexOf("Firefox")?t=P.P.FIREFOX:-1===navigator.userAgent.indexOf("MSIE")&&!0!=!!document.documentMode||(t=P.P.IE),t}setServiceWorkerPath(t){t&&(this.serviceWorkerPath=t)}setServiceWorkerScope(t){t&&(this.serviceWorkerScope=t)}getServiceWorkerPath(){return this.serviceWorkerPath||C}getServiceWorkerScope(){return this.serviceWorkerScope||D}get deviceId(){return this._deviceId}set deviceId(t){this._deviceId=t}}const R=$},574:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i=(t,e)=>`\n@font-face {\n    font-family: 'IranSansFont';\n    src: url('${e}/fonts/IRANSans.eot');\n    src: url('${e}/fonts/IRANSans.eot?#iefix') format('embedded-opentype'),\n    url('${e}/fonts/IRANSans.woff2') format('woff2'),\n    url('${e}/fonts/IRANSans.woff') format('woff'),\n    url('${e}/fonts/IRANSans.ttf') format('truetype'),\n    url('${e}/fonts/IRANSans.svg#svgFontName') format('svg');\n}\n\n.${t}-bell-wrapper {\n    width: 60px;\n    height: 60px;\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    cursor: pointer;\n    transform-origin: right bottom;\n    font-size: 16px;\n    display:flex;\n}\n\n.${t}-bell-wrapper.${t}-hide-bell{\n    display:none;\n}\n\n@media (min-width: 768px){\n    .${t}-bell-wrapper.${t}-show-bell-desktop {\n        display: flex;\n    }\n}\n\n@media (min-width: 768px){\n    .${t}-bell-wrapper.${t}-hide-bell-desktop {\n        display: none;\n    }\n}\n\n.${t}-bell-wrapper.${t}-bell-unmute.is-granted {\n    animation: bellWrapperAnimationBackwards .5s .3s forwards;\n    filter: opacity(50%) grayscale(50%);\n}\n\n.${t}-bell-wrapper.${t}-bell-unmute.is-granted:hover,\n.${t}-bell-wrapper.${t}-bell-unmute.is-granted.show-dialog {\n    animation: bellWrapperAnimationForwards .5s forwards;\n    filter: opacity(100%) grayscale(0%);\n}\n\n.${t}-bell-wrapper.${t}-bell-unmute.is-prompt {\n    transfrom: scale(1, 1);\n    filter: opacity(100%) grayscale(0%);\n}\n\n.${t}-bell-right {\n    right: 20px;\n}\n\n.${t}-bell-left {\n    right: unset;\n    left: 20px;\n}\n\n.${t}-bell-background {\n    border-radius: 180px;\n    background-color: #0065ff;\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n\n.${t}-bell-line-top {\n    content: '';\n    width: 3px;\n    height: 14px;\n    background-color: #0065ff;\n    display: block;\n    z-index: 10000;\n    position: absolute;\n    top: 25.24%;\n    left: 31.4%;\n    transform-origin: 0 0;\n    transform: rotateZ(-45deg) scaleY(0);\n\n}\n\n.${t}-bell-line-bottom {\n    content: '';\n    width: 3px;\n    height: 14px;\n    background-color: #ffffff;\n    display: block;\n    z-index: 10000;\n    position: absolute;\n    top: 28%;\n    left: 28%;\n    transform-origin: 0 0;\n    transform: rotateZ(-45deg) scaleY(0);\n    opacity: 0;\n}\n\n.${t}-bell {\n    fill: #ffffff;\n}\n\n.${t}-bell-mute .${t}-bell {\n    animation: bellMuteFill .4s .4s forwards;\n}\n\n.${t}-bell-unmute .${t}-bell {\n    animation: bellUnmuteFill .4s forwards;\n}\n\n.${t}-bell-mute .${t}-bell-line-top {\n    animation: bellLineMute .4s ease-in-out .1s forwards;\n}\n\n.${t}-bell-unmute .${t}-bell-line-top {\n    animation: bellLineUnmute .4s forwards;\n}\n\n.${t}-bell-mute .${t}-bell-line-bottom {\n    animation: bellLineMute .6s ease-in-out .2s forwards;\n}\n\n.${t}-bell-unmute .${t}-bell-line-bottom {\n    animation: bellLineUnmute .6s forwards;\n}\n\n\n@keyframes bellWrapperAnimationForwards {\n    from {\n        transform: scale(.7, .7);\n    }\n    to {\n        transform: scale(1, 1);\n    }\n}\n\n@keyframes bellWrapperAnimationBackwards {\n    from {\n        transform: scale(1, 1);\n    }\n    to {\n        transform: scale(.7, .7);\n    }\n}\n\n@keyframes bellMuteFill {\n    0% {\n        filter: brightness(0) invert(1);\n    }\n    100% {\n        filter: brightness(0) invert(1);\n    }\n}\n\n@keyframes bellUnmuteFill {\n    0% {\n        filter: brightness(0) invert(1);\n    }\n    99% {\n        filter: brightness(0) invert(1);\n    }\n    100% {\n        filter: unset;\n    }\n}\n\n@keyframes bellLineUnmute {\n    0% {\n        opacity: 1;\n        transform: rotateZ(-45deg) scaleY(2.6)\n    }\n    98% {\n        opacity: 1;\n    }\n    100% {\n        opacity: 0;\n        transform: rotateZ(-45deg) scaleY(0)\n    }\n}\n\n@keyframes bellLineMute {\n    from {\n        opacity: 1;\n        transform: rotateZ(-45deg) scaleY(0)\n    }\n    to {\n        opacity: 1;\n        transform: rotateZ(-45deg) scaleY(2.6);\n    }\n}\n\n.${t}-bell-tooltip {\n    position: absolute;\n    display: block;\n    top: 11px;\n    right: 120%;\n    background: #202020;\n    min-width: 100px;\n    height: 38px;\n    border-radius: 1px;\n    visibility: hidden;\n    white-space: nowrap;\n}\n\n.${t}-bell-left .${t}-bell-tooltip {\n    right: unset;\n    left: 120%;\n}\n\n.${t}-bell-inner:hover .${t}-bell-tooltip.show,\n.${t}-bell-tooltip.show {\n    visibility: visible;\n    animation: showTooltip .5s forwards;\n}\n\n.${t}-bell-tooltip::after {\n    content: "";\n    border-width: 10px 10px 0 10px;\n    border-style: solid;\n    border-color: #202020 transparent;\n    height: 0;\n    width: 0;\n    display: block;\n    transform: rotate(-90deg);\n    right: -12px;\n    position: absolute;\n    top: 36%;\n}\n\n.${t}-bell-left .${t}-bell-tooltip::after {\n    transform: rotate(90deg);\n    right: unset;\n    left: -12px;\n}\n\n.${t}-bell-tooltip .${t}-bell-tooltip-text {\n    font-size: .85em;\n    color: #ffffff;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: bold;\n    padding: 0 12px;\n    right: 0;\n    left: 0;\n    white-space: nowrap;\n    position: relative;\n    font-family: IranSansFont;\n}\n\n@keyframes showTooltip {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n.${t}-bell-dialog {\n    display: none;\n    box-shadow: 6px 6px 0px 0px #ccc;\n    min-width: 220px;\n    min-height: 140px;\n    position: absolute;\n    bottom: 120%;\n    background: #fff;\n    border: 2px solid #666;\n    right: 2px;\n    border-radius: 4px;\n}\n.${t}-bell-wrapper.show-dialog .${t}-bell-dialog {\n    display: block;\n}\n.${t}-bell-left .${t}-bell-dialog {\n    right: unset;\n    left: 2px;\n}\n.${t}-bell-dialog-icon {\n    display: flex;\n    width: 50px;\n    height: 50px;\n    background: #ddd;\n    border-radius: 100%;\n    margin: 0 auto;\n    position: absolute;\n    top: -25px;\n    left: 0;\n    right: 0;\n    align-items: start;\n    justify-content: center;\n}\n.${t}-bell-dialog-icon::after {\n    content: '';\n    display: block;\n    width: 4px;\n    height: 0;\n    position: absolute;\n    top: calc(50% - 14px);\n    border-top: 20px solid #202020;\n    border-right: 1px solid transparent;\n    border-left: 1px solid transparent;\n    border-bottom: 0px solid #202020;\n}\n.${t}-bell-dialog-icon::before {\n    content: '';\n    display: block;\n    width: 4px;\n    height: 4px;\n    background: #202020;\n    position: absolute;\n    top: calc(50% - -10px);\n    z-index: 1;\n    transform: rotate(45deg);\n}\n.${t}-bell-dialog-inner {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    font-family: IranSansFont;\n    padding-top: 24px;\n    margin: 0;\n    padding: 20px 10px 18px 10px;\n    box-sizing: border-box;\n}\n.${t}-bell-dialog-img {\n    display: block;\n    min-width: 300px;\n    max-width: 100%;\n    height: auto;\n    margin-top: 15px;\n    border: 1px solid #ddd;\n}\n.${t}-bell-dialog-text {\n    display: flex;\n    text-align: center;\n    direction: inherit;\n    padding: 2px 10%;\n    font-family: inherit;\n    line-height: 1.2em;\n    font-weight: 400;\n    font-size: .87em;\n    margin: 10px 0 4px 0;\n}\n.${t}-bell-dialog-button {\n    display: flex;\n    min-width: 100px;\n    background: #0065ff;\n    color: #fff;\n    border-radius: 4px;\n    padding: 4px 8px;\n    text-align: center;\n    margin: 5px auto;\n    font-weight: bold;\n    justify-content: center;\n    font-size: .78em;\n    direction: inherit;\n    font-family: inherit;\n}\n`},623:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i=(t,e)=>`\n@font-face {\n    font-family: 'IRANYekanWeb';\n    src: url('${e}/d/fonts/IYekanWeb-Medium.eot');\n    src: url('${e}/d/fonts/IYekanWeb-Medium.eot?#iefix') format('embedded-opentype'),\n    url('${e}/d/fonts/IYekanWeb-Medium.woff2') format('woff2'),\n    url('${e}/d/fonts/IYekanWeb-Medium.woff') format('woff'),\n    url('${e}/d/fonts/IYekanWeb-Medium.ttf') format('truetype');\n    font-weight: 500;\n    font-style: normal;\n}\n\n.${t}-fav-device-dialog-wrapper {\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: row;\n    direction: rtl;\n    min-width: 350px;\n    max-width: 400px;\n    z-index: 10000000;\n    background-color: #ffffff;\n    font-family: IRANYekanWeb;\n    margin: 0 auto;\n    font-size: 16px;\n    position: fixed;\n    border: 2px solid #909090;\n    display: flex;\n    border-radius: 4px;\n    box-shadow: 6px 6px 0px 0px #ccc;\n    top: 10px;\n    right: 0;\n    left: 0;\n}\n.${t}-fav-device-dialog-wrapper.${t}-hide-fav-device-dialog{\n    display: none;\n}\n\n.${t}-fav-device-content-wrapper {\n    padding: 10px 15px 15px;\n}\n\n.${t}-fav-device-prompt-text {\n    display: block;\n    margin: 0;\n    box-sizing: border-box;\n}\n\n.${t}-fav-device-input {\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    border: none;\n    border-radius: 3px;\n    padding: 5px 10px;\n    margin: 8px 0;\n    box-shadow: 1px 0px 2px 2px grey;\n    outline: none;\n    font-family: inherit;\n    font-size: .9em;\n}\n\n.${t}-fav-device-input.${t}-fav-device-input-err {\n    box-shadow: 1px 0px 2px 2px red;\n}\n\n.${t}-fav-device-input.${t}-fav-device-input-err::placeholder {\n    color: red;\n}\n\n.${t}-fav-device-button{\n    background-color: #0065ff;\n    color: #ffffff;\n    cursor: pointer;\n    padding: 6px 15px;\n    border-radius: 4px;\n    margin: 12px auto 8px 0;\n    display: block;\n    width: fit-content;\n    width: -moz-fit-content;\n    border: none;\n    text-align: center;\n    outline: none;\n    font-family: inherit;\n    font-size: .9em;\n}\n\n.${t}-btn {\n    display: inline-block;\n    background-color: #e6e6e6;\n    min-width: 10px;\n    padding: 6px 15px;\n    font-size: .87em;\n    margin: 0 5px;\n    cursor: pointer;\n    box-sizing: border-box;\n    white-space: nowrap;\n}\n\na.${t}-accept-btn {\n    box-sizing: border-box;\n    border-radius: 4px;\n    background-color: rgb(0, 254, 182);\n    color: rgb(51, 51, 51);\n    padding: 6px 15px;\n    font-size: 0.87rem;\n}\n\na.${t}-accept-btn:hover {\n    text-decoration: none;\n}\n`},343:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i=t=>`\n\n    .${t}-overlay-full-background {\n        height: 100vh;\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        opacity: .6;\n    }\n\n    .${t}-overlay-content-wrapper {\n        position: absolute;\n        transform: translate(-50%,-50%);\n        top: 35%;\n        left: 50%;\n        font-size: 2rem;\n        font-family: 'IranSansFont', sans-serif;\n        width: 70vw;\n        text-align: center;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        direction:rtl;\n    }\n\n    .${t}-overlay-display-mobile {\n        display: block;\n    }\n\n    .${t}-overlay-hide-mobile {\n        display: none;\n    }\n\n    .${t}-overlay-subscription-message {\n        font-size: .75em;\n        font-family: inherit;\n        margin: 0;\n        margin-left: 10px;\n        order: 0;\n    }\n\n    .${t}-overlay-close-btn {\n        position: absolute;\n        right: 2rem;\n        top: 2rem;\n        font-size: 2rem;\n        cursor: pointer;\n        user-select: none;\n    }\n\n    .${t}-overlay-direct-arrow {\n        user-select: none;\n        display: none;\n        order:1;\n    }\n\n    @media (min-width: 768px){\n        .${t}-overlay-content-wrapper {\n            align-items: baseline !important;\n        }\n\n        .${t}-overlay-direct-arrow {\n            transform: rotateY(180deg) !important;\n            font-size: 100px !important;\n            display: block !important;\n        }\n\n\n        .${t}-overlay-subscription-message {\n            font-size:inherit;\n            width: 60%;\n        }\n\n        .${t}-overlay-close-btn {\n            font-size: 2.5rem;\n        }\n\n        .${t}-overlay-display-desktop {\n            display: block;\n        }\n\n        .${t}-overlay-hide-desktop {\n            display: none;\n        }\n    }\n    `},849:(t,e,n)=>{"use strict";function i(t,e){return`@font-face {\n                font-family: 'IRANYekanWeb';\n                src: url('${e}/d/fonts/IYekanWeb-Medium.eot');\n                src: url('${e}/d/fonts/IYekanWeb-Medium.eot?#iefix') format('embedded-opentype'),\n                url('${e}/d/fonts/IYekanWeb-Medium.woff2') format('woff2'),\n                url('${e}/d/fonts/IYekanWeb-Medium.woff') format('woff'),\n                url('${e}/d/fonts/IYekanWeb-Medium.ttf') format('truetype');\n                font-weight: 500;\n                font-style: normal;\n            }\n\n            .${t}-unblock-prompt-wrapper {\n                box-sizing: content-box !important;\n                min-width: 200px;\n                max-width: 250px;\n                position: fixed;\n                margin: 0 auto;\n                z-index: 1000000;\n                flex-direction: column;\n                border: 2px solid #909090;\n                border-radius: 4px;\n                padding: 10px 15px;\n                direction: rtl;\n                background: #fff;\n                box-shadow: 6px 6px 0px 0px #ccc;\n                font-family: 'IRANYekanWeb';\n                font-size: 12px;\n                animation: fadeIn .5s;\n            }\n\n            .${t}-unblock-prompt-text{\n                font-family: inherit;\n                font-size: .9em;\n                line-height: 1.5em;\n                font-weight: 400;\n                margin: 10px 0;\n            }\n\n            .${t}-unblock-prompt-wrapper img{\n                width: 100%;\n            }\n\n            .${t}-unblock-accordion-button{\n                background-color: #0065ff;\n                color: #ffffff;\n                cursor: pointer;\n                display: flex;\n                justify-content: space-between;\n                padding: 4px 8px;\n                border-radius: 4px;\n                margin: 4px 0;\n                border: none;\n                text-align: center;\n                outline: none;\n                font-family: inherit;\n                font-size: .9em;\n                transition: 0.4s;\n                box-shadow: 2px 2px 2px rgba(0,0,0,.3);\n                -webkit-tap-highlight-color: transparent;\n            }\n\n            \n            .${t}-unblock-active, .${t}-unblock-accordion-button:hover {\n                background-color: #0065ffcc;\n            }\n\n            .${t}-unblock-panel {\n                padding: 0;\n                text-align: right;\n                max-height: 0;\n                overflow: hidden;\n                transition: max-height 0.2s ease-out;\n                box-shadow: 2px 2px 2px rgba(0,0,0,.3);\n            }\n            \n            .${t}-unblock-active ~ .${t}-unblock-panel {\n                border: 2px solid #909090;\n                max-height: 300px !important;\n                overflow: scroll;\n                margin-top: 10px;\n            }\n            \n            .${t}-unblock-active:after {\n                content: "\\27A4" !important;\n                transform: rotate(270deg) !important;\n            }\n\n            .${t}-unblock-accordion-button:after {\n                content: "\\27A4";\n                color: #fff;\n                font-weight: bold;\n                display: flex;\n                justify-content: center;\n                transform: rotate(90deg);\n                transition: transform 0.3s ease-in-out;\n            }\n            \n            .${t}-unblock-prompt-wrapper.${t}-hide-prompt-mobile{\n                display:none;\n            }\n\n            .${t}-unblock-prompt-wrapper.${t}-show-prompt-mobile{\n                display: flex;\n            }\n            \n            @media (min-width: 768px){\n                .${t}-unblock-prompt-wrapper.${t}-show-prompt-desktop {\n                    display: flex;\n                }\n\n                .${t}-unblock-prompt-wrapper.${t}-hide-prompt-desktop {\n                    display: none;\n                }\n\n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-top-right{\n                    top: 10px !important;\n                    right: 10px !important;\n                    left: unset !important;\n                    bottom: unset !important;\n                }\n                \n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-top-left{\n                    top: 10px !important;\n                    left: 10px !important;\n                    right: unset !important;\n                    bottom: unset !important;\n                }\n                \n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-top-center{\n                    top: 10px !important;\n                    right: 0 !important;\n                    left: 0 !important;\n                    bottom: unset !important;\n                }\n                \n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-bottom-right{\n                    bottom: 10px !important;\n                    right: 10px !important;\n                    left: unset !important;\n                    top: unset !important;\n                }\n                \n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-bottom-left{\n                    bottom: 10px !important;\n                    left: 10px !important;\n                    right: unset !important;\n                    top: unset !important;\n                }\n                \n                .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-bottom-center{\n                    bottom: 10px !important;\n                    right: 0 !important;\n                    left: 0 !important;\n                    top: unset !important;\n                }\n                .${t}-unblock-prompt-text {\n                    font-size: 1em;\n                }\n                \n                .${t}-unblock-accordion-button{\n                    font-size: 1.05em;\n                }\n\n                .${t}-unblock-active ~ .${t}-unblock-panel {\n                    overflow: auto;\n                }\n            }\n\n            /* Adjusing Unblock Button Flash direction based on screen sizes */\n            /* ************************************************************* */\n            /* ************************************************************* */\n            .${t}-unblock-prompt-bottom .${t}-unblock-accordion-button:after {\n                transition: transform 0.3s ease-in-out;\n                transform: rotate(-90deg) !important;\n            }\n            \n            .${t}-unblock-prompt-bottom .${t}-unblock-active:after {\n                transform: rotate(90deg) !important;\n            }\n            \n            @media (min-width: 768px){\n                .${t}-unblock-prompt-bottom-center .${t}-unblock-accordion-button:after,\n                .${t}-unblock-prompt-bottom-left .${t}-unblock-accordion-button:after, \n                .${t}-unblock-prompt-bottom-right .${t}-unblock-accordion-button:after \n                {\n                    transition: transform 0.3s ease-in-out;\n                    transform: rotate(-90deg) !important;\n                }\n                \n                .${t}-unblock-prompt-bottom-center .${t}-unblock-active:after,\n                .${t}-unblock-prompt-bottom-left .${t}-unblock-active:after, \n                .${t}-unblock-prompt-bottom-right .${t}-unblock-active:after\n                {\n                    transform: rotate(90deg) !important;\n                }\n                \n                \n                .${t}-unblock-prompt-top-center .${t}-unblock-accordion-button:after,\n                .${t}-unblock-prompt-top-right .${t}-unblock-accordion-button:after,\n                .${t}-unblock-prompt-top-left .${t}-unblock-accordion-button:after\n                {\n                    transition: transform 0.3s ease-in-out;\n                    transform: rotate(90deg) !important;\n                }\n                \n                .${t}-unblock-prompt-top-center .${t}-unblock-active:after,\n                .${t}-unblock-prompt-top-right .${t}-unblock-active:after,\n                .${t}-unblock-prompt-top-left .${t}-unblock-active:after\n                {\n                    transform: rotate(270deg) !important;\n                }\n            }\n            /* ************************************************************* */\n            /* ************************************************************* */\n            \n            .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-top{\n                top: 10px;\n                right: 0;\n                left: 0;\n                bottom: unset;\n            }\n            \n            .${t}-unblock-prompt-wrapper.${t}-unblock-prompt-bottom{\n                bottom: 10px;\n                right: 0;\n                left: 0;\n                top: unset;\n            }\n            \n            .${t}-unblock-prompt-wrapper.${t}-hide-dialog {\n                display: none;\n            }\n\n            .${t}-closeBtn-wrapper {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                width: -moz-fit-content;\n                width: fit-content;\n                border-radius: 50%;\n            }\n\n            .${t}-closeBtn {\n                color: #ffffff;\n                cursor: pointer;\n                font-size: 12px;\n                padding: 2px;\n                background-color: #999;\n                box-sizing: content-box;\n                border-radius: 50%;\n                fill: currentColor;\n                width: 1em;\n                height: 1em;\n                display: inline-block;\n                flex-shrink: 0;\n                user-select: none;\n            }\n\n            @keyframes fadeIn {\n                0% {\n                    opacity: 0;\n                }\n\n                100% {\n                    opacity: 1;\n                }\n            }`}n.r(e),n.d(e,{default:()=>i})},921:(t,e,n)=>{"use strict";var i,o;n.d(e,{P:()=>i,Q:()=>o}),function(t){t[t.CHROME=0]="CHROME",t[t.OPERA=1]="OPERA",t[t.SAFARI=2]="SAFARI",t[t.FIREFOX=3]="FIREFOX",t[t.IE=4]="IE",t[t.UNKNOWN=5]="UNKNOWN"}(i||(i={})),function(t){t[t.Prompt=0]="Prompt",t[t.Overlay=1]="Overlay",t[t.Default=2]="Default"}(o||(o={}))},213:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(600);class o extends i.A{constructor(){super("App Id is invalid")}}},568:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(600);class o extends i.A{}},891:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(600);class o extends i.A{}},600:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});class i extends Error{constructor(t=""){super(t),Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:this.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):Object.defineProperty(this,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0})}}const o=i;class r extends o{}},710:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class o{constructor(t={}){this._events=t}static get Instance(){return this._instance||(this._instance=new o)}static get PublicInstance(){return this._publicInstance||(this._publicInstance=new o)}on(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e),this}once(t,e){const n=this;function i(){n.off(t,i),e.apply(this,arguments)}return i.listener=e,this.on(t,i),this}off(t,e){const n=this._events[t];if(void 0!==e)for(let t=0;t<n.lenght;t++)if(n[t]===e||n[t].listener===e){n.splice(t,1);break}return 0===n.length&&this.removeAllListeners(t),this}removeAllListeners(t){try{t?delete this._events[t]:this._events={}}catch(t){}return this}listeners(t){try{return this._events[t]}catch(t){return}}numberOfListeners(t){const e=this.listeners(t);return e?e.length:0}emit(...t){return i(this,void 0,void 0,(function*(){const e=t.shift();let n=this._events[e];if(void 0!==n){n=n.slice(0);const e=n.length;for(let i=0;i<e;i+=1)yield n[i].apply(this,t)}return this}))}}},334:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(242);const{libraryBaseName:o}=n(119);var r;!function(t){t[t.DEBUG=0]="DEBUG",t[t.HINT=1]="HINT",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));const s={debug:0,hint:1,info:2,warn:3,error:4,silent:5};const a=new class{constructor(){this.enabled=!1,this.levelMap={[r.DEBUG]:console.debug,[r.HINT]:console.info,[r.INFO]:console.info,[r.WARN]:console.warn,[r.ERROR]:console.error},this.levelColors={[r.DEBUG]:"#42dcf4",[r.HINT]:"#55b",[r.INFO]:"#417df4",[r.WARN]:"#f4df41",[r.ERROR]:"#f44141"},this.envPrefixes={[i.default.SDK]:"",[i.default.ServiceWorker]:"SW",[i.default.Unknown]:""},this.environment=i.default.Unknown}setEnvironment(t){this.environment=t}setLevel(t){this.level=s[t]}log(t,e){if(!this.enabled||!this.checkLevel(t))return;const n=this.levelColors[t],i=this.envPrefixes[this.environment];this.levelMap[t](i?`%c${o}-${i}`:`%c${o}`,`background: ${n}; color: white; padding: 2px 10px; font-weight: bold`,e)}debug(t){this.log(r.DEBUG,t)}hint(t){this.checkLevel(r.HINT)&&this.levelMap[r.HINT](`%c${o} Hint %c${t}`,"background: #55b; color: white; padding: 2px 10px; font-weight: bold","background: #88d; color: white; padding: 2px 10px;")}info(t){this.log(r.INFO,t)}warn(t){this.log(r.WARN,t)}error(t){this.log(r.ERROR,t)}disable(){this.enabled=!1}enable(){this.enabled=!0}checkLevel(t){return this.level<=t}};a.setLevel("debug");const l=a},530:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var i=n(334),o=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class r{constructor(t){this.databaseName=t,this.deletePreviousDB()}open(t){return new Promise((e=>{let n;try{n=indexedDB.open(t,4)}catch(t){}if(!n)return null;n.onerror=this.onDatabaseOpenError,n.onblocked=this.onDatabaseOpenBlocked,n.onupgradeneeded=this.onDatabaseUpgradeNeeded,n.onsuccess=()=>{this.database=n.result,this.database.onerror=this.onDatabaseError,this.database.onversionchange=this.onDatabaseVersionChange,e(this.database)}}))}deletePreviousDB(){try{const t="pushe_db",e=indexedDB.open(t);e.onsuccess=function(){e.result.close(),indexedDB.deleteDatabase(t)}}catch(t){i.A.warn(`Could not remove prev database, ${t}`)}}ensureDatabaseOpen(){return o(this,void 0,void 0,(function*(){return this.openLock||(this.openLock=this.open(this.databaseName)),this.openLock}))}onDatabaseOpenError(t){t.preventDefault();const e=t.target.error;i.A.warn(`Fatal error opening IndexedDb database:', ${e}`)}onDatabaseError(t){i.A.debug(`IndexedDb: Generic database error', ${t.target.errorCode}`)}onDatabaseOpenBlocked(){i.A.debug("IndexedDb: Blocked event")}onDatabaseVersionChange(t){i.A.debug("IndexedDb: versionchange event")}onDatabaseUpgradeNeeded(t){i.A.debug("IndexedDb: Database is being rebuilt or upgraded (upgradeneeded event).");const e=t.target.result;try{t.oldVersion<1&&(e.createObjectStore("Tags"),e.createObjectStore("UserIds",{keyPath:"type"})),t.oldVersion<2&&e.createObjectStore("InitState"),t.oldVersion<3&&e.createObjectStore("Configs"),t.oldVersion<4&&e.createObjectStore("Misc")}catch(t){i.A.debug(`Some issue upgrading db, ${t}`)}}get(t,e){return o(this,void 0,void 0,(function*(){const n=yield this.ensureDatabaseOpen();return new Promise(e?(i,o)=>{const r=n.transaction(t).objectStore(t).get(e);r.onsuccess=()=>{i(r.result)},r.onerror=()=>{o(r.error)}}:(e,i)=>{const o={},r=n.transaction(t).objectStore(t).openCursor();r.onsuccess=t=>{const n=t.target.result;if(n){const t=n.key;o[t]=n.value,n.continue()}else e(o)},r.onerror=()=>{i(r.error)}})}))}getAll(t){return o(this,void 0,void 0,(function*(){return new Promise(((e,n)=>o(this,void 0,void 0,(function*(){const i=(yield this.ensureDatabaseOpen()).transaction(t).objectStore(t).openCursor(),o=[];i.onsuccess=t=>{const n=t.target.result;n?(o.push(n.value),n.continue()):e(o)},i.onerror=()=>{n(i.error)}}))))}))}getAllAsObject(t){return o(this,void 0,void 0,(function*(){return new Promise(((e,n)=>o(this,void 0,void 0,(function*(){const i=(yield this.ensureDatabaseOpen()).transaction(t).objectStore(t).openCursor(),o={};i.onsuccess=t=>{const n=t.target.result;n?(o[n.key]=n.value,n.continue()):e(o)},i.onerror=()=>{n(i.error)}}))))}))}put(t,e,n){return o(this,void 0,void 0,(function*(){return yield this.ensureDatabaseOpen(),new Promise(((o,r)=>{var s;try{const a=null===(s=this.database)||void 0===s?void 0:s.transaction([t],"readwrite").objectStore(t),l=n?a.put(e,n):a.put(e);l.onsuccess=()=>{o(e)},l.onerror=t=>{i.A.error(`Database PUT Transaction Error:, ${t}`),r(t)}}catch(t){i.A.error(`Database PUT Error:, ${t}`),r(t)}}))}))}remove(t,e){return o(this,void 0,void 0,(function*(){const n=yield this.ensureDatabaseOpen();return new Promise(((o,r)=>{try{const s=n.transaction([t],"readwrite").objectStore(t),a=e?s.delete(e):s.clear();a.onsuccess=()=>{o(e)},a.onerror=t=>{i.A.error(`Database REMOVE Transaction Error:, ${t}`),r(t)}}catch(t){i.A.error(`Database REMOVE Error:, ${t}`),r(t)}}))}))}}var s=n(709),a=n(988),l=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};var c;!function(t){t.TAGS="Tags",t.USER_IDS="UserIds",t.INIT_STATE="InitState",t.CONFIGS="Configs",t.MISC="Misc"}(c||(c={}));class d{constructor(t){this.databaseName=t,this.isInitStateLocked=!1,this._database=new r(this.databaseName)}static get Instance(){return this._databaseInstance||(this._databaseInstance=new d("PUSHE_WEB_SDK_DB"))}lockInitState(){this.isInitStateLocked=!0}get(t,e){return l(this,void 0,void 0,(function*(){return this._database.get(t,e)}))}getAll(t){return l(this,void 0,void 0,(function*(){return this._database.getAll(t)}))}getAllAsObject(t){return l(this,void 0,void 0,(function*(){return this._database.getAllAsObject(t)}))}put(t,e){return l(this,void 0,void 0,(function*(){yield this._database.put(t,e)}))}putWithKey(t,e,n){return l(this,void 0,void 0,(function*(){yield this._database.put(t,e,n)}))}remove(t,e){return l(this,void 0,void 0,(function*(){yield this._database.remove(t,e)}))}addTag(t,e){return l(this,void 0,void 0,(function*(){yield this.putWithKey(c.TAGS,e,t)}))}removeTag(t){return l(this,void 0,void 0,(function*(){yield this.remove(c.TAGS,t)}))}getAllTags(){return l(this,void 0,void 0,(function*(){return this._database.getAllAsObject(c.TAGS)}))}setUserEmail(t){return l(this,void 0,void 0,(function*(){""===t||null===t?yield this.remove(c.USER_IDS,s.t.EMAIL):yield this.put(c.USER_IDS,{type:s.t.EMAIL,value:t})}))}getUserEmail(){return l(this,void 0,void 0,(function*(){var t;const e=yield this.get(c.USER_IDS,s.t.EMAIL);return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:""}))}setUserPhoneNumber(t){return l(this,void 0,void 0,(function*(){""===t||null===t?yield this.remove(c.USER_IDS,s.t.PHONE_NUMBER):yield this.put(c.USER_IDS,{type:s.t.PHONE_NUMBER,value:t})}))}getUserPhoneNumber(){return l(this,void 0,void 0,(function*(){var t;const e=yield this.get(c.USER_IDS,s.t.PHONE_NUMBER);return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:""}))}setCustomId(t){return l(this,void 0,void 0,(function*(){""===t||null===t?yield this.remove(c.USER_IDS,s.t.CUSTOM_ID):yield this.put(c.USER_IDS,{type:s.t.CUSTOM_ID,value:t})}))}getCustomId(){return l(this,void 0,void 0,(function*(){var t;const e=yield this.get(c.USER_IDS,s.t.CUSTOM_ID);return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:""}))}getAllUserIds(){return l(this,void 0,void 0,(function*(){const t=yield this.getAll(c.USER_IDS),e={};return t.forEach((t=>{e[t.type]=t.value})),e}))}setInitState(t){return l(this,void 0,void 0,(function*(){var e;if(this.isInitStateLocked)return;if(!(0,a.G)(t))return;const n=Object.keys(t),i=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;for(let e=0;e<i;e++)yield this.putWithKey(c.INIT_STATE,t[n[e]],n[e])}))}getInitState(t){return l(this,void 0,void 0,(function*(){return t?this.get(c.INIT_STATE,t):this.getAllAsObject(c.INIT_STATE)}))}setDeviceId(t){return l(this,void 0,void 0,(function*(){if(t&&"undefined"!==t)return this.put(c.USER_IDS,{type:s.t.DEVICE_ID,value:t})}))}getDeviceId(){return l(this,void 0,void 0,(function*(){var t;return null===(t=yield this.get(c.USER_IDS,s.t.DEVICE_ID))||void 0===t?void 0:t.value}))}setConfigs(t){return l(this,void 0,void 0,(function*(){var e;if(!(0,a.G)(t))return;const n=Object.keys(t),i=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;for(let e=0;e<i;e++)yield this.putWithKey(c.CONFIGS,t[n[e]],n[e])}))}getConfigs(t){return l(this,void 0,void 0,(function*(){return t?this.get(c.CONFIGS,t):this.getAllAsObject(c.CONFIGS)}))}setCoords(t){return l(this,void 0,void 0,(function*(){try{yield this.putWithKey(c.MISC,t,"coordinates")}catch(t){i.A.error(`Unable to write geolocation data to IndexedDB: ${t.message}`)}}))}setMisc(t){return l(this,void 0,void 0,(function*(){var e;if(!(0,a.G)(t))return;const n=Object.keys(t),i=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;for(let e=0;e<i;e++)yield this.putWithKey(c.MISC,t[n[e]],n[e])}))}getMisc(t){return l(this,void 0,void 0,(function*(){return t?this.get(c.MISC,t):this.getAllAsObject(c.MISC)}))}}},342:(t,e,n)=>{"use strict";n.d(e,{A:()=>b,S:()=>v});var i=n(568),o=n(891),r=n(600);class s extends r.A{}var a=n(334),l=n(242),c=n(283),d=n(311),u=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},p=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{libBaseName:h}=n(119),f=[];function v(t){return(e,n,i)=>{f.push([t,i.value])}}class b{constructor(){this.registration=new d.A,this.clients=new d.A,this.baseName=h}initialize(t,e){return p(this,void 0,void 0,(function*(){switch(this.context=t,t.getEnvironment()){case l.default.SDK:if(!this.isSupported())throw new o.A("Service worker is not supported by the browser");this.clients.rejectIfUsed(new i.A("ServiceWorker.clients is only available in ServiceWorker environment")),this.registration.resolve(yield this.registerServiceWorker(t.getAppId()));break;case l.default.ServiceWorker:if(!e)throw new s("The serviceWorker object must be provided for initializing the ServiceWorkerManagerin the ServiceWorker environemnt");this.serviceWorker=e,this.registration.resolve(e.registration),this.clients.resolve(e.clients),this.loadEventHandlers()}}))}unregisterRedundantPusheServiceWorker(){return p(this,void 0,void 0,(function*(){var t,e;try{const n=null!==(e=yield null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.getRegistrations())&&void 0!==e?e:[],i=this.context.getServiceWorkerPath();let o=this.context.getServiceWorkerScope();o.startsWith("/")||(o="/".concat(o)),n.forEach((t=>{var e,n,r;(null===(n=null===(e=null==t?void 0:t.active)||void 0===e?void 0:e.scriptURL)||void 0===n?void 0:n.indexOf(i))>-1&&(null===(r=null===location||void 0===location?void 0:location.origin)||void 0===r?void 0:r.concat(o))!==(null==t?void 0:t.scope)&&(null==t||t.unregister(),a.A.debug("Unregistered redundant Pushe serviceWorker residing in root scope."))}))}catch(t){a.A.error(`Unable to unregister redundant Pushe serviceWorker, ${t}`)}}))}registerServiceWorker(t){return p(this,void 0,void 0,(function*(){try{let e=`${this.context.getServiceWorkerPath()}`;e+=`?appId=${encodeURIComponent(t)}`,e+=`&${h}Version=${this.context.getPusheVersion()}`,e+=`&services=${this.context.getEnabledServices().join(",")}`,e+=`&vapidKey=${this.context.getPublicKey()}`,e+=`&deviceId=${this.context.deviceId}`;const n=this.context.getServiceWorkerScope(),i=n?yield navigator.serviceWorker.register(e,{scope:n}):yield navigator.serviceWorker.register(e);return a.A.debug("Service worker registered"),n&&(yield this.unregisterRedundantPusheServiceWorker()),i}catch(t){throw a.A.error("Registering service worker failed"),a.A.hint('Have you placed "service worker file" in your root directory?'),new s("ServiceWorker registration failed")}}))}static onInstall(t,e){return p(this,void 0,void 0,(function*(){a.A.info("Service worker installed")}))}static onActivate(t,e){return p(this,void 0,void 0,(function*(){a.A.info("Service worker activated")}))}registerEventHandler(t,e){this.serviceWorker.addEventListener(t,(t=>t.waitUntil(e(this.context,t))))}loadEventHandlers(){a.A.debug(`Loading ${f.length} service worker event handlers`);for(const t of f)this.registerEventHandler(t[0],t[1])}isSupported(){return"serviceWorker"in navigator}}u([(0,c.O)(l.default.SDK)],b.prototype,"unregisterRedundantPusheServiceWorker",null),u([(0,c.O)(l.default.SDK)],b.prototype,"registerServiceWorker",null),u([(0,c.O)(l.default.ServiceWorker)],b.prototype,"registerEventHandler",null),u([(0,c.O)(l.default.ServiceWorker)],b.prototype,"loadEventHandlers",null),u([v("install")],b,"onInstall",null),u([v("activate")],b,"onActivate",null)},560:(t,e,n)=>{"use strict";n.d(e,{p:()=>a,A:()=>d});var i=n(242),o=n(334),r=n(710),s=n(130);var a,l=n(89),c=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};!function(t){t.PUSH_RECEIVED="notification_received",t.PUSH_CLICKED="notification_clicked",t.PUSH_CLOSED="notification_closed",t.SESSION_END="session_end"}(a||(a={}));class d{constructor(t){this.context=t}broadcast(t,e){return c(this,void 0,void 0,(function*(){try{const n=yield(yield this.context.serviceWorker.clients).matchAll({type:"window",includeUncontrolled:!0});for(const i of n)i.postMessage({type:t,message:e})}catch(t){o.A.error(`Could not broadcast message from service worker to client, ${t}`)}}))}sendMessageToSW(t,e){return c(this,void 0,void 0,(function*(){var n,i;try{null===(i=null===(n=yield this.context.serviceWorker.registration)||void 0===n?void 0:n.active)||void 0===i||i.postMessage({type:t,message:e})}catch(t){o.A.error(`Could not send message from sdk to serviceWorker, ${t}`)}}))}attachEventHandlers(){this.context.isEnvironment(i.default.SDK)&&(this.context.isHttpsWebsite()||this.context.isLocalhost())&&navigator.serviceWorker.addEventListener("message",(t=>{var e,n,i,l,c;const d=null!==(e=null==t?void 0:t.data)&&void 0!==e?e:{},u=function(t){var e,n,i,o,r,s,a,l;const c={title:null==t?void 0:t.title,content:null==t?void 0:t.content,app_id:null==t?void 0:t.app_id,device_id:null==t?void 0:t.deviceId,notification_id:null==t?void 0:t.notificationId,url:null==t?void 0:t.url,icon:null==t?void 0:t.icon,image:null==t?void 0:t.image,buttons:null===(o=null!==(i=null!==(e=null==t?void 0:t.notifV1Actions)&&void 0!==e?e:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.buttons)&&void 0!==i?i:[])||void 0===o?void 0:o.map((t=>{var e,n,i;return{title:null!==(e=null==t?void 0:t.title)&&void 0!==e?e:null==t?void 0:t.content,url:null!==(n=null==t?void 0:t.url)&&void 0!==n?n:null===(i=null==t?void 0:t.action)||void 0===i?void 0:i.url,icon:null==t?void 0:t.icon}})),clicked_button:null!==(r=null==t?void 0:t.clickedButton)&&void 0!==r?r:{},clicked_action:null==t?void 0:t.actionClicked,custom_content:null!==(l=null!==(s=null==t?void 0:t.custom_content)&&void 0!==s?s:null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.custom_content)&&void 0!==l?l:{}};return Object.assign({},c)}(null!==(n=null==d?void 0:d.message)&&void 0!==n?n:{});o.A.debug(`Message received from service worker to window with type of ${null==d?void 0:d.type}`),(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.type)===a.PUSH_RECEIVED?r.A.PublicInstance.emit(s.L2.NOTIFICATION_RECEIVED,u):(null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.type)===a.PUSH_CLICKED?r.A.PublicInstance.emit(s.L2.NOTIFICATION_CLICKED,u):(null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.type)===a.PUSH_CLOSED&&r.A.PublicInstance.emit(s.L2.NOTIFICATION_CLOSED,u)})),this.attachMediaadCustomIdHandlers()}attachMediaadCustomIdHandlers(){if(this.context.isEnvironment(i.default.SDK)){const t=this.context;window.addEventListener("message",(function(e){return c(this,arguments,void 0,(function*({data:e,origin:n}){var i;if("string"==typeof e&&0===(null==e?void 0:e.indexOf("mediaad-fid:"))){if("https://mediacdn.mediaad.org"!==n)return void o.A.error("Couldn't process Mediaad id because of origin change.");const r=null===(i=null==e?void 0:e.split(":"))||void 0===i?void 0:i[1];o.A.debug(`Received broadcast message form mediaad with id: (${r})`);if((yield l.A.Instance.getCustomId())===r)return void o.A.info(`Already send custom id (${r}) to the server`);l.A.Instance.setCustomId(t,r).then((()=>{o.A.info(`Successfully sent custom id (${r}) to the server`)})).catch((t=>{o.A.error(`Error sending custom id (${r}) to the server, ${t}`)}))}}))}))}}}},89:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(530),o=n(709),r=n(334),s=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class a{constructor(t="UserIdManager"){this.name=t,this.userIdsModel=new o.o}static get Instance(){return this._instance=new a,this._instance}getCustomId(){return s(this,void 0,void 0,(function*(){return i.A.Instance.getCustomId()}))}getUserEmail(){return s(this,void 0,void 0,(function*(){return i.A.Instance.getUserEmail()}))}getUserPhoneNumber(){return s(this,void 0,void 0,(function*(){return i.A.Instance.getUserPhoneNumber()}))}setCustomId(t,e){return s(this,void 0,void 0,(function*(){return yield this.hydrateUserId({customId:e}),(yield this.persistInServer(t))?(yield i.A.Instance.setCustomId(e),Promise.resolve(!0)):Promise.reject("Could not set custom id due to server error")}))}setUserEmail(t,e){return s(this,void 0,void 0,(function*(){return yield this.hydrateUserId({email:e}),(yield this.persistInServer(t))?(yield i.A.Instance.setUserEmail(e),Promise.resolve(!0)):Promise.reject("Could not set user email  due to server error")}))}setUserPhoneNumber(t,e){return s(this,void 0,void 0,(function*(){return yield this.hydrateUserId({phoneNumber:e}),(yield this.persistInServer(t))?(yield i.A.Instance.setUserPhoneNumber(e),Promise.resolve(!0)):Promise.reject("Could not set user email  due to server error")}))}hydrateUserId(t){return s(this,void 0,void 0,(function*(){const e=yield i.A.Instance.getAllUserIds(),n=e=>!(Object.keys(t).includes(e)&&this.isKeyFalsy(t[e]));n("email")&&this.userIdsModel.setEmail(t.email||e.email),n("phoneNumber")&&this.userIdsModel.setPhoneNumber(t.phoneNumber||e.phoneNumber),n("customId")&&this.userIdsModel.setCustomId(t.customId||e.customId)}))}isKeyFalsy(t){return""===t||null===t}persistInServer(t){return s(this,void 0,void 0,(function*(){try{return yield t.api.sendMessageUpstream(this.userIdsModel.getFormattedResult("t62")),!0}catch(t){return r.A.error(`Could not send user id to server, error: ${t}`),!1}}))}}},242:(t,e,n)=>{"use strict";var i;n.r(e),n.d(e,{Environment:()=>i,default:()=>o}),function(t){t.SDK="SDK",t.ServiceWorker="ServiceWorker",t.Unknown="Unknown"}(i||(i={}));const o=i},130:(t,e,n)=>{"use strict";var i,o,r;n.d(e,{L2:()=>r,MY:()=>i,lo:()=>o}),function(t){t.PROMPT_OPEN="promptopen",t.PROMPT_CLOSE="promptclose",t.PROMPT_ACCEPT="promptaccept",t.PROMPT_REJECT="promptreject"}(i||(i={})),function(t){t.SUBSCRIPTION_CHANGE="subscriptionchange"}(o||(o={})),function(t){t.NOTIFICATION_RECEIVED="notificationreceived",t.NOTIFICATION_CLICKED="notificationclicked",t.NOTIFICATION_CLOSED="notificationclosed"}(r||(r={}))},709:(t,e,n)=>{"use strict";n.d(e,{o:()=>s,t:()=>i});var i,o=n(514),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};!function(t){t.EMAIL="email",t.PHONE_NUMBER="phoneNumber",t.CUSTOM_ID="customId",t.DEVICE_ID="device_id"}(i||(i={}));let s=class{setCustomId(t){return this.customId=t,this}setEmail(t){return this.email=t,this}setPhoneNumber(t){return this.phoneNumber=t,this}getFormattedResult(t){return{}}};r([(0,o.P)("cid")],s.prototype,"customId",void 0),r([(0,o.P)()],s.prototype,"email",void 0),r([(0,o.P)("pn")],s.prototype,"phoneNumber",void 0),s=r([o.s],s)},199:(t,e,n)=>{"use strict";n.d(e,{A:()=>Js});var i=n(891),o=n(600);class r extends o.A{}var s=n(334),a=n(242);class l extends o.A{constructor(t,e){super(`Vapid Key ${t} is invalid`),this.vapidKey=t,this.validBase64=e}}class c extends r{}var d,u=n(342);!function(t){t.Click="C",t.Dimsiss="F"}(d||(d={}));const p=d;var h=n(283),f=n(266),v=n(106);const b=new v.Y3({params:(0,v.ZZ)("params"),url:(0,v.ZZ)("url"),type:(0,v.ZZ)("action_type")}),g=new v.Y3({id:(0,v.ZZ)("btn_id"),action:(0,v.MJ)("btn_action",b),content:(0,v.ZZ)("btn_content"),icon:(0,v.ZZ)("btn_icon"),order:(0,v.ZZ)("btn_order")}),m=new v.Y3({notifAction:(0,v.MJ)("action",b),title:(0,v.ZZ)("title"),content:(0,v.ZZ)("content"),icon:(0,v.ZZ)("icon"),image:(0,v.ZZ)("image"),tag:(0,v.ZZ)("tag"),renotify:(0,v.ZZ)("renotify"),requireInteraction:(0,v.ZZ)("close_on_click"),buttons:(0,v.e7)("buttons",g),dir:(0,v.ZZ)("dir"),lang:(0,v.ZZ)("language"),badge:(0,v.ZZ)("badge")}),y=new v.Y3({notificationId:(0,v.ZZ)("notification_id"),appId:(0,v.ZZ)("app_id"),deviceId:(0,v.ZZ)("device_id"),data:(0,v.MJ)("data",m)}),w=new v.Y3({icon:(0,v.ZZ)("icon"),title:(0,v.ZZ)("title"),url:(0,v.ZZ)("action")}),S=new v.Y3({notificationId:(0,v.ZZ)("notification_id"),deviceId:(0,v.ZZ)("device_id"),notifAction:(0,v.MJ)("action",b),notifV1Actions:(0,v.e7)("actions",w),title:(0,v.ZZ)("title"),content:(0,v.ZZ)("content"),icon:(0,v.ZZ)("icon"),image:(0,v.ZZ)("image"),tag:(0,v.ZZ)("tag"),renotify:(0,v.ZZ)("renotify"),requireInteraction:(0,v.ZZ)("close_on_click"),buttons:(0,v.e7)("buttons",g),url:(0,v.ZZ)("url")});var x,I=n(130),O=n(710),k=n(560),P=n(530);function E(t){var e;try{if(!t)return"";const n=null!==(e=null==t?void 0:t.split("#"))&&void 0!==e?e:[];return 0===n.length?"":n[n.length-1]}catch(t){return s.A.error(`Could not parse wrapper_id: ${t}`),""}}!function(t){t.GRANTED="granted",t.DENIED="denied",t.PROMPT="prompt"}(x||(x={}));const _=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296==(64512&o)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const o=t[e],r=e+1<t.length,s=r?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,c=o>>2,d=(3&o)<<4|s>>4;let u=(15&s)<<2|l>>6,p=63&l;a||(p=64,r||(u=64)),i.push(n[c],n[d],n[u],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const r=t[n++];e[i++]=String.fromCharCode((31&o)<<6|63&r)}else if(o>239&&o<365){const r=((7&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],s=t[n++];e[i++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const o=n[t.charAt(e++)],r=e<t.length?n[t.charAt(e)]:0;++e;const s=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==o||null==r||null==s||null==a)throw new C;const l=o<<2|r>>4;if(i.push(l),64!==s){const t=r<<4&240|s>>2;if(i.push(t),64!==a){const t=s<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T=function(t){return function(t){const e=_(t);return A.encodeByteArray(e,!0)}(t).replace(/\./g,"")},D=function(t){try{return A.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const $=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,R=()=>{try{return $()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&D(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},M=()=>{var t;return null===(t=R())||void 0===t?void 0:t.config};class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function j(){try{return"object"==typeof indexedDB}catch(t){return!1}}function L(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var t;e((null===(t=o.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class B extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,B.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,o=this.errors[t],r=o?function(t,e){return t.replace(U,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(o,n):"Error",s=`${this.serviceName}: ${r} (${i}).`;return new B(i,s,n)}}const U=/\{\$([^}]+)}/g;function F(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const n=t[o],r=e[o];if(H(n)&&H(r)){if(!F(n,r))return!1}else if(n!==r)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function H(t){return null!==t&&"object"==typeof t}function z(t){return t&&t._delegate?t._delegate:t}class K{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Z="[DEFAULT]";class V{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new N;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=Z){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=Z){return this.instances.has(t)}getOptions(t=Z){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),o=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;o.add(t),this.onInitCallbacks.set(i,o);const r=this.instances.get(i);return r&&t(r,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Z?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=Z){return this.component?this.component.multipleInstances?t:Z:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new V(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const Y=[];var J;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(J||(J={}));const q={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Q=J.INFO,X={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},tt=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),o=X[e];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[o](`[${i}]  ${t.name}:`,...n)};let et,nt;const it=new WeakMap,ot=new WeakMap,rt=new WeakMap,st=new WeakMap,at=new WeakMap;let lt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ot.get(t);if("objectStoreNames"===e)return t.objectStoreNames||rt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ut(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ct(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nt||(nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(pt(this),e),ut(it.get(this))}:function(...e){return ut(t.apply(pt(this),e))}:function(e,...n){const i=t.call(pt(this),e,...n);return rt.set(i,e.sort?e.sort():[e]),ut(i)}}function dt(t){return"function"==typeof t?ct(t):(t instanceof IDBTransaction&&function(t){if(ot.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",r),t.removeEventListener("abort",r)},o=()=>{e(),i()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",r),t.addEventListener("abort",r)}));ot.set(t,e)}(t),e=t,(et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,lt):t);var e}function ut(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",r)},o=()=>{e(ut(t.result)),i()},r=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&it.set(e,t)})).catch((()=>{})),at.set(e,t),e}(t);if(st.has(t))return st.get(t);const e=dt(t);return e!==t&&(st.set(t,e),at.set(e,t)),e}const pt=t=>at.get(t);function ht(t,e,{blocked:n,upgrade:i,blocking:o,terminated:r}={}){const s=indexedDB.open(t,e),a=ut(s);return i&&s.addEventListener("upgradeneeded",(t=>{i(ut(s.result),t.oldVersion,t.newVersion,ut(s.transaction),t)})),n&&s.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{r&&t.addEventListener("close",(()=>r())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}function ft(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(t=>e(t.oldVersion,t))),ut(n).then((()=>{}))}const vt=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],gt=new Map;function mt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(gt.get(e))return gt.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=bt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!vt.includes(n))return;const r=async function(t,...e){const r=this.transaction(t,o?"readwrite":"readonly");let s=r.store;return i&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),o&&r.done]))[0]};return gt.set(e,r),r}lt=(t=>({...t,get:(e,n,i)=>mt(e,n)||t.get(e,n,i),has:(e,n)=>!!mt(e,n)||t.has(e,n)}))(lt);class yt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const wt="@firebase/app",St="0.10.16",xt=new class{constructor(t){this.name=t,this._logLevel=Q,this._logHandler=tt,this._userLogHandler=null,Y.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in J))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?q[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...t),this._logHandler(this,J.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...t),this._logHandler(this,J.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,J.INFO,...t),this._logHandler(this,J.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,J.WARN,...t),this._logHandler(this,J.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...t),this._logHandler(this,J.ERROR,...t)}}("@firebase/app"),It="@firebase/app-compat",Ot="@firebase/analytics-compat",kt="@firebase/analytics",Pt="@firebase/app-check-compat",Et="@firebase/app-check",_t="@firebase/auth",At="@firebase/auth-compat",Ct="@firebase/database",Tt="@firebase/data-connect",Dt="@firebase/database-compat",$t="@firebase/functions",Rt="@firebase/functions-compat",Mt="@firebase/installations",Nt="@firebase/installations-compat",jt="@firebase/messaging",Lt="@firebase/messaging-compat",Bt="@firebase/performance",Wt="@firebase/performance-compat",Ut="@firebase/remote-config",Ft="@firebase/remote-config-compat",Ht="@firebase/storage",zt="@firebase/storage-compat",Kt="@firebase/firestore",Zt="@firebase/vertexai",Vt="@firebase/firestore-compat",Gt="firebase",Yt="[DEFAULT]",Jt={[wt]:"fire-core",[It]:"fire-core-compat",[kt]:"fire-analytics",[Ot]:"fire-analytics-compat",[Et]:"fire-app-check",[Pt]:"fire-app-check-compat",[_t]:"fire-auth",[At]:"fire-auth-compat",[Ct]:"fire-rtdb",[Tt]:"fire-data-connect",[Dt]:"fire-rtdb-compat",[$t]:"fire-fn",[Rt]:"fire-fn-compat",[Mt]:"fire-iid",[Nt]:"fire-iid-compat",[jt]:"fire-fcm",[Lt]:"fire-fcm-compat",[Bt]:"fire-perf",[Wt]:"fire-perf-compat",[Ut]:"fire-rc",[Ft]:"fire-rc-compat",[Ht]:"fire-gcs",[zt]:"fire-gcs-compat",[Kt]:"fire-fst",[Vt]:"fire-fst-compat",[Zt]:"fire-vertex","fire-js":"fire-js",[Gt]:"fire-js-all"},qt=new Map,Qt=new Map,Xt=new Map;function te(t,e){try{t.container.addComponent(e)}catch(n){xt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ee(t){const e=t.name;if(Xt.has(e))return xt.debug(`There were multiple attempts to register component ${e}.`),!1;Xt.set(e,t);for(const e of qt.values())te(e,t);for(const e of Qt.values())te(e,t);return!0}function ne(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ie=new W("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class oe{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new K("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ie.create("app-deleted",{appName:this._name})}}function re(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const i=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},e),o=i.name;if("string"!=typeof o||!o)throw ie.create("bad-app-name",{appName:String(o)});if(n||(n=M()),!n)throw ie.create("no-options");const r=qt.get(o);if(r){if(F(n,r.options)&&F(i,r.config))return r;throw ie.create("duplicate-app",{appName:o})}const s=new G(o);for(const t of Xt.values())s.addComponent(t);const a=new oe(n,i,s);return qt.set(o,a),a}function se(t,e,n){var i;let o=null!==(i=Jt[t])&&void 0!==i?i:t;n&&(o+=`-${n}`);const r=o.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const t=[`Unable to register library "${o}" with version "${e}":`];return r&&t.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&s&&t.push("and"),s&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void xt.warn(t.join(" "))}ee(new K(`${o}-version`,(()=>({library:o,version:e})),"VERSION"))}const ae="firebase-heartbeat-store";let le=null;function ce(){return le||(le=ht("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(ae)}catch(t){console.warn(t)}}}).catch((t=>{throw ie.create("idb-open",{originalErrorMessage:t.message})}))),le}async function de(t,e){try{const n=(await ce()).transaction(ae,"readwrite"),i=n.objectStore(ae);await i.put(e,ue(t)),await n.done}catch(t){if(t instanceof B)xt.warn(t.message);else{const e=ie.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});xt.warn(e.message)}}}function ue(t){return`${t.name}!${t.options.appId}`}class pe{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new fe(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=he();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(t){xt.warn(t)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=he(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const o of t){const t=n.find((t=>t.agent===o.agent));if(t){if(t.dates.push(o.date),ve(n)>e){t.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ve(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),o=T(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return xt.warn(t),""}}}function he(){return(new Date).toISOString().substring(0,10)}class fe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!j()&&L().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await ce()).transaction(ae),n=await e.objectStore(ae).get(ue(t));return await e.done,n}catch(t){if(t instanceof B)xt.warn(t.message);else{const e=ie.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});xt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return de(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return de(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ve(t){return T(JSON.stringify({version:2,heartbeats:t})).length}var be;be="",ee(new K("platform-logger",(t=>new yt(t)),"PRIVATE")),ee(new K("heartbeat",(t=>new pe(t)),"PRIVATE")),se(wt,St,be),se(wt,St,"esm2017"),se("fire-js","");se("firebase","11.0.2","app");const ge="@firebase/installations",me="0.6.11",ye=1e4,we=`w:${me}`,Se="FIS_v2",xe=36e5,Ie=new W("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(t){return t instanceof B&&t.code.includes("request-failed")}function ke({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Pe(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Ee(t,e){const n=(await e.json()).error;return Ie.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _e({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ae(t,{refreshToken:e}){const n=_e(t);return n.append("Authorization",function(t){return`${Se} ${t}`}(e)),n}async function Ce(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Te(t){return new Promise((e=>{setTimeout(e,t)}))}const De=/^[cdef][\w-]{21}$/;function $e(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return De.test(e)?e:""}catch(t){return""}}function Re(t){return`${t.appName}!${t.appId}`}const Me=new Map;function Ne(t,e){const n=Re(t);je(n,e),function(t,e){const n=Be();n&&n.postMessage({key:t,fid:e});We()}(n,e)}function je(t,e){const n=Me.get(t);if(n)for(const t of n)t(e)}let Le=null;function Be(){return!Le&&"BroadcastChannel"in self&&(Le=new BroadcastChannel("[Firebase] FID Change"),Le.onmessage=t=>{je(t.data.key,t.data.fid)}),Le}function We(){0===Me.size&&Le&&(Le.close(),Le=null)}const Ue="firebase-installations-store";let Fe=null;function He(){return Fe||(Fe=ht("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Ue)}})),Fe}async function ze(t,e){const n=Re(t),i=(await He()).transaction(Ue,"readwrite"),o=i.objectStore(Ue),r=await o.get(n);return await o.put(e,n),await i.done,r&&r.fid===e.fid||Ne(t,e.fid),e}async function Ke(t){const e=Re(t),n=(await He()).transaction(Ue,"readwrite");await n.objectStore(Ue).delete(e),await n.done}async function Ze(t,e){const n=Re(t),i=(await He()).transaction(Ue,"readwrite"),o=i.objectStore(Ue),r=await o.get(n),s=e(r);return void 0===s?await o.delete(n):await o.put(s,n),await i.done,!s||r&&r.fid===s.fid||Ne(t,s.fid),s}async function Ve(t){let e;const n=await Ze(t.appConfig,(n=>{const i=function(t){const e=t||{fid:$e(),registrationStatus:0};return Je(e)}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(Ie.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=ke(t),o=_e(t),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const s={fid:n,authVersion:Se,appId:t.appId,sdkVersion:we},a={method:"POST",headers:o,body:JSON.stringify(s)},l=await Ce((()=>fetch(i,a)));if(l.ok){const t=await l.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Pe(t.authToken)}}throw await Ee("Create Installation",l)}(t,e);return ze(t.appConfig,n)}catch(n){throw Oe(n)&&409===n.customData.serverCode?await Ke(t.appConfig):await ze(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ge(t)}:{installationEntry:e}}(t,i);return e=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Ge(t){let e=await Ye(t.appConfig);for(;1===e.registrationStatus;)await Te(100),e=await Ye(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Ve(t);return n||e}return e}function Ye(t){return Ze(t,(t=>{if(!t)throw Ie.create("installation-not-found");return Je(t)}))}function Je(t){return 1===(e=t).registrationStatus&&e.registrationTime+ye<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function qe({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${ke(t)}/${e}/authTokens:generate`}(t,n),o=Ae(t,n),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const s={installation:{sdkVersion:we,appId:t.appId}},a={method:"POST",headers:o,body:JSON.stringify(s)},l=await Ce((()=>fetch(i,a)));if(l.ok){return Pe(await l.json())}throw await Ee("Generate Auth Token",l)}async function Qe(t,e=!1){let n;const i=await Ze(t.appConfig,(i=>{if(!tn(i))throw Ie.create("not-registered");const o=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+xe}(t)}(o))return i;if(1===o.requestStatus)return n=async function(t,e){let n=await Xe(t.appConfig);for(;1===n.authToken.requestStatus;)await Te(100),n=await Xe(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Qe(t,e):i}(t,e),i;{if(!navigator.onLine)throw Ie.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await qe(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await ze(t.appConfig,i),n}catch(n){if(!Oe(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ze(t.appConfig,n)}else await Ke(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function Xe(t){return Ze(t,(t=>{if(!tn(t))throw Ie.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+ye<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function tn(t){return void 0!==t&&2===t.registrationStatus}async function en(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await Ve(t);e&&await e}(n);return(await Qe(n,e)).token}function nn(t){return Ie.create("missing-app-config-values",{valueName:t})}const on="installations",rn=t=>{const e=ne(t.getProvider("app").getImmediate(),on).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Ve(e);return i?i.catch(console.error):Qe(e).catch(console.error),n.fid}(e),getToken:t=>en(e,t)}};ee(new K(on,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw nn("App Configuration");if(!t.name)throw nn("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw nn(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:ne(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ee(new K("installations-internal",rn,"PRIVATE")),se(ge,me),se(ge,me,"esm2017");const sn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",an="google.c.a.c_id";var ln,cn;function dn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function un(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(ln||(ln={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(cn||(cn={}));const pn="fcm_token_details_db",hn="fcm_token_object_Store";const fn="firebase-messaging-store";let vn=null;function bn(){return vn||(vn=ht("firebase-messaging-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(fn)}})),vn}async function gn(t){const e=yn(t),n=await bn(),i=await n.transaction(fn).objectStore(fn).get(e);if(i)return i;{const e=await async function(t){if("databases"in indexedDB){const t=(await indexedDB.databases()).map((t=>t.name));if(!t.includes(pn))return null}let e=null;const n=await ht(pn,5,{upgrade:async(n,i,o,r)=>{var s;if(i<2)return;if(!n.objectStoreNames.contains(hn))return;const a=r.objectStore(hn),l=await a.index("fcmSenderId").get(t);if(await a.clear(),l)if(2===i){const t=l;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(s=t.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:dn(t.vapidKey)}}}else if(3===i){const t=l;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:dn(t.auth),p256dh:dn(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:dn(t.vapidKey)}}}else if(4===i){const t=l;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:dn(t.auth),p256dh:dn(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:dn(t.vapidKey)}}}}});return n.close(),await ft(pn),await ft("fcm_vapid_details_db"),await ft("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}(t.appConfig.senderId);if(e)return await mn(t,e),e}}async function mn(t,e){const n=yn(t),i=(await bn()).transaction(fn,"readwrite");return await i.objectStore(fn).put(e,n),await i.done,e}function yn({appConfig:t}){return t.appId}const wn=new W("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Sn(t,e){const n={method:"DELETE",headers:await In(t)};try{const i=await fetch(`${xn(t.appConfig)}/${e}`,n),o=await i.json();if(o.error){const t=o.error.message;throw wn.create("token-unsubscribe-failed",{errorInfo:t})}}catch(t){throw wn.create("token-unsubscribe-failed",{errorInfo:null==t?void 0:t.toString()})}}function xn({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function In({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function On({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:e,p256dh:t}};return i!==sn&&(o.web.applicationPubKey=i),o}async function kn(t){const e=await async function(t,e){const n=await t.pushManager.getSubscription();if(n)return n;return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:un(e)})}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:dn(e.getKey("auth")),p256dh:dn(e.getKey("p256dh"))},i=await gn(t.firebaseDependencies);if(i){if(function(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,o=e.auth===t.auth,r=e.p256dh===t.p256dh;return n&&i&&o&&r}(i.subscriptionOptions,n))return Date.now()>=i.createTime+6048e5?async function(t,e){try{const n=await async function(t,e){const n=await In(t),i=On(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(i)};let r;try{const n=await fetch(`${xn(t.appConfig)}/${e.token}`,o);r=await n.json()}catch(t){throw wn.create("token-update-failed",{errorInfo:null==t?void 0:t.toString()})}if(r.error){const t=r.error.message;throw wn.create("token-update-failed",{errorInfo:t})}if(!r.token)throw wn.create("token-update-no-token");return r.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await mn(t.firebaseDependencies,i),n}catch(t){throw t}}(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await Sn(t.firebaseDependencies,i.token)}catch(t){console.warn(t)}return Pn(t.firebaseDependencies,n)}return Pn(t.firebaseDependencies,n)}async function Pn(t,e){const n=await async function(t,e){const n=await In(t),i=On(e),o={method:"POST",headers:n,body:JSON.stringify(i)};let r;try{const e=await fetch(xn(t.appConfig),o);r=await e.json()}catch(t){throw wn.create("token-subscribe-failed",{errorInfo:null==t?void 0:t.toString()})}if(r.error){const t=r.error.message;throw wn.create("token-subscribe-failed",{errorInfo:t})}if(!r.token)throw wn.create("token-subscribe-no-token");return r.token}(t,e),i={token:n,createTime:Date.now(),subscriptionOptions:e};return await mn(t,i),i.token}function En(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const o=e.notification.image;o&&(t.notification.image=o);const r=e.notification.icon;r&&(t.notification.icon=r)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){var n,i,o,r,s;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const a=null!==(o=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==o?o:null===(r=e.notification)||void 0===r?void 0:r.click_action;a&&(t.fcmOptions.link=a);const l=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}(e,t),e}function _n(t){return wn.create("missing-app-config-values",{valueName:t})}!function(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class An{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(t){if(!t||!t.options)throw _n("App Configuration Object");if(!t.name)throw _n("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const t of e)if(!n[t])throw _n(t);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Cn(t){try{t.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),t.swRegistration.update().catch((()=>{}))}catch(t){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null==t?void 0:t.message})}}async function Tn(t,e){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw wn.create("permission-blocked");return await async function(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=sn)}(t,null==e?void 0:e.vapidKey),await async function(t,e){if(e||t.swRegistration||await Cn(t),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");t.swRegistration=e}}(t,null==e?void 0:e.serviceWorkerRegistration),kn(t)}async function Dn(t,e,n){const i=function(t){switch(t){case cn.NOTIFICATION_CLICKED:return"notification_open";case cn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[an],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function $n(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===cn.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(En(n)):t.onMessageHandler.next(En(n)));const i=n.data;var o;"object"==typeof(o=i)&&o&&an in o&&"1"===i["google.c.a.e"]&&await Dn(t,n.messageType,i)}const Rn="@firebase/messaging",Mn="0.12.14",Nn=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>Tn(e,t)}};async function jn(){try{await L()}catch(t){return!1}return"undefined"!=typeof window&&j()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Ln(t=function(t=Yt){const e=qt.get(t);if(!e&&t===Yt&&M())return re();if(!e)throw ie.create("no-app",{appName:t});return e}()){return jn().then((t=>{if(!t)throw wn.create("unsupported-browser")}),(t=>{throw wn.create("indexed-db-unsupported")})),ne(z(t),"messaging").getImmediate()}ee(new K("messaging",(t=>{const e=new An(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(t=>$n(e,t))),e}),"PUBLIC")),ee(new K("messaging-internal",Nn,"PRIVATE")),se(Rn,Mn),se(Rn,Mn,"esm2017");var Bn=n(119),Wn=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Un=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Fn{static get serviceType(){return"push"}initialize(t){return Un(this,void 0,void 0,(function*(){if(this.context=t,t.isEnvironment(a.default.SDK)){if(!("PushManager"in window))return s.A.warn("Push manager not supported on browser, will not initialize service"),!1;if(this.context.isHttpSite())return!0;try{return(yield this.isSubscriptionUpdated())&&(s.A.debug("Server subscription status inconsistent, sending update to server"),yield this.subscriptionUpdated()),!0}catch(t){if(!(t instanceof l))throw t;return s.A.error(`Application public key is invalid: ${t.vapidKey}`),!1}}else if(t.isEnvironment(a.default.ServiceWorker))return!0}))}isSubscriptionUpdated(){return Un(this,void 0,void 0,(function*(){const t=yield this.context.getInitializationState(),e=yield this.getPermissionState(),n=yield this.getSubscription();return e!==t.permissionState||null==n&&null!=t.subscription||null!=n&&null==t.subscription||null!=n&&(n.endpoint!==t.subscription.endpoint||n.keys.p256dh!==t.subscription.keys.p256dh||n.keys.auth!==t.subscription.keys.auth)}))}subscribe(){return Un(this,void 0,void 0,(function*(){let t=!0;const e=yield this.context.serviceWorker.registration,n=this.getSubscriptionOptions(),i={apiKey:"AIzaSyBfW9gmgLk1trtNzPO1q7YMgH2OSXYx9Ns",authDomain:"sanjagh-ccf74.firebaseapp.com",databaseURL:"https://sanjagh-ccf74.firebaseio.com",projectId:"sanjagh-ccf74",storageBucket:"sanjagh-ccf74.appspot.com",messagingSenderId:"292081803462",appId:"1:292081803462:web:23adab1f6139ef9d"};if(!(yield this.getSubscription())||!(yield this.context.getInitializationState()).isSubscribed){try{const t=yield e.pushManager.permissionState(n);if(s.A.debug("Check Push permission state ..."),"denied"===t)throw s.A.error("Push permission is denied, cannot subscribe!"),new c("Push permission has been denied");yield e.pushManager.subscribe(n);const o=Ln(re(i));this.new_token=yield async function(t,e){return Tn(t=z(t),e)}(o,{serviceWorkerRegistration:e,vapidKey:"BGfwkhWjTn0MgZ0qgfaAwNlisnD48u9F1Q1otfSRt4c4u3NM6zvnrIT1wMlFKtfzGVAdghSHFtTQBoCrO9L_gZg"}),yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:t,isSubscribed:!!(yield this.getSubscription()),completed:!1})}catch(e){if(t=!1,e instanceof DOMException&&"InvalidAccessError"===e.name)s.A.error(`Application public key is invalid: ${this.context.getPublicKey()}`);else if(e instanceof DOMException&&("InvalidCharacterError"===e.name||"NotSupportedError"===e.name))s.A.error(`Application public key is invalid: ${this.context.getPublicKey()}`);else if(e instanceof DOMException&&"InvalidStateError"===e.name)s.A.error("A subscription with a different pushe key already exists; to change the key, unsubscribe then resubscribe.");else if(e instanceof DOMException&&"AbortError"===e.name)s.A.error("Push subscription failed: "+e.message);else{if(!(e instanceof DOMException&&"NotAllowedError"===e.name))throw e;s.A.warn("Push service permission was not allowed by user, push service will not initialize")}}finally{yield this.subscriptionUpdated(),yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:yield this.getPermissionState(),isSubscribed:!!(yield this.getSubscription()),completed:!0})}return t}s.A.debug(`${Bn.libraryBaseName} already subscribed, skipping subscription`)}))}static subscribeOnHttp(t){return Un(this,void 0,void 0,(function*(){const e=(yield t.getInitializationState()).pusheSubdomain;if(!e)return s.A.error("Could not subscribe to push notifications, no pushe subdomain is configured"),s.A.hint("Subscribing to push notifications only works on HTTPS websites. If you're website does not support HTTPS, you will need to configure a pushe subdomain to be used in the pushe console."),!1;const n=`${e}.${Bn.httpBaseDomain}`;let i=`https://${n}?did=${t.deviceId}`;s.A.debug(`Opening pushe subdomain ${n}`);const o=window.open(i,"_blank","toolbar=no,left=0,top=0,width=700,height=700,scrollbars=no,menubar=no");return new Promise((e=>{let n=1e3,i=10;const r=()=>Un(this,void 0,void 0,(function*(){const s=yield t.api.isSubscribed();return yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:x.GRANTED,isSubscribed:s,completed:!1}),!o||(null==o?void 0:o.closed)?e(s):s?(yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:x.GRANTED,isSubscribed:s,completed:!0}),o.close(),e(!0)):i?(i-=1,setTimeout(r,n),void(n+=1e3)):e(!1)}));setTimeout(r,3e3)}))}))}static unsubscribeHttp(t){return Un(this,void 0,void 0,(function*(){const e=!1;yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:x.GRANTED,isSubscribed:e,completed:!1}),s.A.debug("Unsubscribing on http site ..."),yield t.api.updatePushSubscription({subscription:null,permissionState:x.GRANTED,isSubscribed:e}),yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:x.GRANTED,isSubscribed:e,completed:!0}),s.A.debug("Unsubscribed from pushe.")}))}unsubscribe(){return Un(this,void 0,void 0,(function*(){const t=yield this.context.serviceWorker.registration,e=yield t.pushManager.getSubscription();if(!e)return s.A.warn("Asked to unsubscribe a push subscription that does not exist"),!1;yield e.unsubscribe();const n=yield this.getPermissionState(),i=!!(yield this.getSubscription());return yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:n,isSubscribed:i,completed:!1}),yield this.subscriptionUpdated(),yield O.A.PublicInstance.emit(I.lo.SUBSCRIPTION_CHANGE,{state:n,isSubscribed:i,completed:!0}),s.A.debug("unsubscribed from pushe..."),!0}))}getSubscription(){return Un(this,void 0,void 0,(function*(){const t=yield this.context.serviceWorker.registration;try{const e=yield t.pushManager.getSubscription();return e?e.toJSON():null}catch(t){throw t instanceof DOMException&&"AbortError"===t.name?new r(t.message):t}}))}getPermissionState(){return Un(this,void 0,void 0,(function*(){const t=this.getSubscriptionOptions(),e=yield this.context.serviceWorker.registration;return yield e.pushManager.permissionState(t)}))}getSubscriptionOptions(){const t=this.context.getPublicKey();try{const e=(0,f.we)(t);return{applicationServerKey:e,userVisibleOnly:!0}}catch(e){throw console.log(e),new l(t,!1)}}ensureNewSubscriptionOnChangeEvent(){return Un(this,void 0,void 0,(function*(){try{const t=this.getSubscriptionOptions();yield(yield this.context.serviceWorker.registration).pushManager.subscribe(t)}catch(t){s.A.error(`Error in resubscribing pushManager when pushsubscriptionchange is called, error: ${t}`)}}))}subscriptionUpdated(){return Un(this,void 0,void 0,(function*(){this.subscriptionChangeDetected=!0;const t=yield this.getSubscription(),e=yield this.getPermissionState(),n={subscription:t,permissionState:e,isSubscribed:!!t,new_subscription:this.new_token};yield this.context.api.updatePushSubscription(n),yield P.A.Instance.setInitState(n),s.A.debug(`Subscription updated in indexedDB and server, permission state: '${e}', subscribed: ${!!t}`)}))}isSubscribed(){return Un(this,void 0,void 0,(function*(){return!!(yield this.getSubscription())}))}static onPushEvent(t,e){return Un(this,void 0,void 0,(function*(){var n;let i,o,r;s.A.debug("Push notification received"),s.A.debug(e.data.json());const a=e.data.json().version;a&&"1"===a.toString()?(i=S.fromJson(e.data.text()),o=i,r=o.notifV1Actions):(i=y.fromJson(e.data.text()),o=i.data,r=o.buttons),t.api.pushDelivered({notificationId:i.notificationId,deviceId:i.deviceId,wrapperId:E(null===(n=null==i?void 0:i.data)||void 0===n?void 0:n.message_id)}).catch((t=>s.A.error(`Could not send delivery message, ${t}`)));const l=(r||[]).map(((t,e)=>({action:e.toString(),title:t.content||t.title,icon:t.icon}))),c={body:o.content,icon:o.icon,image:o.image,renotify:!!i.tag&&o.renotify,tag:o.tag?o.tag:void 0,requireInteraction:o.requireInteraction||!1,dir:o.dir||"auto",lang:o.language,badge:o.badge,actions:l,data:i},d=o.title||"";yield(yield t.serviceWorker.registration).showNotification(d,c),yield t.workerMessenger.broadcast(k.p.PUSH_RECEIVED,o)}))}static onNotificationClick(t,e){return Un(this,void 0,void 0,(function*(){var n,i,o,r,a,l;s.A.info("Push Notification Clicked"),s.A.debug(e.notification);const c=e.action,d=e.notification;let u,h,f,v;const b=d.data&&d.data.version;let g;b&&"1"===b.toString()?(u=d.data,h=u,v=u.notifV1Actions,f=u.url):(u=d.data,h=u.data,v=h.buttons,f=h.notifAction.url),t.api.notificationInteracted(Object.assign(Object.assign({action:p.Click,actionData:c,wrapperId:E(null===(i=null===(n=null==d?void 0:d.data)||void 0===n?void 0:n.data)||void 0===i?void 0:i.message_id)},u),t.getUserCredentials())).catch((t=>s.A.error(`Could not send clicked message, ${t}`))),c?(g=(v||[]).find(((t,e)=>{if(c.toString()===e.toString())return t})),g&&("1"===b.toString()&&g.url?(yield t.serviceWorker.clients).openWindow(g.url).catch((t=>s.A.error(t))):(null==g?void 0:g.action)&&(null===(o=null==g?void 0:g.action)||void 0===o?void 0:o.type)&&"U"===(null===(r=null==g?void 0:g.action)||void 0===r?void 0:r.type)&&(null===(a=null==g?void 0:g.action)||void 0===a?void 0:a.url)&&(yield t.serviceWorker.clients).openWindow(null===(l=null==g?void 0:g.action)||void 0===l?void 0:l.url).catch((t=>s.A.error(t))))):f&&(yield t.serviceWorker.clients).openWindow(f).catch((t=>s.A.error(t))),yield t.workerMessenger.broadcast(k.p.PUSH_CLICKED,Object.assign(Object.assign({},h),{clickedButton:g,actionClicked:!g})),e.notification.close()}))}static onNotificationClose(t,e){return Un(this,void 0,void 0,(function*(){var n,i,o;s.A.info("Push Notification closed"),e.notification.close(),t.api.notificationInteracted(Object.assign({action:p.Dimsiss,actionData:e.action,wrapperId:E(null===(o=null===(i=null===(n=null==e?void 0:e.notification)||void 0===n?void 0:n.data)||void 0===i?void 0:i.data)||void 0===o?void 0:o.message_id)},e.notification.data)).catch((t=>s.A.error(`Could not send closed message, ${t}`))),yield t.workerMessenger.broadcast(k.p.PUSH_CLOSED,e.notification.data)}))}static onPushSubscriptionChanged(t,e){return Un(this,void 0,void 0,(function*(){if(s.A.info("Push Subscription changed"),s.A.info(e),t.isServiceRunning(Fn))return yield t.getService(Fn).ensureNewSubscriptionOnChangeEvent(),t.getService(Fn).subscriptionUpdated()}))}static onMessageFromClient(t,e){return Un(this,void 0,void 0,(function*(){var n,i;if(s.A.info("Service worker received message from client"),(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)===k.p.SESSION_END){const n=null===(i=e.data)||void 0===i?void 0:i.message;yield t.api.sendMessageUpstream(n)}}))}get subscriptionChangeDetected(){return Fn.detectedSubscriptionChange}set subscriptionChangeDetected(t){Fn.detectedSubscriptionChange=t}}Fn.detectedSubscriptionChange=!1;const Hn=Fn;Wn([(0,h.O)(a.default.SDK,a.default.ServiceWorker)],Fn.prototype,"initialize",null),Wn([(0,h.O)(a.default.SDK)],Fn.prototype,"subscribe",null),Wn([(0,h.O)(a.default.SDK)],Fn.prototype,"unsubscribe",null),Wn([(0,h.O)(a.default.SDK)],Fn,"subscribeOnHttp",null),Wn([(0,h.O)(a.default.ServiceWorker),(0,u.S)("push")],Fn,"onPushEvent",null),Wn([(0,h.O)(a.default.ServiceWorker),(0,u.S)("notificationclick")],Fn,"onNotificationClick",null),Wn([(0,h.O)(a.default.ServiceWorker),(0,u.S)("notificationclose")],Fn,"onNotificationClose",null),Wn([(0,h.O)(a.default.ServiceWorker),(0,u.S)("pushsubscriptionchange")],Fn,"onPushSubscriptionChanged",null),Wn([(0,h.O)(a.default.ServiceWorker),(0,u.S)("message")],Fn,"onMessageFromClient",null);var zn=n(213);function Kn(t,e,n){const i=n.value;return n.value=function(){if(this._initialized||this._init)return i.apply(this,arguments);{const t=`${this.name||"class"} is not initialized yet, so cannot call method ${e}`;throw new Error(t)}},n}var Zn=n(514),Vn=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Gn=class{setName(t){return this.name=t,this}setSessionId(t){return this.sessionId=t,this}getSessionId(){return this.sessionId}setStartTime(t){return this.startTime=t,this}setProtocol(t){return this.protocol=t,this}setHostname(t){return this.hostname=t,this}setPathname(t){return this.pathname=t,this}setReferer(t){return this.referer=t,this}setDuration(t){return this.duration=t,this}setSessionType(t){return this.sessionType=t,this}setPusheVersion(t){return this.pusheVersion=t,this}getFormattedResult(t){return{}}};Vn([(0,Zn.P)()],Gn.prototype,"name",void 0),Vn([(0,Zn.P)("session_id")],Gn.prototype,"sessionId",void 0),Vn([(0,Zn.P)("start_time")],Gn.prototype,"startTime",void 0),Vn([(0,Zn.P)()],Gn.prototype,"protocol",void 0),Vn([(0,Zn.P)()],Gn.prototype,"hostname",void 0),Vn([(0,Zn.P)()],Gn.prototype,"pathname",void 0),Vn([(0,Zn.P)()],Gn.prototype,"referer",void 0),Vn([(0,Zn.P)()],Gn.prototype,"duration",void 0),Vn([(0,Zn.P)("session_type")],Gn.prototype,"sessionType",void 0),Vn([(0,Zn.P)("pushe_version")],Gn.prototype,"pusheVersion",void 0),Gn=Vn([Zn.s],Gn);const Yn=Gn;class Jn{constructor(t=document){this._element=t,this.detectVisibilityEventType()}attachHandlers(t,e){addEventListener(this._eventType,(()=>{document[this._hiddenPropName]?t():e()}))}detectVisibilityEventType(){let t,e;void 0!==document.hidden&&(t="hidden",e="visibilitychange"),void 0!==document.mozHidden&&(t="mozHidden",e="mozvisibilitychange"),void 0!==document.msHidden&&(t="msHidden",e="msvisibilitychange"),void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this._eventType=e,this._hiddenPropName=t}}class qn{constructor(t=document.title||"N/A"){this._currentPageName=t,this._timers={},this._isActive=!1}static get Instance(){return this._instance||(this._instance=new qn)}startTimer(t=this._currentPageName){var e;this._timers[t]=this._timers[t]||[];const n=this._timers[t].length-1;null!==(null===(e=this._timers[t][n])||void 0===e?void 0:e.stop)&&(this._timers[t].push({start:new Date,stop:null}),this._isActive=!0)}stopTimer(t=this._currentPageName){var e;this._timers[t]=this._timers[t]||[];const n=this._timers[t].length-1;(null===(e=this._timers[t][n])||void 0===e?void 0:e.start)&&(this._timers[t][n].stop=new Date),this._isActive=!1}getTotalElapsedTime(t=this._currentPageName){const e=this._timers[t]||[];let n=0;for(const t of e){const e=t.start,i=t.stop||new Date;n+=Math.floor((i-e)/1e3)}return n}getLastSessionElapsedTime(t=this._currentPageName){var e;this._timers[t]=this._timers[t]||[];const n=this._timers[t].length-1,i=this._timers[t][n],o=null!==(e=null==i?void 0:i.stop)&&void 0!==e?e:new Date,r=i.start;return Math.floor((o-r)/1e3)}stopAllTimers(){const t=Object.keys(this._timers);for(const e of t)this.stopTimer(e)}}var Qn,Xn,ti=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},ei=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};!function(t){t.FIRST_SESSION="first",t.SESSION_END="end",t.LEFT_TAB="left_tab",t.RETURN_TAB="return_tab"}(Qn||(Qn={}));class ni{constructor(t="SessionManager"){this.name=t,this._initialized=!1,this.sessionId=((t=16)=>{let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<t;i++)e+=n.charAt(Math.floor(62*Math.random()));return e})(10),(new Jn).attachHandlers(this.userLeftThePage.bind(this),this.userReturnToThePage.bind(this))}static get Instance(){return this._instance||(this._instance=new ni)}init(t){return s.A.debug("Session manager initialized successfully"),this.context=t,this._initialized=!0,this}start(){return ei(this,void 0,void 0,(function*(){yield this.attachSessionEnd(),qn.Instance.startTimer(),yield this.sendSessionToServer(Qn.FIRST_SESSION,0)}))}createSession(t,e=null){const n=document.location,i=(new Yn).setName(document.title).setSessionId(this.sessionId).setStartTime((new Date).getTime()).setHostname(n.hostname).setProtocol(n.protocol).setPathname(n.pathname).setReferer(void 0===document.referer?"":document.referer).setSessionType(t).setDuration(e).setPusheVersion("1.11.0");return s.A.debug(`Create session with id ${i.getSessionId()}`),i.getFormattedResult("t100")}userLeftThePage(){return ei(this,void 0,void 0,(function*(){qn.Instance.stopTimer()}))}userReturnToThePage(){return ei(this,void 0,void 0,(function*(){qn.Instance.startTimer()}))}attachSessionEnd(){return ei(this,void 0,void 0,(function*(){addEventListener("beforeunload",(()=>{const t=this.createSession(Qn.SESSION_END,qn.Instance.getTotalElapsedTime());this.context.isHttpSite()?this.context.api.sendSessionEndToServerOnHttp(t):this.context.workerMessenger.sendMessageToSW(k.p.SESSION_END,t)}))}))}sendSessionToServer(t){return ei(this,arguments,void 0,(function*(t,e=0){const n=this.createSession(t,e);try{return yield this.context.api.sendMessageUpstream(n),!0}catch(t){return s.A.error(`Could not send session to server, error: ${t}`),!1}}))}}function ii(){try{const t=navigator.userAgent;let e=Xn.UNKNOWN;return window.chrome&&(window.chrome.webstore||window.chrome.runtime||window.chrome.loadTimes)?e=Xn.CHROME:"undefined"!=typeof InstallTrigger?e=Xn.FIREFOX:window.opr&&opr.addons||window.opera||t.indexOf(" OPR/")>=0?e=Xn.OPERA:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString()?e=Xn.SAFARI:document.documentMode?e=Xn.IE:!document.documentMode&&window.StyleMedia?e=Xn.EDGE:window.chrome&&(window.chrome.webstore||window.chrome.runtime)&&-1!=t.indexOf("Edg")?e=Xn.EDGE_CHROMIUM:t.indexOf("Opera Mini")>-1||(null===window||void 0===window?void 0:window.operamini)?e=Xn.OPERA_MINI:t.indexOf("SamsungBrowser")>-1?e=Xn.SAMSUNG_BROWSER:t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android ")>-1&&t.indexOf("AppleWebKit")>-1&&t.indexOf("Version")>-1?Xn.NATIVE_ANDROID:t.indexOf("Chromium")>-1&&(e=Xn.CHROMIUM),e}catch(t){return s.A.debug("Could not detect browser",t),null}}function oi(){const t={timezone:null,offset:null};try{"Intl"in window&&(t.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone),t.offset=(new Date).toString().split("GMT")[1].split(" (")[0]}catch(t){s.A.debug("Could not detect timezone",t)}return t}ti([Kn],ni.prototype,"start",null),ti([Kn],ni.prototype,"createSession",null),ti([Kn],ni.prototype,"sendSessionToServer",null),function(t){t.CHROME="Chrome",t.FIREFOX="FireFox",t.OPERA="Opera",t.SAFARI="Safari",t.IE="Internet Explorer",t.EDGE="Microsoft Edge",t.EDGE_CHROMIUM="Edge Chromium",t.OPERA_MINI="Opera Mini",t.CHROMIUM="Chromium",t.NATIVE_ANDROID="Native Android",t.SAMSUNG_BROWSER="Samsung Internet",t.UNKNOWN="unknown"}(Xn||(Xn={}));var ri=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let si=class{setBrowserName(t){return this.browserName=t,this}setBrowserVersion(t){return this.browserVersion=t,this}setOsFamily(t){return this.osFamily=t,this}setUserAgent(t){return this.userAgent=t,this}setLanguage(t){return this.language=t,this}setOffset(t){return this.offset=t,this}setTimezone(t){return this.timezone=t,this}setCookieEnabled(t){return this.cookieEnabled=t,this}setPushApiIsSupported(t){return this.pushApiSupported=t,this}setScreenResolution(t){return this.screenResolution=t,this}setDeviceType(t){return this.deviceType="Android"===this.osFamily||"iOS"===this.osFamily?"Mobile":t,this}setLanguages(t){return this.languages=t,this}setBuildType(t){return this.buildType=t,this}setPusheVersion(t){return this.pusheVersion=t,this}getFormattedResult(t){return{}}};ri([(0,Zn.P)("browser_name")],si.prototype,"browserName",void 0),ri([(0,Zn.P)("browser_version")],si.prototype,"browserVersion",void 0),ri([(0,Zn.P)("os_family")],si.prototype,"osFamily",void 0),ri([(0,Zn.P)("user_agent")],si.prototype,"userAgent",void 0),ri([(0,Zn.P)()],si.prototype,"language",void 0),ri([(0,Zn.P)()],si.prototype,"languages",void 0),ri([(0,Zn.P)()],si.prototype,"offset",void 0),ri([(0,Zn.P)()],si.prototype,"timezone",void 0),ri([(0,Zn.P)("cookie_enabled")],si.prototype,"cookieEnabled",void 0),ri([(0,Zn.P)("push_api_supported")],si.prototype,"pushApiSupported",void 0),ri([(0,Zn.P)("screen_resolution")],si.prototype,"screenResolution",void 0),ri([(0,Zn.P)("device_type")],si.prototype,"deviceType",void 0),ri([(0,Zn.P)("build_type")],si.prototype,"buildType",void 0),ri([(0,Zn.P)("pushe_version")],si.prototype,"pusheVersion",void 0),si=ri([Zn.s],si);const ai=si;var li=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},ci=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const di="pushe_last_constants_collect";class ui{constructor(t="ConstantManager"){this.name=t,this._initialized=!1}static get Instance(){return this._instance||(this._instance=new ui)}init(t){return s.A.debug("Constant manager initialized successfully"),this._initialized=!0,this.context=t,this}start(){return ci(this,void 0,void 0,(function*(){if(this.shouldRetryCollect(6048e5)){const t=this.createConstant();(yield this.persistOnServer(t))&&this.persistLastCollectInLocalStorage()}}))}createConstant(){var t,e,n;return(new ai).setUserAgent(navigator.userAgent).setOsFamily(function(){try{const t=window.navigator.userAgent,e=window.navigator.platform,n=["Win32","Win64","Windows","WinCE"],i=["iPhone","iPad","iPod"];let o=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?o="Mac OS":-1!==i.indexOf(e)?o="iOS":-1!==n.indexOf(e)?o="Windows":/Android/.test(t)?o="Android":!o&&/Linux/.test(e)&&(o="Linux"),o}catch(t){return s.A.debug("Could not detect OS",t),null}}()).setLanguage(function(){try{let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}catch(t){return s.A.debug("Could not detect language"),null}}()).setLanguages(navigator.languages).setBrowserName(ii()).setBrowserVersion(function(){try{let t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),null!=t)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n[1])}catch(t){return s.A.debug("Could not detect browser version",t),null}}()).setOffset(null!==(t=oi().offset)&&void 0!==t?t:null).setTimezone(null!==(n=null===(e=oi())||void 0===e?void 0:e.timezone)&&void 0!==n?n:null).setCookieEnabled(navigator.cookieEnabled).setPushApiIsSupported("PushManager"in window).setScreenResolution(screen.width+" x "+screen.height).setDeviceType(!0===/Mobi/.test(navigator.userAgent)?"Mobile":"Desktop").setBuildType("sw").setPusheVersion("1.11.0").getFormattedResult("t3")}persistLastCollectInLocalStorage(){localStorage.setItem(di,Date.now().toString())}shouldRetryCollect(t){const e=localStorage.getItem(di);if(!e)return!0;const n=Date.now();return Boolean(n-Number(e)>t)}persistOnServer(t){return ci(this,void 0,void 0,(function*(){try{return yield this.context.api.sendMessageUpstream(t),!0}catch(t){return s.A.error(`Could not send constants data, ${t}`),!1}}))}}li([Kn],ui.prototype,"start",null),li([Kn],ui.prototype,"createConstant",null),li([Kn],ui.prototype,"persistLastCollectInLocalStorage",null),li([Kn],ui.prototype,"shouldRetryCollect",null),li([Kn],ui.prototype,"persistOnServer",null);var pi=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},hi=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class fi{static get serviceType(){return"analytics"}initialize(t){return hi(this,void 0,void 0,(function*(){return this.context=t,t.isEnvironment(a.Environment.SDK)&&(ni.Instance.init(t).start(),ui.Instance.init(t).start()),!0}))}}pi([(0,h.O)(a.Environment.SDK,a.Environment.ServiceWorker)],fi.prototype,"initialize",null);var vi=n(311);class bi{constructor(t){return this.elem="string"==typeof t?"svg"===t||"path"===t?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t):t,this}attr(t,e){let n=null;return"class"===t&&(n=this.elem.getAttribute("class"),(null==n?void 0:n.indexOf(e))>-1)||(n&&(e=`${n} ${e}`),this.elem.setAttribute(t,e)),this}append(t){return this.elem.appendChild(t),this}childOf(t){return t.elem.appendChild(this.elem),this}event(t,e){return this.elem.addEventListener(t,e),this}text(t){return this.elem.innerHTML=t,this}style(t){try{if("string"==typeof t)this.attr("style",t);else if("object"==typeof t)for(const e in t)e&&(this.elem.style[e]=t[e]);return this}catch(t){s.A.error(`Cannot set user custom styles: ${t}`)}}changeClass(t,e){const n=this.elem.getAttribute("class")||"";if(-1===n.indexOf(t))return this;const i=n.split(t).concat([e]).reduce(((t,e)=>{if(e){t+=`${e.trim()} `}return t}),"");return setTimeout((()=>{this.elem.setAttribute("class",i.trim())})),this}child(t){if(!t)return this;const e=this.elem.querySelector(`.${t}`);return e?new bi(e):this}addEventListener(t,e){this.elem.addEventListener(t,e)}removeEventListener(t,e){this.elem.removeEventListener(t,e)}}var gi,mi,yi,wi,Si,xi,Ii,Oi,ki,Pi,Ei,_i,Ai,Ci,Ti,Di,$i,Ri,Mi,Ni,ji,Li,Bi,Wi,Ui,Fi,Hi,zi,Ki,Zi,Vi,Gi,Yi,Ji,qi,Qi,Xi,to,eo,no,io,oo,ro,so,ao,lo,co,uo,po,ho,fo,vo,bo,go,mo,yo,wo,So,xo,Io,Oo,ko,Po,Eo=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n};const{libBaseName:_o}=n(119),Ao=Eo(n(8),[]),Co={positionClass:{left:`${_o}-bell-left`,right:`${_o}-bell-right`},defaultProperties:{backgroundColor:null!==(mi=null===(gi=null==Ao?void 0:Ao.properties)||void 0===gi?void 0:gi.backgroundColor)&&void 0!==mi?mi:null,bellColor:null!==(wi=null===(yi=null==Ao?void 0:Ao.properties)||void 0===yi?void 0:yi.bellColor)&&void 0!==wi?wi:null,position:null!==(xi=null===(Si=null==Ao?void 0:Ao.properties)||void 0===Si?void 0:Si.position)&&void 0!==xi?xi:"right",displayInMobile:null!==(Oi=null===(Ii=null==Ao?void 0:Ao.properties)||void 0===Ii?void 0:Ii.displayInMobile)&&void 0!==Oi?Oi:null,displayInDesktop:null!==(Pi=null===(ki=null==Ao?void 0:Ao.properties)||void 0===ki?void 0:ki.displayInDesktop)&&void 0!==Pi?Pi:null},defaultTooltip:{prompt:{text:null!==(Ai=null===(_i=null===(Ei=null==Ao?void 0:Ao.tooltip)||void 0===Ei?void 0:Ei.prompt)||void 0===_i?void 0:_i.text)&&void 0!==Ai?Ai:"Click to subscribe"},granted:{text:null!==(Di=null===(Ti=null===(Ci=null==Ao?void 0:Ao.tooltip)||void 0===Ci?void 0:Ci.granted)||void 0===Ti?void 0:Ti.text)&&void 0!==Di?Di:"Click to unsubscribe"},denied:{text:null!==(Mi=null===(Ri=null===($i=null==Ao?void 0:Ao.tooltip)||void 0===$i?void 0:$i.denied)||void 0===Ri?void 0:Ri.text)&&void 0!==Mi?Mi:"Recieve notification is blocked in your browser"},afterToggledTo:{subscribed:{text:null!==(Bi=null===(Li=null===(ji=null===(Ni=null==Ao?void 0:Ao.tooltip)||void 0===Ni?void 0:Ni.afterToggledTo)||void 0===ji?void 0:ji.subscribed)||void 0===Li?void 0:Li.text)&&void 0!==Bi?Bi:"Successfully subscribed"},unsubscribed:{text:null!==(Hi=null===(Fi=null===(Ui=null===(Wi=null==Ao?void 0:Ao.tooltip)||void 0===Wi?void 0:Wi.afterToggledTo)||void 0===Ui?void 0:Ui.unsubscribed)||void 0===Fi?void 0:Fi.text)&&void 0!==Hi?Hi:"Unsubscribe from receiving notifications"}}},defaultDialog:{subscribe:{show:null===(Zi=null===(Ki=null===(zi=null==Ao?void 0:Ao.dialog)||void 0===zi?void 0:zi.subscribe)||void 0===Ki?void 0:Ki.show)||void 0===Zi||Zi,text:null!==(Yi=null===(Gi=null===(Vi=null==Ao?void 0:Ao.dialog)||void 0===Vi?void 0:Vi.subscribe)||void 0===Gi?void 0:Gi.text)&&void 0!==Yi?Yi:"Subscribe to notifications",buttonText:null!==(Qi=null===(qi=null===(Ji=null==Ao?void 0:Ao.dialog)||void 0===Ji?void 0:Ji.subscribe)||void 0===qi?void 0:qi.buttonText)&&void 0!==Qi?Qi:"Subscribe"},unsubscribe:{show:null===(eo=null===(to=null===(Xi=null==Ao?void 0:Ao.dialog)||void 0===Xi?void 0:Xi.unsubscribe)||void 0===to?void 0:to.show)||void 0===eo||eo,text:null!==(oo=null===(io=null===(no=null==Ao?void 0:Ao.dialog)||void 0===no?void 0:no.unsubscribe)||void 0===io?void 0:io.text)&&void 0!==oo?oo:"Are you sure to unsubscribe?",buttonText:null!==(ao=null===(so=null===(ro=null==Ao?void 0:Ao.dialog)||void 0===ro?void 0:ro.unsubscribe)||void 0===so?void 0:so.buttonText)&&void 0!==ao?ao:"I'm sure"},denied:{show:null===(uo=null===(co=null===(lo=null==Ao?void 0:Ao.dialog)||void 0===lo?void 0:lo.denied)||void 0===co?void 0:co.show)||void 0===uo||uo,text:null!==(fo=null===(ho=null===(po=null==Ao?void 0:Ao.dialog)||void 0===po?void 0:po.denied)||void 0===ho?void 0:ho.text)&&void 0!==fo?fo:"Receiving notification is block in your browser, follow instructions in the image to unblock it",buttonText:null!==(go=null===(bo=null===(vo=null==Ao?void 0:Ao.dialog)||void 0===vo?void 0:vo.denied)||void 0===bo?void 0:bo.buttonText)&&void 0!==go?go:"I'm aware of that",dialogImage:{chrome:null!==(So=null===(wo=null===(yo=null===(mo=null==Ao?void 0:Ao.dialog)||void 0===mo?void 0:mo.denied)||void 0===yo?void 0:yo.dialogImage)||void 0===wo?void 0:wo.chrome)&&void 0!==So?So:null,firefox:null!==(ko=null===(Oo=null===(Io=null===(xo=null==Ao?void 0:Ao.dialog)||void 0===xo?void 0:xo.denied)||void 0===Io?void 0:Io.dialogImage)||void 0===Oo?void 0:Oo.firefox)&&void 0!==ko?ko:null}}},bellTheme:null!==(Po=null==Ao?void 0:Ao.bellTheme)&&void 0!==Po?Po:"bell-theme1"},To=(t,e="")=>{if(!t)return!1;const n=(new Option).style;return n.color=t,""!==n.color||(s.A.error(`Error: The input color used for ${e} is invalid. Please use a valid color.`),!1)},{libBaseName:Do}=n(119);class $o{constructor(t,e,n,i){this.clickCallback=t,this.mouseOverCallback=e,this.mouseLeaveCallback=n,this.create(i),this.bellWrapper.addEventListener("click",this.onClick.bind(this)),this.bellWrapper.addEventListener("mouseover",this.onMouseOver.bind(this)),this.bellWrapper.addEventListener("mouseleave",this.onMouseLeave.bind(this))}static build(t,e,n,i={}){return new $o(t,e,n,i)}setBackgroundColor(t){this.bellBackground.style({backgroundColor:t})}off(){this.bellWrapper.style({display:"none"})}getBellWrapper(){return this.bellWrapper}create(t){var e,n;const{backgroundColor:i=Co.defaultProperties.backgroundColor,bellColor:o=Co.defaultProperties.bellColor,position:r=Co.defaultProperties.position}=t;let s="";r&&(s=null!==(n=null===(e=Co.positionClass)||void 0===e?void 0:e[r])&&void 0!==n?n:Co.defaultProperties.position),this.bellWrapper=new bi("div").attr("class",`${Do}-bell-wrapper ${s}`),this.shouldDisplayInMobileOrDesktop(t),this.bellBackground=new bi("div").attr("class",`${Do}-bell-background ${Do}-bell-inner`).style(To(i,"bell background")?{backgroundColor:i}:{}).childOf(this.bellWrapper),new bi("div").attr("class",`${Do}-bell-line-top`).style(To(i,"bell background")?{backgroundColor:i}:{}).childOf(this.bellBackground),new bi("div").attr("class",`${Do}-bell-line-bottom`).childOf(this.bellBackground);const a=new bi("svg").attr("viewBox","0 0 111.9 111.9").attr("class",`${Do}-bell`).style(To(o,"bell")?{fill:o}:{}).childOf(this.bellBackground);new bi("path").attr("d","M56.06,75.11a134,134,0,0,1-23-1.74l.44-5H34a2.41,2.41,0,0,0,2.46-2.35l0-20.65a19,19,0,0,1,5.69-13.55,19.83,19.83,0,0,1,33,9h0a18.21,18.21,0,0,1,.59,4.58l-.11,20.7a2.4,2.4,0,0,0,2.46,2.34h.32l.44,5A134.41,134.41,0,0,1,56.06,75.11ZM40.67,69.38c4.62.47,9.95.73,15.39.73s10.78-.25,15.38-.72a7.29,7.29,0,0,1-.79-3.29l.11-20.7a13.3,13.3,0,0,0-.43-3.31h0a14.76,14.76,0,0,0-24.67-6.68,14,14,0,0,0-4.22,10l0,20.65A7.18,7.18,0,0,1,40.67,69.38Z").childOf(a),new bi("path").attr("d","M51.21,77.39V79a4.24,4.24,0,0,0,4.1,4.33H56.6A4.23,4.23,0,0,0,60.69,79V77.39Z").childOf(a)}shouldDisplayInMobileOrDesktop(t){const{displayInMobile:e=Co.defaultProperties.displayInMobile,displayInDesktop:n=Co.defaultProperties.displayInDesktop}=t;switch(!0){case!1===n&&!1===e:this.bellWrapper.attr("class",`${Do}-hide-bell`);break;case!1===n:this.bellWrapper.attr("class",`${Do}-hide-bell-desktop`);break;case!1===e:this.bellWrapper.attr("class",`${Do}-hide-bell`),this.bellWrapper.attr("class",`${Do}-show-bell-desktop`)}}onClick(t){var e;(null===(e=this.bellWrapper.elem)||void 0===e?void 0:e.contains(null==t?void 0:t.target))&&"function"==typeof this.clickCallback&&this.clickCallback()}onMouseOver(t){"function"==typeof this.mouseOverCallback&&this.mouseOverCallback(t)}onMouseLeave(){"function"==typeof this.mouseLeaveCallback&&this.mouseLeaveCallback()}}var Ro=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{libBaseName:Mo}=n(119);class No{constructor(t){this._bell=t,this.isOpen=!1,this._resolveCb=null,this.create()}static build(t){return new No(t)}getDialogWrapper(){return this._wrapperElem}open(){return Ro(this,arguments,void 0,(function*(t="",e="",n=""){return new Promise((i=>{this._resolveCb=i,this._textElem.text(t),this._buttonElem.text(e),n&&this._imgElem.attr("src",n).style({display:"block"}),this._bell.attr("class","show-dialog"),setTimeout((()=>this.isOpen=!0))}))}))}close(){this._bell.changeClass("show-dialog",""),this._resolveCb=null,setTimeout((()=>this.isOpen=!1))}buttonClickHandler(){"function"==typeof this._resolveCb&&(this._resolveCb(),this.close())}create(){this._wrapperElem=new bi("div").attr("class",`${Mo}-bell-dialog`).childOf(this._bell),null===document||void 0===document||document.addEventListener("click",(t=>{var e;(this.isOpen&&!(null===(e=this._wrapperElem.elem)||void 0===e?void 0:e.contains(null==t?void 0:t.target))||this.isOpen&&this._wrapperElem.elem.contains(this._bell.elem))&&this.close()})),new bi("div").attr("class",`${Mo}-bell-dialog-icon`).childOf(this._wrapperElem);const t=new bi("div").attr("class",`${Mo}-bell-dialog-inner`).childOf(this._wrapperElem);this._imgElem=new bi("img").attr("class",`${Mo}-bell-dialog-img`).childOf(t).style({display:"none"}),this._textElem=new bi("p").attr("class",`${Mo}-bell-dialog-text`).text(Co.defaultDialog.subscribe.buttonText).childOf(t),this._buttonElem=new bi("div").attr("class",`${Mo}-bell-dialog-button`).text(Co.defaultDialog.unsubscribe.buttonText).style({}).childOf(t),this._buttonElem.addEventListener("click",this.buttonClickHandler.bind(this))}}const{libBaseName:jo}=n(119);class Lo{constructor(t){this._bell=t,this.create()}static build(t){return new Lo(t)}getTooltipWrapper(){return this._wrapperElem}toggleOn(){this._wrapperElem.changeClass("hide","show")}toggleOff(){this._wrapperElem.changeClass("show","hide")}setTooltipText(t){this._tooltipContentElem.text(t)}setTemporaryText(t){const e=this._tooltipContentElem.elem.innerHTML;this._tooltipContentElem.text(t),setTimeout((()=>this.toggleOn())),setTimeout((()=>{this.toggleOff(),this._tooltipContentElem.text(e)}),1500)}create(){this._wrapperElem=new bi("div").attr("class",`${jo}-bell-tooltip hide`).childOf(this._bell.child(`${jo}-bell-inner`)),this._tooltipContentElem=new bi("span").attr("class",`${jo}-bell-tooltip-text`).childOf(this._wrapperElem).text("")}}const{staticBaseURL:Bo,libBaseName:Wo}=n(119),{availableThemes:Uo}=n(8);const Fo=new class{addClickHandler(t){this._bellClickHandlerCallback=()=>{const e=this.getDialogOptions();e[0]?this._dialogObject.open(...e[1]).then((()=>t())).catch((t=>s.A.error(t))):t()}}toggleOff(){this._bellObject.off()}display(t={}){var e,n;this.bellOptions=t,this._bellObject=$o.build(this._bellClickHandlerCallback.bind(this),this.onMouseHover.bind(this),this.onMouseLeave.bind(this),null!==(n=null===(e=this.bellOptions)||void 0===e?void 0:e.properties)&&void 0!==n?n:{}),this._tooltipObject=Lo.build(this._bellObject.getBellWrapper()),this._dialogObject=No.build(this._bellObject.getBellWrapper()),this.attachStylesheetsIntoDOM(),new bi(document.body).append(this._bellObject.getBellWrapper().elem)}pushStateGetChecked(t,e){let n=!0;(this._permissionState||this._isSubscribed)&&(n=!1),this._permissionState=t,this._isSubscribed=e,this.setTooltipText(),n||this.setTemporaryTooltipText()}getDialogOptions(){var t,e,n,i,o,r,s,a,l,c,d,u,p,h,f,v,b,g,m,y,w,S,x,I,O,k,P,E,_,A,C,T,D,$,R,M,N,j,L,B,W;let U=!0,F="",H="",z="";if("prompt"===this._permissionState||"granted"===this._permissionState&&!this._isSubscribed)F=null!==(i=null===(n=null===(e=null===(t=this.bellOptions)||void 0===t?void 0:t.dialog)||void 0===e?void 0:e.subscribe)||void 0===n?void 0:n.text)&&void 0!==i?i:Co.defaultDialog.subscribe.text,H=null!==(a=null===(s=null===(r=null===(o=this.bellOptions)||void 0===o?void 0:o.dialog)||void 0===r?void 0:r.subscribe)||void 0===s?void 0:s.buttonText)&&void 0!==a?a:Co.defaultDialog.subscribe.buttonText,U=null===(u=null===(d=null===(c=null===(l=this.bellOptions)||void 0===l?void 0:l.dialog)||void 0===c?void 0:c.subscribe)||void 0===d?void 0:d.show)||void 0===u||u;else if("granted"===this._permissionState)F=null!==(v=null===(f=null===(h=null===(p=this.bellOptions)||void 0===p?void 0:p.dialog)||void 0===h?void 0:h.unsubscribe)||void 0===f?void 0:f.text)&&void 0!==v?v:Co.defaultDialog.unsubscribe.text,H=null!==(y=null===(m=null===(g=null===(b=this.bellOptions)||void 0===b?void 0:b.dialog)||void 0===g?void 0:g.unsubscribe)||void 0===m?void 0:m.buttonText)&&void 0!==y?y:Co.defaultDialog.unsubscribe.buttonText,U=null===(I=null===(x=null===(S=null===(w=this.bellOptions)||void 0===w?void 0:w.dialog)||void 0===S?void 0:S.unsubscribe)||void 0===x?void 0:x.show)||void 0===I||I;else if("denied"===this._permissionState){F=null!==(E=null===(P=null===(k=null===(O=this.bellOptions)||void 0===O?void 0:O.dialog)||void 0===k?void 0:k.denied)||void 0===P?void 0:P.text)&&void 0!==E?E:Co.defaultDialog.denied.text,H=null!==(T=null===(C=null===(A=null===(_=this.bellOptions)||void 0===_?void 0:_.dialog)||void 0===A?void 0:A.denied)||void 0===C?void 0:C.buttonText)&&void 0!==T?T:Co.defaultDialog.denied.buttonText,U=null===(M=null===(R=null===($=null===(D=this.bellOptions)||void 0===D?void 0:D.dialog)||void 0===$?void 0:$.denied)||void 0===R?void 0:R.show)||void 0===M||M;const t=ii()===Xn.FIREFOX?"firefox":"chrome";z=null!==(W=null===(B=null===(L=null===(j=null===(N=this.bellOptions)||void 0===N?void 0:N.dialog)||void 0===j?void 0:j.denied)||void 0===L?void 0:L.dialogImage)||void 0===B?void 0:B[t])&&void 0!==W?W:Co.defaultDialog.denied.dialogImage[t]}return[U,[F,H,z]]}setTooltipText(){var t,e,n,i,o,r,s,a,l,c,d,u;let p="";"prompt"===this._permissionState||"granted"===this._permissionState&&!this._isSubscribed?p=null!==(i=null===(n=null===(e=null===(t=this.bellOptions)||void 0===t?void 0:t.tooltip)||void 0===e?void 0:e.prompt)||void 0===n?void 0:n.text)&&void 0!==i?i:Co.defaultTooltip.prompt.text:"granted"===this._permissionState?p=null!==(a=null===(s=null===(r=null===(o=this.bellOptions)||void 0===o?void 0:o.tooltip)||void 0===r?void 0:r.granted)||void 0===s?void 0:s.text)&&void 0!==a?a:Co.defaultTooltip.granted.text:"denied"===this._permissionState&&(p=null!==(u=null===(d=null===(c=null===(l=this.bellOptions)||void 0===l?void 0:l.tooltip)||void 0===c?void 0:c.denied)||void 0===d?void 0:d.text)&&void 0!==u?u:Co.defaultDialog.denied.text),this._tooltipObject.setTooltipText(p)}setTemporaryTooltipText(){var t,e,n,i,o,r,s,a,l,c;let d="";"granted"===this._permissionState&&this._isSubscribed?d=null!==(o=null===(i=null===(n=null===(e=null===(t=this.bellOptions)||void 0===t?void 0:t.tooltip)||void 0===e?void 0:e.afterToggledTo)||void 0===n?void 0:n.subscribed)||void 0===i?void 0:i.text)&&void 0!==o?o:Co.defaultTooltip.afterToggledTo.subscribed.text:"prompt"!==this._permissionState&&this._isSubscribed||(d=null!==(c=null===(l=null===(a=null===(s=null===(r=this.bellOptions)||void 0===r?void 0:r.tooltip)||void 0===s?void 0:s.afterToggledTo)||void 0===a?void 0:a.unsubscribed)||void 0===l?void 0:l.text)&&void 0!==c?c:Co.defaultTooltip.afterToggledTo.unsubscribed.text),this._tooltipObject.setTemporaryText(d)}onMouseHover(t){this._dialogObject.getDialogWrapper().elem.contains(null==t?void 0:t.target)||this._tooltipObject.toggleOn()}onMouseLeave(){this._tooltipObject.toggleOff()}attachStylesheetsIntoDOM(){const t=Uo.reduce(((t,e)=>(t[e]=n(290)(`./${e}`).default,t)),{}),e=null==t?void 0:t[`${Co.bellTheme}`];new bi("style").text(e(Wo,Bo)).childOf(new bi(document.head))}},Ho=Fo;var zo=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Ko{constructor(){}static get Instance(){return this._instance||(this._instance=new Ko)}displayBell(t){return zo(this,arguments,void 0,(function*(t,e={}){if(this.context=t,this.context.isHttpsWebsite()||this.context.isLocalhost()){if(yield(yield this.context.getService(Hn)).isSubscribed())return void s.A.info("Already subscribed, so bell does not appear.")}else if(this.context.isHttpSite()&&(yield this.context.api.isSubscribed()))return void s.A.info("Already subscribed, so bell does not appear.");Ho.addClickHandler(this.bellClickHandler.bind(this)),Ho.display(e),yield this.subscriptionChangeListener()}))}bellClickHandler(){return zo(this,void 0,void 0,(function*(){const t=yield this.context.getService(Hn);if(this.context.isHttpsWebsite()||this.context.isLocalhost())(yield t.isSubscribed())?yield t.unsubscribe():(yield t.subscribe(),setTimeout((()=>Ho.toggleOff()),2e3));else{(yield this.context.api.isSubscribed())?yield Hn.unsubscribeHttp(this.context):yield Hn.subscribeOnHttp(this.context)}}))}subscriptionChangeListener(){return zo(this,void 0,void 0,(function*(){let t,e;if(this.context.isHttpsWebsite()||this.context.isLocalhost()){const n=yield this.context.getService(Hn);t=yield n.getPermissionState(),e=yield n.isSubscribed()}else{const n=yield this.context.refreshInitState();t=n.permissionState,e=n.isSubscribed}Ho.pushStateGetChecked(t,e),O.A.PublicInstance.on(I.lo.SUBSCRIPTION_CHANGE,(t=>{"completed"in t&&t.completed&&Ho.pushStateGetChecked(null==t?void 0:t.state,null==t?void 0:t.isSubscribed)}))}))}}const Zo=class{constructor(t){this.context=t}getPrioritizedElementOptions(t,e){return"bell"===e?this.constructBellOptions(t):"prompt"===e?this.constructPromptOptions(t):"geolocation"===e?this.constructGeolocationOptions(t):void 0}constructBellOptions(t){var e,n,i;return Object.assign(Object.assign(Object.assign({},t),null===(e=this.context.elementsOptions)||void 0===e?void 0:e.bell),{properties:Object.assign(Object.assign({},null==t?void 0:t.properties),null===(i=null===(n=this.context.elementsOptions)||void 0===n?void 0:n.bell)||void 0===i?void 0:i.properties)})}constructPromptOptions(t){var e,n,i,o,r,s,a,l;return Object.assign(Object.assign(Object.assign({},t),null===(e=this.context.elementsOptions)||void 0===e?void 0:e.prompt),{delayingPrompt:Object.assign(Object.assign({},null==t?void 0:t.delayingPrompt),null===(i=null===(n=this.context.elementsOptions)||void 0===n?void 0:n.prompt)||void 0===i?void 0:i.delayingPrompt),unblockPrompt:Object.assign(Object.assign({},null==t?void 0:t.unblockPrompt),null===(s=null===(r=null===(o=this.context)||void 0===o?void 0:o.elementsOptions)||void 0===r?void 0:r.prompt)||void 0===s?void 0:s.unblockPrompt),overlaySubscription:Object.assign(Object.assign({},null==t?void 0:t.overlaySubscription),null===(l=null===(a=this.context.elementsOptions)||void 0===a?void 0:a.prompt)||void 0===l?void 0:l.overlaySubscription)})}constructGeolocationOptions(t){var e,n,i,o,r,s,a;return Object.assign(Object.assign(Object.assign({},t),null===(e=this.context.elementsOptions)||void 0===e?void 0:e.geolocation),{text:Object.assign(Object.assign({},null==t?void 0:t.text),null===(i=null===(n=this.context.elementsOptions)||void 0===n?void 0:n.geolocation)||void 0===i?void 0:i.text),position:Object.assign(Object.assign({},null==t?void 0:t.position),null===(r=null===(o=this.context.elementsOptions)||void 0===o?void 0:o.geolocation)||void 0===r?void 0:r.position),displayIn:Object.assign(Object.assign({},null==t?void 0:t.displayIn),null===(a=null===(s=this.context.elementsOptions)||void 0===s?void 0:s.geolocation)||void 0===a?void 0:a.displayIn)})}};var Vo=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Go=class{constructor(){this.removedTags=[]}getFormattedResult(t){return{}}hydrateAddTags(t){return this.addedTags=t,this}hydrateRemoveTags(t){for(const e in t)t.hasOwnProperty(e)&&this.removedTags.push(e);return this}};Vo([(0,Zn.P)("added_tags")],Go.prototype,"addedTags",void 0),Vo([(0,Zn.P)("removed_tags")],Go.prototype,"removedTags",void 0),Go=Vo([Zn.s],Go);var Yo=n(988),Jo=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class qo{constructor(t="TagManager"){this.name=t,this.tagModel=new Go}static get Instance(){return this._instance||(this._instance=new qo)}getAllTags(){return Jo(this,void 0,void 0,(function*(){return P.A.Instance.getAllTags()}))}addTags(t,e){return Jo(this,void 0,void 0,(function*(){if(this.tagModel.hydrateAddTags(e),!(yield this.sendDataToServer(t)))return Promise.reject("Could not set tags due to server error");for(const t in e)e.hasOwnProperty(t)&&(yield P.A.Instance.addTag(t,e[t]));return Promise.resolve(!0)}))}removeTags(t,e){return Jo(this,void 0,void 0,(function*(){const n=yield this.getAllTags();if(!(0,Yo.G)(n)||(0,Yo.R)(n))return Promise.reject(new Error("Could not remove tags due to empty status of database"));const i={};for(const t of e)t in n&&(i[t]=n[t]);if(this.tagModel.hydrateRemoveTags(i),(0,Yo.R)(i))return Promise.reject(new Error("Could not find any persisted tags with specified tag(s)"));if(yield this.sendDataToServer(t)){for(const t of e)yield P.A.Instance.removeTag(t);return Promise.resolve(!0)}return Promise.reject(new Error("Could not set tags due to server error"))}))}sendDataToServer(t){return Jo(this,void 0,void 0,(function*(){try{return yield t.api.sendMessageUpstream(this.tagModel.getFormattedResult("t64")),Promise.resolve(!0)}catch(t){return s.A.error(`Could not send tags data, error: ${t}`),Promise.reject(!1)}}))}}var Qo,Xo,tr,er,nr,ir,or,rr,sr=n(921),ar=n(849);const{libBaseName:lr}=n(119),cr=n(625),dr={desktopPositionClass:{"top-right":`${lr}-unblock-prompt-top-right`,"top-left":`${lr}-unblock-prompt-top-left`,"top-center":`${lr}-unblock-prompt-top-center`,"bottom-right":`${lr}-unblock-prompt-bottom-right`,"bottom-left":`${lr}-unblock-prompt-bottom-left`,"bottom-center":`${lr}-unblock-prompt-bottom-center`},mobilePositionClass:{top:`${lr}-unblock-prompt-top`,bottom:`${lr}-unblock-prompt-bottom`},defaultProperties:{isEnabled:null===(Xo=null===(Qo=null==cr?void 0:cr.propeties)||void 0===Qo?void 0:Qo.enableUnblockPrompt)||void 0===Xo||Xo,displayInMobile:null===(er=null===(tr=null==cr?void 0:cr.propeties)||void 0===tr?void 0:tr.displayInMobile)||void 0===er||er,displayInDesktop:null===(ir=null===(nr=null==cr?void 0:cr.propeties)||void 0===nr?void 0:nr.displayInDesktop)||void 0===ir||ir},text:{body:null===(or=null==cr?void 0:cr.text)||void 0===or?void 0:or.body,button:null===(rr=null==cr?void 0:cr.text)||void 0===rr?void 0:rr.button},dialogImage:{chrome:cr.dialogImage.chrome,firefox:cr.dialogImage.firefox,chromeMobile:cr.dialogImage.chromeMobile,firefoxMobile:cr.dialogImage.firefoxMobile}};class ur{static isString(t,e){return"string"==typeof t&&t.length?t:e}static isBoolean(t,e){return"boolean"==typeof t?t:e}static parseDesktopPosition(t,e){if(t in(null==e?void 0:e.desktopPositionClass)){return(null==e?void 0:e.desktopPositionClass)[t]}return null==e?void 0:e.desktopPositionClass["top-center"]}static parseMobilePosition(t,e){if(t in(null==e?void 0:e.mobilePositionClass)){return(null==e?void 0:e.mobilePositionClass)[t]}return null==e?void 0:e.mobilePositionClass.top}}const{staticBaseURL:pr,libBaseName:hr}=n(119);class fr{constructor(t,e){this.context=t,this.options=e}init(){this.assembleUnblockPrompt()}getDefaultPromptOptions(){var t,e,n,i,o,r,s,a,l,c,d,u,p,h,f,v,b,g;const m=ur.isBoolean(null===(t=this.options)||void 0===t?void 0:t.enableUnblockPrompt,null===(e=null==dr?void 0:dr.defaultProperties)||void 0===e?void 0:e.isEnabled);let y=ur.isBoolean(null===(i=null===(n=this.options)||void 0===n?void 0:n.properties)||void 0===i?void 0:i.displayInMobile,null===(o=null==dr?void 0:dr.defaultProperties)||void 0===o?void 0:o.displayInMobile),w=ur.isBoolean(null===(s=null===(r=this.options)||void 0===r?void 0:r.properties)||void 0===s?void 0:s.displayInDesktop,null===(a=null==dr?void 0:dr.defaultProperties)||void 0===a?void 0:a.displayInDesktop);const S=ur.isString(null===(c=null===(l=this.options)||void 0===l?void 0:l.text)||void 0===c?void 0:c.body,null==dr?void 0:dr.text.body),x=ur.isString(null===(u=null===(d=this.options)||void 0===d?void 0:d.text)||void 0===u?void 0:u.button,null==dr?void 0:dr.text.button),I=ur.parseMobilePosition(ur.isString(null===(h=null===(p=this.options)||void 0===p?void 0:p.position)||void 0===h?void 0:h.mobile,null===(f=null==dr?void 0:dr.mobilePositionClass)||void 0===f?void 0:f.bottom),dr),O=ur.parseDesktopPosition(ur.isString(null===(b=null===(v=this.options)||void 0===v?void 0:v.position)||void 0===b?void 0:b.desktop,null===(g=null==dr?void 0:dr.desktopPositionClass)||void 0===g?void 0:g["top-center"]),dr);return y=y?`${hr}-show-prompt-mobile`:y=`${hr}-hide-prompt-mobile`,w=w?`${hr}-show-prompt-desktop`:`${hr}-hide-prompt-desktop`,{isEnabled:m,mobDisplay:y,deskDisplay:w,mobPosition:I,deskPosition:O,buttonText:x,bodyText:S}}detectBrowser(){return this.context.detectBrowser()===sr.P.FIREFOX?sr.P.FIREFOX:sr.P.CHROME}catchAndAnimateAccordion(){const t=document.getElementsByClassName(`${hr}-unblock-accordion-button`)[0];null==t||t.addEventListener("click",(function(){var t;this.classList.toggle(`${hr}-unblock-active`);const e=this.nextElementSibling;e.style.maxHeight=(null===(t=null==e?void 0:e.style)||void 0===t?void 0:t.maxHeight)?null:e.scrollHeight+"px"}))}getImageSrc(){const t=this.context.isMobileAgent(),e=this.detectBrowser();switch(!0){case t&&e===sr.P.CHROME:return dr.dialogImage.chromeMobile;case t&&e===sr.P.FIREFOX:return dr.dialogImage.firefoxMobile;case!t&&e===sr.P.CHROME:return dr.dialogImage.chrome;case!t&&e===sr.P.FIREFOX:return dr.dialogImage.firefox}}assembleUnblockPrompt(){const t=this.getImageSrc(),e=this.getDefaultPromptOptions(),n=new bi("div").attr("class",`${hr}-unblock-prompt-wrapper`).attr("class",e.mobPosition).attr("class",e.deskPosition).attr("class",e.mobDisplay).attr("class",e.deskDisplay),i=new bi("div").attr("class",`${hr}-closeBtn-wrapper`).childOf(n);new bi("p").text(null==e?void 0:e.bodyText).attr("class",`${hr}-unblock-prompt-text`).childOf(n),new bi("svg").attr("viewBox","0 0 512 512").attr("verson","1.1").attr("xml:space","preserve").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("class",`${hr}-closeBtn`).text('<path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z">\n        </path>').childOf(i),new bi("button").attr("class",`${hr}-unblock-accordion-button`).text(null==e?void 0:e.buttonText).childOf(n);const o=new bi("div").attr("class",`${hr}-unblock-panel`).childOf(n);new bi("img").attr("src",t).childOf(o),null===document||void 0===document||document.addEventListener("click",(t=>{var e,o;(null===(e=n.elem)||void 0===e?void 0:e.contains(null==t?void 0:t.target))&&!(null===(o=i.elem)||void 0===o?void 0:o.contains(null==t?void 0:t.target))||n.attr("class",`${hr}-hide-dialog`)})),document.body.appendChild(n.elem),this.catchAndAnimateAccordion(),new bi("style").text((0,ar.default)(hr,pr)).childOf(new bi(document.head))}}var vr=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{libBaseName:br}=n(119),gr=n(625),mr=`${br}_shown_unblock_prompt`;class yr{static get Instance(){return this._instance?this._instance:this._instance=new yr}init(t,e){return vr(this,void 0,void 0,(function*(){var n;if("boolean"==typeof(null==e?void 0:e.enableUnblockPrompt)){if(!1===(null==e?void 0:e.enableUnblockPrompt))return}else if(!1===(null===(n=null==gr?void 0:gr.propeties)||void 0===n?void 0:n.enableUnblockPrompt))return;yield this.displayUnblockPrompt(t,e)}))}inHttpsEnv(t){return t.getEnvironment()===a.default.SDK&&(t.isHttpsWebsite()||t.isLocalhost())&&!t.isSubdomainWindow()}inHttpEnv(t){return t.getEnvironment()===a.default.SDK&&t.isSubdomainWindow()}displayUnblockPrompt(t,e){return vr(this,void 0,void 0,(function*(){const n=t.getService(Hn),i=new fr(t,e);if(this.inHttpsEnv(t)){if((null===localStorage||void 0===localStorage?void 0:localStorage.getItem)&&(null===localStorage||void 0===localStorage?void 0:localStorage.setItem)){(yield n.getPermissionState())===x.DENIED&&"true"!==(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(mr))&&i.init(),null===localStorage||void 0===localStorage||localStorage.setItem(mr,"true")}}else if(this.inHttpEnv(t)){(yield t.refreshInitState()).permissionState===x.DENIED&&i.init()}}))}}var wr,Sr=n(89),xr=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};!function(t){t.CUSTOM="custom"}(wr||(wr={}));let Ir=class{getFormattedResult(t){return{}}setEventAction(t){return this.eventAction=t,this}setEventData(t){return this.eventData=t,this}setEventName(t){return this.eventName=t,this}};xr([(0,Zn.P)("name")],Ir.prototype,"eventName",void 0),xr([(0,Zn.P)("action")],Ir.prototype,"eventAction",void 0),xr([(0,Zn.P)("data")],Ir.prototype,"eventData",void 0),Ir=xr([Zn.s],Ir);const Or=Ir;var kr=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Pr{constructor(t){this.context=t}sendEvent(t,e){return kr(this,void 0,void 0,(function*(){return"string"!=typeof t?Promise.reject(new Error("event name should be of type string")):(0,Yo.G)(e)?(yield this.setEventData(t,e),!!(yield this.sendEventDataToServer())):Promise.reject(new Error("event data should be a javascript object of keys and values"))}))}setEventData(t,e){return kr(this,void 0,void 0,(function*(){this.event=(new Or).setEventName(t).setEventData(e).setEventAction(wr.CUSTOM)}))}sendEventDataToServer(){return kr(this,void 0,void 0,(function*(){const t=this.event.getFormattedResult("t102");try{return yield this.context.api.sendMessageUpstream(t),!0}catch(t){return s.A.error(`Could not send event data to server, error: ${t}`),!1}}))}}var Er=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let _r=class{getFormattedResult(t){return{}}setCategory(t){return this.category=t,this}setName(t){return this.name=t,this}setPrice(t){return this.price=t,this}setQuantity(t){return this.quantity=t,this}setExtraData(t){return this.extraData=t,this}};Er([(0,Zn.P)()],_r.prototype,"name",void 0),Er([(0,Zn.P)()],_r.prototype,"price",void 0),Er([(0,Zn.P)()],_r.prototype,"category",void 0),Er([(0,Zn.P)()],_r.prototype,"quantity",void 0),Er([(0,Zn.P)("extra")],_r.prototype,"extraData",void 0),_r=Er([Zn.s],_r);const Ar=_r;var Cr=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Tr{constructor(t){this.context=t}sendEcommerceData(t,e,n,i,o){return Cr(this,void 0,void 0,(function*(){return yield this.hydrateEcommerceModel(t,e,n,i,o),!!(yield this.sendEcommerceDataToServer())}))}hydrateEcommerceModel(t,e,n,i,o){return Cr(this,void 0,void 0,(function*(){this.ecommerce=(new Ar).setName(t).setPrice(e).setCategory(n).setQuantity(i).setExtraData(o)}))}sendEcommerceDataToServer(){return Cr(this,void 0,void 0,(function*(){const t=this.ecommerce.getFormattedResult("t103");try{return yield this.context.api.sendMessageUpstream(t),!0}catch(t){return s.A.error(`Could not send ecommerce data to server, error: ${t}`),!1}}))}}var Dr=n(343),$r=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{libBaseName:Rr}=n(119),{backgroundText:Mr}=n(789);class Nr{constructor(){}static get Instance(){return this._instance?this._instance:this._instance=new Nr}init(t,e){return $r(this,void 0,void 0,(function*(){const n=t.detectBrowser();if(this.attachEvents(),t.getEnvironment()===a.default.SDK){if(n!==sr.P.FIREFOX)return this.displayOverlayPrompt(e);{const t=new Promise((t=>{const n=()=>(window.removeEventListener("click",n),t(),this.displayOverlayPrompt(e));window.addEventListener("click",n)}));yield t}}return!0}))}displayOverlayPrompt(t){const e=this.processDefaultOptions(t),n=e.displayInMobileClass,i=e.displayInDesktopClass,o=e.backgroundText,r=e.overlayTextColor,s=e.overlayBackgroundColor,a=new bi("div").style(`background-color: ${s}`).attr("class",`${Rr}-overlay-full-background`).attr("class",n).attr("class",i),l=new bi("div").attr("class",`${Rr}-overlay-content-wrapper`).childOf(a);return new bi("p").attr("class",`${Rr}-overlay-subscription-message`).text(o).style(`color: ${r}`).childOf(l),new bi("span").attr("class",`${Rr}-overlay-direct-arrow`).text("&#10548;").style(`color: ${r}`).childOf(l),new bi("span").attr("class",`${Rr}-overlay-close-btn`).text("&#10005;").style(`color: ${r}`).childOf(a).event("click",(()=>{O.A.PublicInstance.emit(I.MY.PROMPT_REJECT),null===localStorage||void 0===localStorage||localStorage.setItem(ss,Date.now().toString()),a.elem.remove()})),document.body.appendChild(a.elem),new bi("style").text((0,Dr.default)(Rr)).childOf(new bi(document.head)),!0}isInputValid(t,e){if("string"===e){if(typeof t===e&&(null==t?void 0:t.length))return t}else if("boolean"===e&&typeof t===e)return t}processDefaultOptions(t){var e,n,i,o,r,s,a,l;let c=null===(n=this.isInputValid(null===(e=null==t?void 0:t.displayIn)||void 0===e?void 0:e.mobile,"boolean"))||void 0===n||n;c=c?`${Rr}-overlay-display-mobile`:`${Rr}-overlay-hide-mobile`;let d=null===(o=this.isInputValid(null===(i=null==t?void 0:t.displayIn)||void 0===i?void 0:i.desktop,"boolean"))||void 0===o||o;d=d?`${Rr}-overlay-display-desktop`:`${Rr}-overlay-hide-desktop`;return{displayInMobileClass:c,displayInDesktopClass:d,backgroundText:ur.isString(null==t?void 0:t.backgroundText,Mr),overlayTextColor:null!==(s=null===(r=null==t?void 0:t.color)||void 0===r?void 0:r.text)&&void 0!==s?s:"#eee",overlayBackgroundColor:null!==(l=null===(a=null==t?void 0:t.color)||void 0===a?void 0:a.background)&&void 0!==l?l:"#000"}}attachEvents(){O.A.PublicInstance.on(I.lo.SUBSCRIPTION_CHANGE,(()=>{const t=document.querySelector(".pushe-overlay-full-background");t&&t.remove()}))}}const jr=Nr;const{libBaseName:Lr}=n(119);class Br{constructor(t,e="top-center",n="top",i="rtl"){this.prompt=t,this._desktopPosition=e,this._mobilePosition=n,this.direction=i,this.addStyleFile(),this.adjustPositions(),this.adjustDirection()}addStyleFile(){document.querySelector(`#${Lr}-prompt-position-styles`)||new bi("style").attr("id",`${Lr}-prompt-position-styles`).text(function(t){const e=`${t}-prompt`;return`\n    @media (min-width: 768px) {\n        .${e}-top-left {\n            top: 10px;\n            left: 10px;\n            right: unset;\n            bottom: unset;\n        }\n\n        .${e}-top-center {\n            top: 10px;\n            right: 0;\n            left: 0;\n            bottom: unset;\n        }\n\n        .${e}-top-right {\n            top: 10px;\n            right: 10px;\n            left: unset;\n            bottom: unset;\n        }\n\n        .${e}-bottom-left {\n            top: unset;\n            left: 15px;\n            right: unset;\n            bottom: 15px;\n        }\n\n        .${e}-bottom-center {\n            top: unset;\n            left: 0;\n            right: 0;\n            bottom: 15px;\n        }\n\n        .${e}-bottom-right {\n            top: unset;\n            left: unset;\n            right: 15px;\n            bottom: 15px;\n        }\n    }\n\n    @media (max-width: 768px){\n        .${e}-top {\n            top: 10px;\n            left: 0;\n            right: 0;\n            bottom: unset;\n        }\n\n        .${e}-bottom {\n            bottom: 15px;\n            top: unset;\n            left: 0;\n            right: 0;\n        }\n    }\n    `}(Lr)).childOf(new bi(document.head))}adjustPositions(){const t=this.addCssPrefixClass(this._mobilePosition),e=this.addCssPrefixClass(this._desktopPosition);this.prompt.addClassToRootElem(t),this.prompt.addClassToRootElem(e)}adjustDirection(){const t={rtl:this.addCssPrefixClass("is-rtl"),ltr:this.addCssPrefixClass("is-ltr")};this.prompt.addClassToRootElem(t[this.direction])}addCssPrefixClass(t){return`${Lr}-prompt-${t}`}}var Wr=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{staticBaseURL:Ur,libBaseName:Fr}=n(119);class Hr{constructor(t,e,n){var i;this.title=t,this.message=e,this.options=n,this.rootEl=new bi("div").attr("class","prompt"),!1!==(null===(i=null==this?void 0:this.options)||void 0===i?void 0:i.showDialog)&&(this.addStyleFile(),this.assemblePrompt())}addButton(t){return this.buttonsWrapper||(this.buttonsWrapper=new bi("div").childOf(this.contentWrapper).attr("class",this.addCssPrefixClass("buttons"))),t.childOf(this.buttonsWrapper),this}addIcon(t){return this.iconWrapper||(this.iconWrapper=new bi("div").childOf(this.rootEl).attr("class",this.addCssPrefixClass("icon-wrapper")),new bi("img").attr("class",this.addCssPrefixClass("icon")).attr("alt","prompt icon").attr("src",t||"https://static.pushe.co/d/webpush/default-icon.png").childOf(this.iconWrapper),this.contentWrapper.changeClass(this.addCssPrefixClass("no-icon"),"")),this}setPosition(t,e,n){return new Br(this,t,e,n),this}setDisplayInMobile(t){return!1===t&&this.rootEl.attr("class","hide-in-mobile"),this}setDisplayInDesktop(t){return!1===t&&this.rootEl.attr("class","hide-in-desktop"),this}removeFromDom(){this.rootEl.elem.remove()}addClassToRootElem(t){this.rootEl.attr("class",t)}addStyleFile(){var t;const e="pushe-prompt-theme1"===(null===(t=this.options)||void 0===t?void 0:t.theme)?function(t,e){const n=`${e}-prompt`;return`\n    @font-face {\n        font-family: 'ISansFont';\n        src: url('${t}/fonts/IRANSans.eot');\n        src: url('${t}/fonts/IRANSans.eot?#iefix') format('embedded-opentype'),\n        url('${t}/fonts/IRANSans.woff2') format('woff2'),\n        url('${t}/fonts/IRANSans.woff') format('woff'),\n        url('${t}/fonts/IRANSans.ttf') format('truetype'),\n        url('${t}/fonts/IRANSans.svg#svgFontName') format('svg');\n    }\n\n    .prompt{\n        position: absolute;\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        min-width: 300px;\n        max-width: 400px;\n        z-index: 10000000;\n        box-shadow: 2px 2px 10px #c5c5c5;\n        border-radius: 10px;\n        background-color: #ffffff;\n        font-family: ISansFont;\n        margin: 0 auto;\n        font-size: 16px;\n        top: 10px;\n        left: 0;\n        right: 0;\n        direction: rtl;\n    }\n\n    @media(min-width: 768px){\n        .prompt.hide-in-desktop {\n            visibility: hidden\n        }\n    }\n\n    @media(max-width: 768px){\n        .prompt.hide-in-mobile {\n            visibility: hidden\n        }\n    }\n\n    .prompt.${n}-is-ltr {\n        direction: ltr;\n    }\n\n    .prompt.${n}-is-rtl {\n        direction: rtl;\n    }\n\n    .${n}-icon-wrapper {\n        order: 0;\n        display: block;\n        width: 25%;\n        height: 100%;\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n\n    .${n}-icon {\n        display: block;\n        width: 100%;\n        height: auto;\n        padding: 30px 12px;\n        box-sizing: border-box;\n    }\n\n    .${n}-content-wrapper {\n        order: 1;\n        text-align: right;\n        display: block;\n        width: 75%;\n        padding: 10px 20px 15px;\n        height: 100%;\n        box-sizing: border-box;\n    }\n\n    .${n}-content-wrapper.${n}-no-icon {\n        width: 100%\n    }\n\n    .prompt.${n}-is-ltr > .${n}-content-wrapper {\n        text-align: left;\n    }\n\n    .${n}-title {\n        display: block;\n        color: #55c551;\n        font-size: 1em;\n        font-weight: 900;\n        margin: 8px 0;\n        box-sizing: border-box;\n        direction: inherit;\n    }\n\n    .${n}-message {\n        display: block;\n        color: #989c9d;\n        font-size: .95em;\n        box-sizing: border-box;\n        direction: inherit;\n        padding: 0;\n        margin: 6px 0;\n        line-height: 1.6;\n    }\n\n    .${n}-buttons {\n        float: left;\n        display: flex;\n        flex-direction: row;\n        clear: both;\n        overflow: hidden;\n        box-sizing: border-box;\n        margin-top: 8px;\n    }\n\n    .prompt.${n}-is-ltr .${n}-buttons {\n        float: right;\n    }\n\n    .${e}-btn {\n        display: inline-block;\n        background-color: #e6e6e6;\n        border-radius: 40px;\n        min-width: 10px;\n        padding: 4px 15px;\n        font-size: .87em;\n        margin: 0 5px;\n        cursor: pointer;\n        box-sizing: border-box;\n        min-width: 100px;\n        white-space: nowrap;\n    }\n\n    .${e}-btn-primary {\n        background-color: #00abe5;\n        color: #fff;\n        box-sizing: border-box;\n    }\n\n    .${e}-btn-secondary {\n        color: #808080;\n        box-sizing: border-box;\n    }\n}\n`}(Ur,Fr):function(t,e){const n=`${e}-prompt`;return`\n    @font-face {\n        font-family: 'IRANYekanWeb';\n        src: url('${t}/d/fonts/IYekanWeb-Medium.eot');\n        src: url('${t}/d/fonts/IYekanWeb-Medium.eot?#iefix') format('embedded-opentype'),\n        url('${t}/d/fonts/IYekanWeb-Medium.woff2') format('woff2'),\n        url('${t}/d/fonts/IYekanWeb-Medium.woff') format('woff'),\n        url('${t}/d/fonts/IYekanWeb-Medium.ttf') format('truetype');\n        font-weight: 500;\n        font-style: normal;\n    }\n\n    .prompt{\n        display: flex;\n        flex-direction: row;\n        min-width: 350px;\n        max-width: 400px;\n        z-index: 10000000;\n        background-color: #ffffff;\n        font-family: IRANYekanWeb;\n        margin: 0 auto;\n        font-size: 16px;\n        position: fixed;\n        border: 2px solid #909090;\n        border-radius: 4px;\n        box-shadow: 6px 6px 0px 0px #ccc;\n        top: 10px;\n        right: 0;\n        left: 0;\n\n        direction: rtl;\n    }\n\n    @media(min-width: 768px){\n        .prompt.hide-in-desktop {\n            visibility: hidden\n        }\n    }\n\n    @media(max-width: 768px){\n        .prompt.hide-in-mobile {\n            visibility: hidden\n        }\n    }\n\n    .prompt.${n}-is-ltr {\n        direction: ltr;\n    }\n\n    .prompt.${n}-is-rtl {\n        direction: rtl;\n    }\n\n    .${n}-icon-wrapper {\n        order: 0;\n        display: block;\n        width: 25%;\n        height: 100%;\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n\n    .${n}-icon {\n        display: block;\n        width: 100%;\n        height: auto;\n        padding: 30px 12px;\n        box-sizing: border-box;\n    }\n\n    .${n}-content-wrapper {\n        order: 1;\n        text-align: right;\n        display: block;\n        width: 75%;\n        padding: 10px 15px 15px;\n        height: 100%;\n        box-sizing: border-box;\n    }\n\n    .${n}-content-wrapper.${n}-no-icon {\n        width: 100%\n    }\n\n    .prompt.${n}-is-ltr > .${n}-content-wrapper {\n        text-align: left;\n    }\n\n    .${n}-title {\n        display: block;\n        color: #0065ff;\n        font-size: 1em;\n        font-weight: 900;\n        margin: 8px 0;\n        box-sizing: border-box;\n    }\n\n    .${n}-message {\n        display: block;\n        color: #333333;\n        font-size: .95em;\n        box-sizing: border-box;\n        margin: 8px 0;\n    }\n\n    .${n}-buttons {\n        font-size: 16px;\n        float: left;\n        display: flex;\n        clear: both;\n        overflow: hidden;\n        box-sizing: border-box;\n        margin-top: 10px;\n    }\n\n    .prompt.${n}-is-ltr .${n}-buttons {\n        float: right;\n    }\n\n    .${e}-btn {\n        display: inline-block;\n        background-color: #e6e6e6;\n        min-width: 10px;\n        padding: 6px 15px;\n        font-size: .87em;\n        margin: 0 5px;\n        cursor: pointer;\n        box-sizing: border-box;\n        white-space: nowrap;\n        border-radius: 4px;\n\n        margin: 0 0 0 10px;\n    }\n\n    .${e}-btn-primary {\n        box-sizing: border-box;\n        background-color: rgb(0, 254, 182);\n        color: rgb(51, 51, 51);\n        padding: 6px 15px;\n    }\n\n    .${e}-btn-secondary {\n        box-sizing: border-box;\n        color: rgb(51, 51, 51);\n        padding: 6px 15px;\n    }\n}\n`}(Ur,Fr);document.querySelector(`#${Fr}-prompt-styles`)||new bi("style").attr("id",`${Fr}-prompt-styles`).text(e).childOf(new bi(document.head))}assemblePrompt(){return Wr(this,void 0,void 0,(function*(){document.body.appendChild(this.rootEl.elem),this.assembleContent(),this.assembleText(),yield O.A.PublicInstance.emit(I.MY.PROMPT_OPEN)}))}assembleContent(){this.contentWrapper=new bi("div").childOf(this.rootEl).attr("class",this.addCssPrefixClass("content-wrapper")).attr("class",this.addCssPrefixClass("no-icon"))}assembleText(){new bi("p").text(this.title).childOf(this.contentWrapper).attr("class",this.addCssPrefixClass("title")),new bi("p").text(this.message).childOf(this.contentWrapper).attr("class",this.addCssPrefixClass("message"))}addCssPrefixClass(t){return`${Fr}-prompt-${t}`}}const{libBaseName:zr}=n(119);class Kr{constructor(t,e,n){this.label=t,this.action=e,this.level=n,this.create()}childOf(t){return this.buttonEl.childOf(t),this}create(){const t="primary"===this.level;this.buttonEl=new bi("a").text(this.label).event("click",this.action).attr("class",`${zr}-btn`).attr("class",t?`${zr}-btn-primary`:`${zr}-btn-secondary`)}}class Zr extends Kr{constructor(t,e,n){super(t,e,n)}}class Vr extends Kr{constructor(t,e,n){super(t,e,n)}}var Gr,Yr,Jr,qr,Qr,Xr,ts,es;const ns=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(n(459),[]),is={title:null!==(Gr=null==ns?void 0:ns.title)&&void 0!==Gr?Gr:"title",content:null!==(Yr=null==ns?void 0:ns.content)&&void 0!==Yr?Yr:"content",acceptText:null!==(Jr=null==ns?void 0:ns.acceptText)&&void 0!==Jr?Jr:"accept text",rejectText:null!==(qr=null==ns?void 0:ns.rejectText)&&void 0!==qr?qr:"reject text",icon:null!==(Qr=null==ns?void 0:ns.icon)&&void 0!==Qr?Qr:null,position:null!==(Xr=null==ns?void 0:ns.position)&&void 0!==Xr?Xr:"top-center",mobilePosition:null!==(ts=null==ns?void 0:ns.mobilePosition)&&void 0!==ts?ts:"top",direction:null!==(es=null==ns?void 0:ns.direction)&&void 0!==es?es:"rtl"};var os=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{timeSpentMaxSession:rs}=n(459),ss="pushe_dialog_last_shown_time",as="pushe_delayed_prompt_start_session",ls="pushe_surfed_pages_per_day";class cs{constructor(){this.setOption("showDialog",!0),this.setOption("delayingPrompt",{surfedPages:0,timeSpent:0})}static get Instance(){return this._instance||(this._instance=new cs)}setOptions(t){this.options=Object.assign(Object.assign({},this.options),t)}setOption(t,e){this.options=this.options||Object.assign({},this.options),this.options[t]=e}displayPrompt(t,e){return os(this,void 0,void 0,(function*(){var n,i;const o=!0;if((!this.options.showDialog||"string"==typeof t&&"prompt"!==t)&&!(null===(i=null===(n=this.options)||void 0===n?void 0:n.prompt)||void 0===i?void 0:i.overlaySubscription))return o;if(this.preventDisplayPromptDuoToRetryRate())return!1;const r=this.isDelayedPromptActive()?yield this.delayedDisplayPrompt(t,e):yield this.autoDisplayPrompt(t,e);return yield O.A.PublicInstance.emit(I.MY.PROMPT_CLOSE),!1===r&&this.updateRetryRateInLocalStorage(),r&&o}))}detectSubscriptionType(t){var e,n,i,o,r,s,a;return!0===(null===(e=this.options)||void 0===e?void 0:e.showDialog)?sr.Q.Prompt:!0===(null===(o=null===(i=null===(n=this.options)||void 0===n?void 0:n.prompt)||void 0===i?void 0:i.overlaySubscription)||void 0===o?void 0:o.isEnabled)?(null===(a=null===(s=null===(r=this.options)||void 0===r?void 0:r.prompt)||void 0===s?void 0:s.overlaySubscription)||void 0===a?void 0:a.clickTrigger)||t.detectBrowser()!==sr.P.FIREFOX?sr.Q.Overlay:sr.Q.Prompt:sr.Q.Default}displayPromptBasedOnSubscriptionType(t,e){var n,i;const o=this.detectSubscriptionType(e),r=new vi.A;return o===sr.Q.Prompt?(this.createPrompt(r),r):o!==sr.Q.Overlay||(t===x.PROMPT?jr.Instance.init(e,null===(i=null===(n=this.options)||void 0===n?void 0:n.prompt)||void 0===i?void 0:i.overlaySubscription):void 0)}autoDisplayPrompt(t,e){return os(this,void 0,void 0,(function*(){return this.displayPromptBasedOnSubscriptionType(t,e)}))}delayedDisplayPrompt(t,e){return os(this,void 0,void 0,(function*(){this.processDelayedOptions();const n=new Promise((t=>os(this,void 0,void 0,(function*(){(yield this.isDelayedPromptResolved())&&t()}))));return yield n,this.resetDelayedPromptSession(),this.displayPromptBasedOnSubscriptionType(t,e)}))}preventDisplayPromptDuoToRetryRate(){const t=!0;if(0===this.getDialogRetryRate())return localStorage.removeItem(ss),!1;const e=localStorage.getItem(ss);if(!e)return!1;const n=Date.now();return e&&n-parseInt(e,10)<1e3*this.options.dialogRetryRate?t:e?(localStorage.removeItem(ss),!1):void 0}updateRetryRateInLocalStorage(){0!==this.getDialogRetryRate()&&localStorage.setItem(ss,Date.now().toString())}getDialogRetryRate(){const t=this.options.dialogRetryRate;return"number"==typeof t?t:0}isDelayedPromptActive(){var t,e,n,i,o,r,s,a,l;let c=null!==(n=null===(e=null===(t=this.options)||void 0===t?void 0:t.delayingPrompt)||void 0===e?void 0:e.surfedPages)&&void 0!==n?n:0,d=null!==(r=null===(o=null===(i=this.options)||void 0===i?void 0:i.delayingPrompt)||void 0===o?void 0:o.timeSpent)&&void 0!==r?r:0,u=null!==(l=null===(a=null===(s=this.options)||void 0===s?void 0:s.delayingPrompt)||void 0===a?void 0:a.percentileScrolled)&&void 0!==l?l:0;return"number"!=typeof c&&(c=0),"number"!=typeof d&&(d=0),"number"!=typeof u&&(u=0),c>0||d>0||u>0}isDelayedPromptResolved(){return os(this,void 0,void 0,(function*(){var t,e,n,i,o,r,s,a,l,c,d;let u=0;const p=(null!==(n=null===(e=null===(t=this.options)||void 0===t?void 0:t.delayingPrompt)||void 0===e?void 0:e.surfedPages)&&void 0!==n?n:0)>0,h=(null!==(r=null===(o=null===(i=this.options)||void 0===i?void 0:i.delayingPrompt)||void 0===o?void 0:o.timeSpent)&&void 0!==r?r:0)>0,f=(null!==(l=null===(a=null===(s=this.options)||void 0===s?void 0:s.delayingPrompt)||void 0===a?void 0:a.percentileScrolled)&&void 0!==l?l:0)>0;if(p){let t=localStorage.getItem(ls);t&&(t=parseInt(t,10),(null===(d=null===(c=this.options)||void 0===c?void 0:c.delayingPrompt)||void 0===d?void 0:d.surfedPages)<=t&&u++)}else u++;if(h&&u>0){const t=new Promise((t=>{var e,n;setTimeout((()=>{u++,t()}),1e3*(null===(n=null===(e=this.options)||void 0===e?void 0:e.delayingPrompt)||void 0===n?void 0:n.timeSpent))}));yield t}return u++,yield this.waitUntilScrollFulfilled(f),u++,u>=3}))}waitUntilScrollFulfilled(t){return os(this,void 0,void 0,(function*(){var e,n;if(t){const t=(null===(n=null===(e=this.options)||void 0===e?void 0:e.delayingPrompt)||void 0===n?void 0:n.percentileScrolled)/100,i=new Promise((e=>{window.addEventListener("scroll",(function n(){window.scrollY>=(document.documentElement.offsetHeight-window.innerHeight)*t&&(window.removeEventListener("scroll",n),e())}))}));yield i}}))}processDelayedOptions(){var t,e;if(!this.isDelayedPromptActive())return;let n=localStorage.getItem(as);n&&(n=parseInt(n,10));Date.now()-n>rs&&this.resetDelayedPromptSession(),(null===(e=null===(t=this.options)||void 0===t?void 0:t.delayingPrompt)||void 0===e?void 0:e.surfedPages)>0&&(()=>{let t=localStorage.getItem(ls);t&&(t=parseInt(t,10)),localStorage.setItem(ls,(++t).toString())})()}resetDelayedPromptSession(){const t=Date.now();localStorage.setItem(as,t.toString()),localStorage.setItem(ls,"0")}createPrompt(t){var e,n,i,o,r,s,a,l,c,d,u,p,h,f,v,b,g,m,y,w,S,x,k,P,E,_;const A=e=>{const n="accept"===e;t.resolve(!!n),O.A.PublicInstance.emit(n?I.MY.PROMPT_ACCEPT:I.MY.PROMPT_REJECT)},C=new Hr(null!==(i=null===(n=null===(e=this.options)||void 0===e?void 0:e.prompt)||void 0===n?void 0:n.title)&&void 0!==i?i:this.getDefaultPromptValues("title"),null!==(s=null===(r=null===(o=this.options)||void 0===o?void 0:o.prompt)||void 0===r?void 0:r.content)&&void 0!==s?s:this.getDefaultPromptValues("content"));C.addButton(new Zr(null!==(c=null===(l=null===(a=this.options)||void 0===a?void 0:a.prompt)||void 0===l?void 0:l.acceptText)&&void 0!==c?c:this.getDefaultPromptValues("acceptText"),(()=>{A("accept"),C.removeFromDom()}),"primary")).addButton(new Vr(null!==(p=null===(u=null===(d=this.options)||void 0===d?void 0:d.prompt)||void 0===u?void 0:u.rejectText)&&void 0!==p?p:this.getDefaultPromptValues("rejectText"),(()=>{A("reject"),C.removeFromDom()}),"secondary")).setPosition(null!==(v=null===(f=null===(h=this.options)||void 0===h?void 0:h.prompt)||void 0===f?void 0:f.position)&&void 0!==v?v:this.getDefaultPromptValues("position"),null!==(m=null===(g=null===(b=this.options)||void 0===b?void 0:b.prompt)||void 0===g?void 0:g.mobilePosition)&&void 0!==m?m:this.getDefaultPromptValues("mobilePosition"),null!==(S=null===(w=null===(y=this.options)||void 0===y?void 0:y.prompt)||void 0===w?void 0:w.direction)&&void 0!==S?S:this.getDefaultPromptValues("direction")),(null===(P=null===(k=null===(x=this.options)||void 0===x?void 0:x.prompt)||void 0===k?void 0:k.icon)||void 0===P?void 0:P.length)&&C.addIcon(null===(_=null===(E=this.options)||void 0===E?void 0:E.prompt)||void 0===_?void 0:_.icon)}getDefaultPromptValues(t){return is[t]}}var ds=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let us=class{getFormattedResult(t){return{}}setCoords(t){return this.coords=t,this}};ds([(0,Zn.P)("coordinates")],us.prototype,"coords",void 0),us=ds([Zn.s],us);const ps=us;var hs,fs,vs,bs,gs,ms,ys,ws,Ss,xs;const Is=n(269),Os={desktopPositionClass:{"top-right":"top-right","top-left":"top-left","top-center":"top-center","bottom-right":"bottom-right","bottom-left":"bottom-left","bottom-center":"bottom-center"},mobilePositionClass:{top:"top",bottom:"bottom"},defaultProperties:{isEnabled:null===(hs=null==Is?void 0:Is.isEnabled)||void 0===hs||hs,displayInMobile:null===(vs=null===(fs=null==Is?void 0:Is.displayIn)||void 0===fs?void 0:fs.mobile)||void 0===vs||vs,displayInDesktop:null===(gs=null===(bs=null==Is?void 0:Is.displayIn)||void 0===bs?void 0:bs.desktop)||void 0===gs||gs,showDialog:null===(ms=null==Is?void 0:Is.showDialog)||void 0===ms||ms,icon:null==Is?void 0:Is.icon},text:{title:null===(ys=null==Is?void 0:Is.text)||void 0===ys?void 0:ys.title,content:null===(ws=null==Is?void 0:Is.text)||void 0===ws?void 0:ws.content,rejectBtn:null===(Ss=null==Is?void 0:Is.text)||void 0===Ss?void 0:Ss.rejectBtn,acceptBtn:null===(xs=null==Is?void 0:Is.text)||void 0===xs?void 0:xs.acceptBtn}};var ks=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Ps{constructor(){this.userInteracted=new vi.A}static get Instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new Ps}init(t,e){return ks(this,void 0,void 0,(function*(){var n;return this.geoOptions=function(t){var e,n,i,o,r,s,a,l,c,d,u,p,h,f,v,b,g,m;const y=null!==(e=null==t?void 0:t.isEnabled)&&void 0!==e?e:null===(n=null==Os?void 0:Os.defaultProperties)||void 0===n?void 0:n.isEnabled,w=ur.isBoolean(null==t?void 0:t.showDialog,null===(i=null==Os?void 0:Os.defaultProperties)||void 0===i?void 0:i.showDialog),S=ur.isString(null==t?void 0:t.icon,null===(o=null==Os?void 0:Os.defaultProperties)||void 0===o?void 0:o.icon);return{isEnabled:y,showDialog:w,mobilePosition:ur.parseMobilePosition(ur.isString(null===(r=null==t?void 0:t.position)||void 0===r?void 0:r.mobile,"top"),Os),desktopPosition:ur.parseDesktopPosition(ur.isString(null===(s=null==t?void 0:t.position)||void 0===s?void 0:s.desktop,"top-center"),Os),icon:S,title:ur.isString(null===(a=null==t?void 0:t.text)||void 0===a?void 0:a.title,null===(l=null==Os?void 0:Os.text)||void 0===l?void 0:l.title),content:ur.isString(null===(c=null==t?void 0:t.text)||void 0===c?void 0:c.content,null===(d=null==Os?void 0:Os.text)||void 0===d?void 0:d.content),acceptBtnText:ur.isString(null===(u=null==t?void 0:t.text)||void 0===u?void 0:u.acceptBtn,null===(p=null==Os?void 0:Os.text)||void 0===p?void 0:p.acceptBtn),rejectBtnText:ur.isString(null===(h=null==t?void 0:t.text)||void 0===h?void 0:h.rejectBtn,null===(f=null==Os?void 0:Os.text)||void 0===f?void 0:f.rejectBtn),displayInMobile:ur.isBoolean(null===(v=null==t?void 0:t.displayIn)||void 0===v?void 0:v.mobile,null===(b=null==Os?void 0:Os.defaultProperties)||void 0===b?void 0:b.displayInMobile),displayInDesktop:ur.isBoolean(null===(g=null==t?void 0:t.displayIn)||void 0===g?void 0:g.desktop,null===(m=null==Os?void 0:Os.defaultProperties)||void 0===m?void 0:m.displayInDesktop)}}(t),"prompt"!==e||!(null===(n=this.geoOptions)||void 0===n?void 0:n.showDialog)||(yield this.constructPrompt())}))}constructPrompt(){return ks(this,void 0,void 0,(function*(){var t,e,n,i,o,r,s,a;const l=new Hr(null===(t=this.geoOptions)||void 0===t?void 0:t.title,null===(e=this.geoOptions)||void 0===e?void 0:e.content);return l.addButton(new Zr(null===(n=this.geoOptions)||void 0===n?void 0:n.acceptBtnText,(()=>{this.userInteracted.resolve(!0),l.removeFromDom()}),"primary")).addButton(new Vr(null===(i=this.geoOptions)||void 0===i?void 0:i.rejectBtnText,(()=>{this.userInteracted.resolve(!1),l.removeFromDom()}),"secondary")).setPosition(null===(o=this.geoOptions)||void 0===o?void 0:o.desktopPosition,null===(r=this.geoOptions)||void 0===r?void 0:r.mobilePosition,"rtl").setDisplayInMobile(null===(s=this.geoOptions)||void 0===s?void 0:s.displayInMobile).setDisplayInDesktop(null===(a=this.geoOptions)||void 0===a?void 0:a.displayInDesktop).addIcon(this.geoOptions.icon),yield this.userInteracted}))}}const Es=Ps;var _s=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class As{startManager(t,e){return _s(this,void 0,void 0,(function*(){var n;if("geolocation"in navigator){this.context=t;const i=t=>{s.A.warn(`Unable to get user's location: ${t.message}`)},o={enableHighAccuracy:!0},r=yield this.checkGeoPermissionState();if(this.context.elementsOptions||"prompt"!==r||(yield this.context.retrieveSDKElementsOptions(),e=Object.assign(Object.assign({},e),null===(n=this.context.elementsOptions)||void 0===n?void 0:n.geolocation)),(null==e?void 0:e.isEnabled)&&"denied"!==r){s.A.info("Initializing Geolocation service");(yield Es.Instance.init(e,r))&&navigator.geolocation.getCurrentPosition(this.sendGeolocationDataToServer.bind(this),i,o)}else"denied"===r&&s.A.warn("User denied access to its location.")}else s.A.error("Geoloction is not supported in your browser.")}))}static get Instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new As}setGeolocationData(t){s.A.info("Successfully obtained user location"),this.geolocation=(new ps).setCoords(t)}checkGeoPermissionState(){return _s(this,void 0,void 0,(function*(){var t;return null===(t=yield navigator.permissions.query({name:"geolocation"}))||void 0===t?void 0:t.state}))}sendGeolocationDataToServer(t){return _s(this,void 0,void 0,(function*(){let e;try{e=yield this.context.getMisc("coordinates")}catch(t){s.A.error(`Unable to establish connection with IndexedDB to read the location: ${t.message}`)}let n=!1;e&&(n=!this.checkPositionsEquality(e,t.coords));const i={latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude};this.setGeolocationData(i);const o=this.geolocation.getFormattedResult("t71");if(!e||n){this.context.db.setCoords(i);try{return yield this.context.api.sendMessageUpstream(o),!0}catch(t){return s.A.error(`Could not send geolocation data to server, error: ${t}`),!1}}return!1}))}checkPositionsEquality(t,e){return t.latitude===e.latitude&&t.longitude===e.longitude&&t.altitude===e.altitude}}const Cs=As;var Ts=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Ds{static checkSubscriptionSync(t){return Ts(this,void 0,void 0,(function*(){const{serverSynced:e,serverSyncedTime:n}=yield t.db.getMisc(),i=t.getService(Hn);if("boolean"!=typeof e||"number"!=typeof n||i.subscriptionChangeDetected)return void this.setSubscriptionSyncValue(t,!1);if(e||Date.now()<Number(n)+this.syncIntervalTime)return;let o=!1;try{o=yield t.api.hasServerSyncedSubscription()}catch(t){s.A.error("Failed requesting the server for subscription sync status")}if(o)this.setSubscriptionSyncValue(t,!0);else try{yield i.subscriptionUpdated(),this.setSubscriptionSyncValue(t,!1)}catch(t){s.A.error("Could not sync the server with the latest subscription")}}))}static setSubscriptionSyncValue(t,e){return Ts(this,void 0,void 0,(function*(){yield t.db.setMisc({serverSynced:e,serverSyncedTime:Date.now()})}))}}Ds.syncIntervalTime=864e5;const $s=Ds;var Rs=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Ms=class{getFormattedResult(t){return{}}setFavouriteDevice(t){return this.devicename=t,this}};Rs([(0,Zn.P)("fav_name")],Ms.prototype,"devicename",void 0),Ms=Rs([Zn.s],Ms);const Ns=Ms;var js=n(623),Ls=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{staticBaseURL:Bs,libBaseName:Ws}=n(119);class Us{static get Instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new Us}init(t){return Ls(this,void 0,void 0,(function*(){return this.resolved=new vi.A,this.constructPrompt(t),yield this.resolved,this.deviceName}))}getDefaultOptions(t){return{buttonText:t?" ":" ",bodyText:t?"               :":"                ."}}setDeviceName(t){this.deviceName=t}constructPrompt(t){const e=this.getDefaultOptions(t),n=new bi("div").attr("class",`${Ws}-fav-device-dialog-wrapper`),i=new bi("div").attr("class",`${Ws}-fav-device-content-wrapper`).childOf(n);let o;new bi("p").text(null==e?void 0:e.bodyText).attr("class",`${Ws}-fav-device-prompt-text`).childOf(i),t&&(o=new bi("input").attr("class",`${Ws}-fav-device-input`).attr("placeholder"," ").childOf(i));const r=new bi("a").text(null==e?void 0:e.buttonText).attr("class",`${Ws}-fav-device-button`).childOf(i);null===document||void 0===document||document.addEventListener("click",function(t){var e,i;if(null===(e=r.elem)||void 0===e?void 0:e.contains(null==t?void 0:t.target))if(o){const t=o.elem.value;t.length?(n.attr("class",`${Ws}-hide-fav-device-dialog`),this.setDeviceName(t),this.resolved.resolve(!0)):o.attr("class",`${Ws}-fav-device-input-err`)}else n.attr("class",`${Ws}-hide-fav-device-dialog`),this.resolved.resolve(!0);else(null===(i=n.elem)||void 0===i?void 0:i.contains(null==t?void 0:t.target))||(n.attr("class",`${Ws}-hide-fav-device-dialog`),this.resolved.resolve(!0))}.bind(this)),document.body.appendChild(n.elem),new bi("style").text((0,js.default)(Ws,Bs)).childOf(new bi(document.head))}}var Fs=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};class Hs{static get Instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new Hs}init(t,e){return Fs(this,void 0,void 0,(function*(){this.context=t;const n=yield Us.Instance.init(e);"string"==typeof n&&this.sendFavouriteDeviceDataToServer(n)}))}sendFavouriteDeviceDataToServer(t){return Fs(this,void 0,void 0,(function*(){const e=(new Ns).setFavouriteDevice(t).getFormattedResult("t200");try{yield this.context.api.sendMessageUpstream(e),s.A.info("Successfully added to favourite device(s).")}catch(t){s.A.error(`Could not send favourite device data to server, error: ${t}`)}}))}}const zs=Hs;var Ks=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Zs=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};const{libraryBaseName:Vs,enableLog:Gs,logLevel:Ys}=n(119);class Js{constructor(t){this.EVENTS={PROMPT_ACCEPT:I.MY.PROMPT_ACCEPT,PROMPT_REJECT:I.MY.PROMPT_REJECT,PROMPT_OPEN:I.MY.PROMPT_OPEN,PROMPT_CLOSE:I.MY.PROMPT_CLOSE,SUBSCRIPTION_CHANGE:I.lo.SUBSCRIPTION_CHANGE,NOTIFICATION_RECEIVED:I.L2.NOTIFICATION_RECEIVED,NOTIFICATION_CLICKED:I.L2.NOTIFICATION_CLICKED,NOTIFICATION_CLOSED:I.L2.NOTIFICATION_CLOSED},this.context=t,this.initialized=new vi.A,this.finishedSubscribing=new vi.A}init(t){return Zs(this,arguments,void 0,(function*(t,e={}){this._initializeLog(null==e?void 0:e.logLevel),this.context.setAppId(t),this.context.setServiceWorkerPath(e.serviceWorkerPath),this.context.setServiceWorkerScope(e.serviceWorkerScope),(this.context.getEnvironment()===a.default.ServiceWorker||this.context.isSubdomainWindow())&&(yield this.context.setDeviceId(null==e?void 0:e.did));try{s.A.debug(`Initializing ${Vs} v1.11.0 for environment: ${this.context.getEnvironment()}`);const t=null==e?void 0:e.services,n=this.getActivatableSDKServices(t);if(this.context.setEnabledServices(n),this.context.getEnvironment()===a.default.ServiceWorker&&(yield this._initServiceWorker(e)),this.context.getEnvironment()===a.default.SDK){const t=yield this.context.getInitializationState();yield this._initSDK(e),"granted"!==(null==t?void 0:t.permissionState)&&"denied"!==(null==t?void 0:t.permissionState)&&(yield this.context.retrieveSDKElementsOptions())}this.context.workerMessenger.attachEventHandlers(),yield this._startServices(n),s.A.info(`${Vs} v${this.context.getPusheVersion()} initialized`),this.initialized.resolve(!0)}catch(t){t instanceof zn.A?(s.A.error("Retrieving application info failed"),s.A.hint(`Make sure you have provided the correct application id to ${Vs}.init()`)):t instanceof o.A||s.A.error(t),s.A.error(`Initializing ${Vs} failed, ${t}`),this.initialized.resolve(!1)}}))}_startServices(t){return Zs(this,void 0,void 0,(function*(){for(const e of t)switch(e){case"push":yield this.context.startService(Hn);break;case"analytics":yield this.context.startService(fi)}}))}_initSDK(t){return Zs(this,void 0,void 0,(function*(){const e=t.publicKey||(yield this.context.getInitializationState()).publicKey;if(this.context.setPublicKey(e),this.context.isHttpsWebsite()||this.context.isLocalhost()){s.A.debug(`Initialize SDK in ${this.context.isLocalhost()?"localhost":"https website"}...`);try{yield this.context.serviceWorker.initialize(this.context,self)}catch(t){if(t instanceof i.A)return void s.A.error("ServiceWorker is not supported");throw t}}else s.A.debug("Running on non-https website, will not register service worker")}))}_initServiceWorker(t){return Zs(this,void 0,void 0,(function*(){(null==t?void 0:t.publicKey)&&this.context.setPublicKey(null==t?void 0:t.publicKey),yield this.context.serviceWorker.initialize(this.context,self)}))}subscribe(){return Zs(this,arguments,void 0,(function*(t={}){var e,n,i,o,r,l,c,d,u;yield this.initialized,this.checkSubscriptionSyncOnServer();const p=new Zo(this.context).getPrioritizedElementOptions(t,"prompt"),h=this.context,f=h.getService(Hn);if(void 0===p.browserPrompt&&(p.browserPrompt=!0),yield yr.Instance.init(h,null==p?void 0:p.unblockPrompt),h.getEnvironment()===a.default.SDK&&window.location.href.includes("pushe-fav")){const t=(yield h.getInitializationState()).isSubscribed;yield zs.Instance.init(h,t)}if(cs.Instance.setOptions({prompt:p,showDialog:null===(e=null==p?void 0:p.showDialog)||void 0===e||e,dialogRetryRate:null!==(n=null==p?void 0:p.dialogRetryRate)&&void 0!==n?n:0,delayingPrompt:{timeSpent:null!==(o=null===(i=null==p?void 0:p.delayingPrompt)||void 0===i?void 0:i.timeSpent)&&void 0!==o?o:0,surfedPages:null!==(l=null===(r=null==p?void 0:p.delayingPrompt)||void 0===r?void 0:r.surfedPages)&&void 0!==l?l:0,percentileScrolled:null!==(d=null===(c=null==p?void 0:p.delayingPrompt)||void 0===c?void 0:c.percentileScrolled)&&void 0!==d?d:0}}),p.showBell&&Ko.Instance.displayBell(h,Object.assign({},null!==(u=null==p?void 0:p.bell)&&void 0!==u?u:{})).then(),h.isHttpsWebsite()||h.isLocalhost()){if(!this.context.isServiceRunning(Hn))return s.A.warn("Attempted to subscribe to push but PushService is not running"),this.finishedSubscribing.resolve(!1),!1;const t=yield f.getSubscription(),e=yield f.getPermissionState();if("denied"===e)return s.A.warn("Permission state is 'denied' so do not proceed subscription"),this.finishedSubscribing.resolve(!1),!1;const n=yield h.getService(Hn).isSubscribed();if(t&&n)return s.A.debug("Already Subscribed! Skipping re-subscription"),this.finishedSubscribing.resolve(!0),!0;if("granted"!==e&&!(yield cs.Instance.displayPrompt(e,this.context)))return void this.finishedSubscribing.resolve(!0);const i=yield p.browserPrompt&&f.subscribe();return this.finishedSubscribing.resolve(!0),i}if(yield h.api.isSubscribed())return s.A.debug("Already Subscribed! Skipping re-subscription"),!0;if(!(yield cs.Instance.displayPrompt(yield this.getPermissionState())))return;return Hn.subscribeOnHttp(h)}))}getActivatableSDKServices(t){if(!t)switch(!0){case this.context.isHttpsWebsite()&&!this.context.isSubdomainWindow():case this.context.isLocalhost()&&!0:t=["push","analytics"];break;case this.context.isHttpSite():t=["analytics"];break;case this.context.isSubdomainWindow():t=["push"]}return t}checkSubscriptionSyncOnServer(){return Zs(this,void 0,void 0,(function*(){yield this.finishedSubscribing,yield $s.checkSubscriptionSync(this.context)}))}_initializeLog(t){Gs&&(s.A.enable(),s.A.setEnvironment(this.context.getEnvironment())),(t||Ys)&&s.A.setLevel(t||Ys)}displayBell(){return Zs(this,arguments,void 0,(function*(t={}){yield this.initialized;const e=new Zo(this.context).getPrioritizedElementOptions(t,"bell"),n=null==e?void 0:e.showBell;if(n||void 0===n)return Ko.Instance.displayBell(this.context,e)}))}unsubscribe(){return Zs(this,void 0,void 0,(function*(){if(yield this.initialized,!this.context.isServiceRunning(Hn))return!1;try{return yield this.context.getService(Hn).unsubscribe(),!0}catch(t){if(!(t instanceof r))throw t;return s.A.error("Unsubscribing push failed: "+t.message),!1}}))}getDeviceId(){return Zs(this,arguments,void 0,(function*(t=!0){yield this.initialized;const e=new Error("Can not return deviceId as the user is not subscribed to Push services."),n=this.context.deviceId;if(t)return n;if(this.context.isHttpsWebsite()||this.context.isLocalhost()){if("granted"===(yield this.getPermissionState()))return n;throw e}if("granted"===(yield this.context.api.getInitializationState()).permissionState)return n;throw e}))}getPermissionState(){return Zs(this,void 0,void 0,(function*(){if(yield this.initialized,this.context.isServiceRunning(Hn)){const t=yield this.context.getService(Hn).getPermissionState();return s.A.debug(t),t}}))}addEventListener(t,e){e&&"function"==typeof e?t&&Object.values(this.EVENTS).includes(t)?O.A.PublicInstance.on(t,e):s.A.error(`Unknown event name passed to method ${Vs}.addEventListener`):s.A.error(`Please pass a valid callback to method ${Vs}.addEventListener`)}removeEventListener(t,e){t&&Object.values(this.EVENTS).includes(t)?O.A.PublicInstance.off(t,e):s.A.error(`Unknown event name passed to method ${Vs}.addEventListener`)}getAllEventListeners(t){return O.A.PublicInstance.listeners(t)}removeAllEventListeners(t){O.A.PublicInstance.removeAllListeners(t)}addTags(t){return Zs(this,void 0,void 0,(function*(){if(!(0,Yo.G)(t))return Promise.reject(new Error("addTags parameter must be an object"));yield qo.Instance.addTags(this.context,t)}))}removeTags(t){return Zs(this,void 0,void 0,(function*(){if(!Array.isArray(t))return Promise.reject(new Error("removeTags parameter must be a list of tag keys"));t.length>0&&(yield qo.Instance.removeTags(this.context,t))}))}getAllTags(){return Zs(this,void 0,void 0,(function*(){return qo.Instance.getAllTags()}))}setUserEmail(t){return Zs(this,void 0,void 0,(function*(){return Sr.A.Instance.setUserEmail(this.context,t)}))}getUserEmail(){return Zs(this,void 0,void 0,(function*(){return Sr.A.Instance.getUserEmail()}))}setUserPhoneNumber(t){return Zs(this,void 0,void 0,(function*(){return Sr.A.Instance.setUserPhoneNumber(this.context,t)}))}getUserPhoneNumber(){return Zs(this,void 0,void 0,(function*(){return Sr.A.Instance.getUserPhoneNumber()}))}setCustomId(t){return Zs(this,void 0,void 0,(function*(){return"string"!=typeof t?Promise.reject("customId should be of type string"):Sr.A.Instance.setCustomId(this.context,t)}))}getCustomId(){return Zs(this,void 0,void 0,(function*(){return Sr.A.Instance.getCustomId()}))}sendEvent(t,e){return Zs(this,void 0,void 0,(function*(){return new Pr(this.context).sendEvent(t,e)}))}sendEcommerceData(t,e,n,i,o){return Zs(this,void 0,void 0,(function*(){return new Tr(this.context).sendEcommerceData(t,e,n,i,o)}))}enableGeolocation(t){return Zs(this,void 0,void 0,(function*(){yield this.finishedSubscribing;const e=new Zo(this.context).getPrioritizedElementOptions(t,"geolocation");yield Cs.Instance.startManager(this.context,e)}))}}Ks([function(t,e,n){const i=n.value;return n.value=function(...t){const e=()=>i.apply(this,t);this.context.getEnvironment()!==a.default.SDK||"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e.bind(this))},n}],Js.prototype,"init",null)},311:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});class i{constructor(t){if(!(this instanceof i))return new i(t);this.promise=t||new Promise(this.promiseExecutor.bind(this))}asPromise(){return this.promise}then(t,e){if(this.rejectOnUseReason)throw this.rejectOnUseReason;return new i(this.promise.then(t,e))}catch(t){return new i(this.promise.catch(t))}resolve(t){this.resolveFunction(t)}reject(t){this.rejectFunction(t)}rejectIfUsed(t){this.rejectOnUseReason=t}promiseExecutor(t,e){this.resolveFunction=t,this.rejectFunction=e}}},988:(t,e,n)=>{"use strict";function i(t){return!("object"!=typeof t||Array.isArray(t)||null===t||""===t||t instanceof String)}function o(t){return!i(t)||0===Object.values(t).length}n.d(e,{G:()=>i,R:()=>o})},514:(t,e,n)=>{"use strict";n.d(e,{P:()=>o,s:()=>r});n(630);const i=Symbol("json");function o(t){const e={isJson:!0,serializedKey:t};return Reflect.metadata(i,e)}function r(t){return class extends t{getFormattedResult(t){var e;const n=Object.getOwnPropertyNames(this);let o={};for(const t of n){const n=(r=this,s=t,Reflect.getMetadata(i,r,s));(null==n?void 0:n.isJson)&&(o[null!==(e=null==n?void 0:n.serializedKey)&&void 0!==e?e:t]=this[t])}var r,s;return t&&(o={types:[t],[t]:[o]}),o}}}},283:(t,e,n)=>{"use strict";n.d(e,{O:()=>s,u:()=>r});var i=n(568),o=n(242);function r(){return"undefined"!=typeof self&&void 0!==self.registration?o.default.ServiceWorker:"undefined"!=typeof window?o.default.SDK:o.default.Unknown}function s(...t){return(e,n,o)=>{const s=o.value;o.value=function(){if(-1===t.indexOf(r()))throw new i.A(`The function ${e.constructor.name}.${n} was called in an invalid environment: ${r()}`);return s.apply(this,arguments)}}}},266:(t,e,n)=>{"use strict";n.d(e,{we:()=>i,yy:()=>o});function i(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}function o(t){return new Promise((e=>setTimeout(e,t)))}},106:(t,e,n)=>{"use strict";n.d(e,{MJ:()=>c,Y3:()=>i,ZZ:()=>l,e7:()=>d});n(630);class i{constructor(t){this.fields=t,this.reverseFieldMap=this.createReverseFieldObject(t)}createReverseFieldObject(t){return Object.entries(t).map((([t,e])=>Object.assign(Object.assign({},e),{realName:t}))).map((t=>({[t.name]:t}))).reduce(((t,e)=>{const n=Object.entries(e)[0];return t[n[0]]=n[1].realName,t}),{})}getJsonName(t){var e,n;return null!==(n=null===(e=this.fields[t])||void 0===e?void 0:e.name)&&void 0!==n?n:""}getRealName(t){return this.reverseFieldMap[t]}toJson(t){if(null==t)return null;const e=Object.keys(this.fields).reduce(((e,n)=>{const i=this.fields[n];return e[n]=i instanceof r?i.adapter.toJson(t[n]):t[n],e}),{});return Object.keys(e).reduce(((t,n)=>{const i=e[n];return void 0!==i&&(t[this.getJsonName(n)||n]=i),t}),{})}fromJson(t,e={}){if(null==t||"null"===t)return null;const n="string"==typeof t?JSON.parse(t):t,i=Object.keys(n).reduce(((t,e)=>(t[this.getRealName(e)||e]=n[e],t)),{});return Object.keys(i).reduce(((t,n)=>{const o=this.fields[n],s=i[n];return void 0!==s&&(t[n]=o instanceof r?o.adapter.fromJson(s):null==s&&e[n]||s),t}),{})}}class o{constructor(t){this.name=t}}class r extends o{constructor(t,e){super(t),this.adapter=e}}class s extends r{constructor(t,e){super(t,new a(e))}}class a extends i{constructor(t){super([]),this.adapter=t}toJson(t){return t.map((t=>this.adapter.toJson(t)))}fromJson(t){return("string"==typeof t?JSON.parse(t):t).map((t=>this.adapter.fromJson(t)))}}function l(t){return new o(t)}function c(t,e){return new r(t,e)}function d(t,e){return new s(t,e)}},290:(t,e,n)=>{var i={"./pushe-bell-theme1":574,"./pushe-bell-theme1.ts":574,"./pushe-favourite-device-prompt":623,"./pushe-favourite-device-prompt.ts":623,"./pushe-overlay-prompt-subscription":343,"./pushe-overlay-prompt-subscription.ts":343,"./pushe-unblock-prompt":849,"./pushe-unblock-prompt.ts":849};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=290},630:(t,e,n)=>{var i;!function(t){!function(){var e="object"==typeof globalThis?globalThis:"object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(t){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(t){}}(),i=o(t);function o(t,e){return function(n,i){Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0!==e.Reflect&&(i=o(e.Reflect,i)),function(t,e){var n=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,o=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,l=!s&&!a,c={create:s?function(){return ut(Object.create(null))}:a?function(){return ut({__proto__:null})}:function(){return ut({})},has:l?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:l?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},d=Object.getPrototypeOf(Function),u="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:lt(),p="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:ct(),h="function"==typeof WeakMap?WeakMap:dt(),f=i?Symbol.for("@reflect-metadata:registry"):void 0,v=ot(),b=rt(v);function g(t,e,n,i){if(j(n)){if(!Z(t))throw new TypeError;if(!G(e))throw new TypeError;return E(t,e)}if(!Z(t))throw new TypeError;if(!W(e))throw new TypeError;if(!W(i)&&!j(i)&&!L(i))throw new TypeError;return L(i)&&(i=void 0),_(t,e,n=K(n),i)}function m(t,e){function n(n,i){if(!W(n))throw new TypeError;if(!j(i)&&!Y(i))throw new TypeError;$(t,e,n,i)}return n}function y(t,e,n,i){if(!W(n))throw new TypeError;return j(i)||(i=K(i)),$(t,e,n,i)}function w(t,e,n){if(!W(e))throw new TypeError;return j(n)||(n=K(n)),A(t,e,n)}function S(t,e,n){if(!W(e))throw new TypeError;return j(n)||(n=K(n)),C(t,e,n)}function x(t,e,n){if(!W(e))throw new TypeError;return j(n)||(n=K(n)),T(t,e,n)}function I(t,e,n){if(!W(e))throw new TypeError;return j(n)||(n=K(n)),D(t,e,n)}function O(t,e){if(!W(t))throw new TypeError;return j(e)||(e=K(e)),R(t,e)}function k(t,e){if(!W(t))throw new TypeError;return j(e)||(e=K(e)),M(t,e)}function P(t,e,n){if(!W(e))throw new TypeError;if(j(n)||(n=K(n)),!W(e))throw new TypeError;j(n)||(n=K(n));var i=at(e,n,!1);return!j(i)&&i.OrdinaryDeleteMetadata(t,e,n)}function E(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!j(i)&&!L(i)){if(!G(i))throw new TypeError;e=i}}return e}function _(t,e,n,i){for(var o=t.length-1;o>=0;--o){var r=(0,t[o])(e,n,i);if(!j(r)&&!L(r)){if(!W(r))throw new TypeError;i=r}}return i}function A(t,e,n){if(C(t,e,n))return!0;var i=nt(e);return!L(i)&&A(t,i,n)}function C(t,e,n){var i=at(e,n,!1);return!j(i)&&H(i.OrdinaryHasOwnMetadata(t,e,n))}function T(t,e,n){if(C(t,e,n))return D(t,e,n);var i=nt(e);return L(i)?void 0:T(t,i,n)}function D(t,e,n){var i=at(e,n,!1);if(!j(i))return i.OrdinaryGetOwnMetadata(t,e,n)}function $(t,e,n,i){at(n,i,!0).OrdinaryDefineOwnMetadata(t,e,n,i)}function R(t,e){var n=M(t,e),i=nt(t);if(null===i)return n;var o=R(i,e);if(o.length<=0)return n;if(n.length<=0)return o;for(var r=new p,s=[],a=0,l=n;a<l.length;a++){var c=l[a];r.has(c)||(r.add(c),s.push(c))}for(var d=0,u=o;d<u.length;d++){c=u[d];r.has(c)||(r.add(c),s.push(c))}return s}function M(t,e){var n=at(t,e,!1);return n?n.OrdinaryOwnMetadataKeys(t,e):[]}function N(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function L(t){return null===t}function B(t){return"symbol"==typeof t}function W(t){return"object"==typeof t?null!==t:"function"==typeof t}function U(t,e){switch(N(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=q(t,o);if(void 0!==i){var r=i.call(t,n);if(W(r))throw new TypeError;return r}return F(t,"default"===n?"number":n)}function F(t,e){if("string"===e){var n=t.toString;if(V(n))if(!W(o=n.call(t)))return o;if(V(i=t.valueOf))if(!W(o=i.call(t)))return o}else{var i;if(V(i=t.valueOf))if(!W(o=i.call(t)))return o;var o,r=t.toString;if(V(r))if(!W(o=r.call(t)))return o}throw new TypeError}function H(t){return!!t}function z(t){return""+t}function K(t){var e=U(t,3);return B(e)?e:z(e)}function Z(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function V(t){return"function"==typeof t}function G(t){return"function"==typeof t}function Y(t){switch(N(t)){case 3:case 4:return!0;default:return!1}}function J(t,e){return t===e||t!=t&&e!=e}function q(t,e){var n=t[e];if(null!=n){if(!V(n))throw new TypeError;return n}}function Q(t){var e=q(t,r);if(!V(e))throw new TypeError;var n=e.call(t);if(!W(n))throw new TypeError;return n}function X(t){return t.value}function tt(t){var e=t.next();return!e.done&&e}function et(t){var e=t.return;e&&e.call(t)}function nt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===d)return e;if(e!==d)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var o=i.constructor;return"function"!=typeof o||o===t?e:o}function it(){var t,n,i,o;j(f)||void 0===e.Reflect||f in e.Reflect||"function"!=typeof e.Reflect.defineMetadata||(t=st(e.Reflect));var r=new h,s={registerProvider:a,getProvider:c,setProvider:v};return s;function a(e){if(!Object.isExtensible(s))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===e:break;case j(n):n=e;break;case n===e:break;case j(i):i=e;break;case i===e:break;default:void 0===o&&(o=new p),o.add(e)}}function l(e,r){if(!j(n)){if(n.isProviderFor(e,r))return n;if(!j(i)){if(i.isProviderFor(e,r))return n;if(!j(o))for(var s=Q(o);;){var a=tt(s);if(!a)return;var l=X(a);if(l.isProviderFor(e,r))return et(s),l}}}if(!j(t)&&t.isProviderFor(e,r))return t}function c(t,e){var n,i=r.get(t);return j(i)||(n=i.get(e)),j(n)?(j(n=l(t,e))||(j(i)&&(i=new u,r.set(t,i)),i.set(e,n)),n):n}function d(t){if(j(t))throw new TypeError;return n===t||i===t||!j(o)&&o.has(t)}function v(t,e,n){if(!d(n))throw new Error("Metadata provider not registered.");var i=c(t,e);if(i!==n){if(!j(i))return!1;var o=r.get(t);j(o)&&(o=new u,r.set(t,o)),o.set(e,n)}return!0}}function ot(){var t;return!j(f)&&W(e.Reflect)&&Object.isExtensible(e.Reflect)&&(t=e.Reflect[f]),j(t)&&(t=it()),!j(f)&&W(e.Reflect)&&Object.isExtensible(e.Reflect)&&Object.defineProperty(e.Reflect,f,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function rt(t){var e=new h,n={isProviderFor:function(t,n){var i=e.get(t);return!j(i)&&i.has(n)},OrdinaryDefineOwnMetadata:s,OrdinaryHasOwnMetadata:o,OrdinaryGetOwnMetadata:r,OrdinaryOwnMetadataKeys:a,OrdinaryDeleteMetadata:l};return v.registerProvider(n),n;function i(i,o,r){var s=e.get(i),a=!1;if(j(s)){if(!r)return;s=new u,e.set(i,s),a=!0}var l=s.get(o);if(j(l)){if(!r)return;if(l=new u,s.set(o,l),!t.setProvider(i,o,n))throw s.delete(o),a&&e.delete(i),new Error("Wrong provider for target.")}return l}function o(t,e,n){var o=i(e,n,!1);return!j(o)&&H(o.has(t))}function r(t,e,n){var o=i(e,n,!1);if(!j(o))return o.get(t)}function s(t,e,n,o){i(n,o,!0).set(t,e)}function a(t,e){var n=[],o=i(t,e,!1);if(j(o))return n;for(var r=Q(o.keys()),s=0;;){var a=tt(r);if(!a)return n.length=s,n;var l=X(a);try{n[s]=l}catch(t){try{et(r)}finally{throw t}}s++}}function l(t,n,o){var r=i(n,o,!1);if(j(r))return!1;if(!r.delete(t))return!1;if(0===r.size){var s=e.get(n);j(s)||(s.delete(o),0===s.size&&e.delete(s))}return!0}}function st(t){var e=t.defineMetadata,n=t.hasOwnMetadata,i=t.getOwnMetadata,o=t.getOwnMetadataKeys,r=t.deleteMetadata,s=new h;return{isProviderFor:function(t,e){var n=s.get(t);return!(j(n)||!n.has(e))||!!o(t,e).length&&(j(n)&&(n=new p,s.set(t,n)),n.add(e),!0)},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:i,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:r}}function at(t,e,n){var i=v.getProvider(t,e);if(!j(i))return i;if(n){if(v.setProvider(t,e,b))return b;throw new Error("Illegal state.")}}function lt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,o=n+1;o<i;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,J(e,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){if(!J(this._cacheKey,t)){this._cacheIndex=-1;for(var n=0;n<this._keys.length;n++)if(J(this._keys[n],t)){this._cacheIndex=n;break}}return this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}function ct(){return function(){function t(){this._map=new u}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.keys()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function dt(){var t=16,e=c.create(),i=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return r(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+l()}while(c.has(e,t));return e[t]=!0,t}function r(t,e){if(!n.call(t,i)){if(!e)return;Object.defineProperty(t,i,{value:c.create()})}return t[i]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(t){if("function"==typeof Uint8Array){var e=new Uint8Array(t);return"undefined"!=typeof crypto?crypto.getRandomValues(e):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(e):s(e,t),e}return s(new Array(t),t)}function l(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<t;++i){var o=e[i];4!==i&&6!==i&&8!==i||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function ut(t){return t.__=void 0,delete t.__,t}t("decorate",g),t("metadata",m),t("defineMetadata",y),t("hasMetadata",w),t("hasOwnMetadata",S),t("getMetadata",x),t("getOwnMetadata",I),t("getMetadataKeys",O),t("getOwnMetadataKeys",k),t("deleteMetadata",P)}(i,e),void 0===e.Reflect&&(e.Reflect=t)}()}(i||(i={}))},8:t=>{"use strict";t.exports=JSON.parse('{"properties":{"backgroundColor":null,"bellColor":null,"position":"right"},"tooltip":{"prompt":{"text":"   "},"granted":{"text":"    "},"denied":{"text":"   "},"afterToggledTo":{"subscribed":{"text":"    "},"unsubscribed":{"text":"   "}}},"dialog":{"subscribe":{"show":true,"text":"    ","buttonText":""},"unsubscribe":{"show":true,"text":"      ","buttonText":" "},"denied":{"show":true,"text":"                ","buttonText":" ","dialogImage":{"chrome":"https://static.pushe.co/d/webpush/unblock-chrome.png","firefox":"https://static.pushe.co/d/webpush/unblock-firefox.png"}}},"availableThemes":["pushe-bell-theme1"],"bellTheme":"pushe-bell-theme1"}')},119:t=>{"use strict";t.exports=JSON.parse('{"libraryBaseName":"Pushe","libBaseName":"pushe","baseURL":"https://webpush.pushe.co/v2","httpBaseDomain":"wp.pushe.co","staticBaseURL":"https://static.pushe.co","optionUrlPath":"/c","homePageBaseURL":"https://pushe.co","serviceWorkerPath":"/pushe-sw.js","serviceWorkerScope":"/pushe-sw","enableLog":true}')},269:t=>{"use strict";t.exports=JSON.parse('{"isEnabled":true,"showDialog":true,"text":{"title":"  ","content":"             ","rejectBtn":" ","acceptBtn":" "},"position":{"desktop":"bottom-left","mobile":"bottom"},"displayIn":{"mobile":true,"desktop":true},"icon":"https://static.pushe.co/d/webpush/default-geo-icon.png"}')},789:t=>{"use strict";t.exports=JSON.parse('{"backgroundText":"          Allow  "}')},459:t=>{"use strict";t.exports=JSON.parse('{"title":"  ","content":"       ","acceptText":"  ","rejectText":" ","icon":"","position":"top-center","mobilePosition":"top","direction":"rtl","timeSpentMaxSession":14400000,"availableThemes":["pushe-prompt-theme1","pushe-prompt-theme2"],"promptTheme":"pushe-prompt-theme2"}')},625:t=>{"use strict";t.exports=JSON.parse('{"propeties":{"enableUnblockPrompt":true,"displayInMobile":true,"displayInDesktop":true,"mobilePosition":"","desktopPosition":""},"text":{"body":"       .            .","button":" "},"dialogImage":{"chrome":"https://static.pushe.co/d/webpush/unblock-chrome.png","firefox":"https://static.pushe.co/d/webpush/unblock-firefox.png","chromeMobile":"https://static.pushe.co/d/webpush/unblock-chrome-mobile.png","firefoxMobile":"https://static.pushe.co/d/webpush/unblock-firefox-mobile.png"}}')}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{EVENTS:()=>A,addEventListener:()=>h,addTags:()=>g,displayBell:()=>c,enableGeolocation:()=>_,getAllEventListeners:()=>v,getAllTags:()=>y,getCustomId:()=>k,getDeviceId:()=>u,getPermissionState:()=>p,getUserEmail:()=>S,getUserPhoneNumber:()=>I,init:()=>a,removeAllEventListeners:()=>b,removeEventListener:()=>f,removeTags:()=>m,sendEcommerceData:()=>E,sendEvent:()=>P,setCustomId:()=>O,setUserEmail:()=>w,setUserPhoneNumber:()=>x,subscribe:()=>l,unsubscribe:()=>d});const{PusheContext:t}=n(440),{Environment:e}=n(242),o=n(199).A,r=new t,s=new o(r);if(r.getEnvironment()===e.ServiceWorker){const t=new URL(location).searchParams,e=t.get("appId"),n=(t.get("services")||"").split(","),i=t.get("vapidKey"),o=t.get("deviceId");s.init(e,{services:n,publicKey:i,did:o})}const a=s.init.bind(s),l=s.subscribe.bind(s),c=s.displayBell.bind(s),d=s.unsubscribe.bind(s),u=s.getDeviceId.bind(s),p=s.getPermissionState.bind(s),h=s.addEventListener.bind(s),f=s.removeEventListener.bind(s),v=s.getAllEventListeners.bind(s),b=s.removeAllEventListeners.bind(s),g=s.addTags.bind(s),m=s.removeTags.bind(s),y=s.getAllTags.bind(s),w=s.setUserEmail.bind(s),S=s.getUserEmail.bind(s),x=s.setUserPhoneNumber.bind(s),I=s.getUserPhoneNumber.bind(s),O=s.setCustomId.bind(s),k=s.getCustomId.bind(s),P=s.sendEvent.bind(s),E=s.sendEcommerceData.bind(s),_=s.enableGeolocation.bind(s),A=s.EVENTS})(),Pushe=i})();